(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const e of c)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(c){const e={};return c.integrity&&(e.integrity=c.integrity),c.referrerPolicy&&(e.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?e.credentials="include":c.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(c){if(c.ep)return;c.ep=!0;const e=n(c);fetch(c.href,e)}})();var Jn={exports:{}},Cs;function nc(){return Cs||(Cs=1,function(s,t){(function(){var n=Math.PI,o=Math.sin,c=Math.cos,e=Math.tan,i=Math.asin,h=Math.atan2,r=Math.acos,u=n/180,l=1e3*60*60*24,M=2440588,f=2451545;function g(L){return L.valueOf()/l-.5+M}function D(L){return new Date((L+.5-M)*l)}function p(L){return g(L)-f}var m=u*23.4397;function I(L,$){return h(o(L)*c(m)-e($)*o(m),c(L))}function y(L,$){return i(o($)*c(m)+c($)*o(m)*o(L))}function w(L,$,q){return h(o(L),c(L)*o($)-e(q)*c($))}function P(L,$,q){return i(o($)*o(q)+c($)*c(q)*c(L))}function E(L,$){return u*(280.16+360.9856235*L)-$}function x(L){return L<0&&(L=0),2967e-7/Math.tan(L+.00312536/(L+.08901179))}function A(L){return u*(357.5291+.98560028*L)}function b(L){var $=u*(1.9148*o(L)+.02*o(2*L)+3e-4*o(3*L)),q=u*102.9372;return L+$+q+n}function _(L){var $=A(L),q=b($);return{dec:y(q,0),ra:I(q,0)}}var T={};T.getPosition=function(L,$,q){var F=u*-q,R=u*$,K=p(L),U=_(K),X=E(K,F)-U.ra;return{azimuth:w(X,R,U.dec),altitude:P(X,R,U.dec)}};var z=T.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];T.addTime=function(L,$,q){z.push([L,$,q])};var N=9e-4;function O(L,$){return Math.round(L-N-$/(2*n))}function Q(L,$,q){return N+(L+$)/(2*n)+q}function Y(L,$,q){return f+L+.0053*o($)-.0069*o(2*q)}function t0(L,$,q){return r((o(L)-o($)*o(q))/(c($)*c(q)))}function Z(L){return-2.076*Math.sqrt(L)/60}function o0(L,$,q,F,R,K,U){var X=t0(L,q,F),s0=Q(X,$,R);return Y(s0,K,U)}T.getTimes=function(L,$,q,F){F=F||0;var R=u*-q,K=u*$,U=Z(F),X=p(L),s0=O(X,R),a0=Q(0,R,s0),f0=A(a0),d0=b(f0),w0=y(d0,0),u0=Y(a0,f0,d0),l0,p0,y0,M0,E0,b0,g0={solarNoon:D(u0),nadir:D(u0-.5)};for(l0=0,p0=z.length;l0<p0;l0+=1)y0=z[l0],M0=(y0[0]+U)*u,E0=o0(M0,R,K,w0,s0,f0,d0),b0=u0-(E0-u0),g0[y0[1]]=D(b0),g0[y0[2]]=D(E0);return g0};function W(L){var $=u*(218.316+13.176396*L),q=u*(134.963+13.064993*L),F=u*(93.272+13.22935*L),R=$+u*6.289*o(q),K=u*5.128*o(F),U=385001-20905*c(q);return{ra:I(R,K),dec:y(R,K),dist:U}}T.getMoonPosition=function(L,$,q){var F=u*-q,R=u*$,K=p(L),U=W(K),X=E(K,F)-U.ra,s0=P(X,R,U.dec),a0=h(o(X),e(R)*c(U.dec)-o(U.dec)*c(X));return s0=s0+x(s0),{azimuth:w(X,R,U.dec),altitude:s0,distance:U.dist,parallacticAngle:a0}},T.getMoonIllumination=function(L){var $=p(L||new Date),q=_($),F=W($),R=149598e3,K=r(o(q.dec)*o(F.dec)+c(q.dec)*c(F.dec)*c(q.ra-F.ra)),U=h(R*o(K),F.dist-R*c(K)),X=h(c(q.dec)*o(q.ra-F.ra),o(q.dec)*c(F.dec)-c(q.dec)*o(F.dec)*c(q.ra-F.ra));return{fraction:(1+c(U))/2,phase:.5+.5*U*(X<0?-1:1)/Math.PI,angle:X}};function e0(L,$){return new Date(L.valueOf()+$*l/24)}T.getMoonTimes=function(L,$,q,F){var R=new Date(L);F?R.setUTCHours(0,0,0,0):R.setHours(0,0,0,0);for(var K=.133*u,U=T.getMoonPosition(R,$,q).altitude-K,X,s0,a0,f0,d0,w0,u0,l0,p0,y0,M0,E0,b0,g0=1;g0<=24&&(X=T.getMoonPosition(e0(R,g0),$,q).altitude-K,s0=T.getMoonPosition(e0(R,g0+1),$,q).altitude-K,d0=(U+s0)/2-X,w0=(s0-U)/2,u0=-w0/(2*d0),l0=(d0*u0+w0)*u0+X,p0=w0*w0-4*d0*X,y0=0,p0>=0&&(b0=Math.sqrt(p0)/(Math.abs(d0)*2),M0=u0-b0,E0=u0+b0,Math.abs(M0)<=1&&y0++,Math.abs(E0)<=1&&y0++,M0<-1&&(M0=E0)),y0===1?U<0?a0=g0+M0:f0=g0+M0:y0===2&&(a0=g0+(l0<0?E0:M0),f0=g0+(l0<0?M0:E0)),!(a0&&f0));g0+=2)U=s0;var n0={};return a0&&(n0.rise=e0(R,a0)),f0&&(n0.set=e0(R,f0)),!a0&&!f0&&(n0[l0>0?"alwaysUp":"alwaysDown"]=!0),n0},s.exports=T})()}(Jn)),Jn.exports}var Wn=nc();/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module base
 */const sc=.01720209895,oc=149597870,cc=.397777156,ec=.917482062;function ic(s){return .0057755183*s}const rc=24000005e-1,rn=2451545,ac=2415020,Yn=24150203135e-4,hc=24332824235e-4,jn=365.25,io=36525,Un=365.2421988,uc=365.25636;function lc(s){return rn+jn*(s-2e3)}function Mc(s){return 2e3+(s-rn)/jn}function fc(s){return Yn+Un*(s-1900)}function dc(s){return 1900+(s-Yn)/Un}function mc(s){return(s-rn)/io}function pc(s){return(1+Math.cos(s))*.5}let an=class{constructor(t,n,o,c){this._ra=t||0,this._dec=n||0,this.range=o,this.elongation=c}get ra(){return this._ra}set ra(t){this._ra=t}get dec(){return this._dec}set dec(t){this._dec=t}get lon(){return this._ra}set lon(t){this._ra=t}get lat(){return this._dec}set lat(t){this._dec=t}};function gc(s,t){const n=s.ra,o=s.dec,c=t.ra,e=t.dec,i=Math.sin(o),h=Math.cos(o),r=Math.sin(e),u=Math.cos(e),l=Math.sin(c-n),M=Math.cos(c-n);let f=Math.atan2(u*l,r*h-u*i*M);return f<0&&(f+=2*Math.PI),f}const ro=10*Math.PI/180/60,Dc=Math.cos(ro);function wc(s,t){let n=s%t;return n<0&&(n+=t),n}function yc(s,...t){Array.isArray(t[0])&&(t=t[0]);let n=t.length-1,o=t[n];for(;n>0;)n--,o=o*s+t[n];return o}function Pc(s,t){const n=s/t;return Math.floor(n)}function bc(s,t){return s<t?-1:s>t?1:0}function Ac(s){return[Math.sin(s),Math.cos(s)]}function Ic(s){return Math.PI/180*s}function Ec(s){return 180/Math.PI*s}function Tc(s){const t=Math.trunc(s),n=Math.abs(s-t);return[t,n]}function Lc(s,t=14){return parseFloat(s.toFixed(t))}function Jc(s,t){const n=new Error(s);return n.code=t,n}const a={K:sc,AU:oc,SOblJ2000:cc,COblJ2000:ec,lightTime:ic,JMod:rc,J2000:rn,J1900:ac,B1900:Yn,B1950:hc,JulianYear:jn,JulianCentury:io,BesselianYear:Un,meanSiderealYear:uc,JulianYearToJDE:lc,JDEToJulianYear:Mc,BesselianYearToJDE:fc,JDEToBesselianYear:dc,J2000Century:mc,illuminated:pc,Coord:an,limb:gc,SmallAngle:ro,CosSmallAngle:Dc,pmod:wc,horner:yc,floorDiv:Pc,cmp:bc,sincos:Ac,toRad:Ic,toDeg:Ec,modf:Tc,round:Lc,errorCode:Jc};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module interpolation
 */const Cc=Math.trunc,ao=new Error("Argument y must be length 3"),ho=new Error("Argument y must be length 4"),uo=new Error("Argument y must be length 5"),kt=new Error("Argument x3 (or x5) cannot equal x1"),Gn=new Error("Interpolating factor n must be in range -1 to 1"),lo=new Error("No extremum in table"),Qt=new Error("Extremum falls outside of table"),Kn=new Error("Zero falls outside of table"),Zt=new Error("Failure to converge");class Mo{constructor(t,n,o){if(o.length!==3)throw ao;if(n===t)throw kt;this.x1=t,this.x3=n,this.y=o,this.a=o[1]-o[0],this.b=o[2]-o[1],this.c=this.b-this.a,this.abSum=this.a+this.b,this.xSum=n+t,this.xDiff=n-t}interpolateX(t){const n=(2*t-this.xSum)/this.xDiff;return this.interpolateN(n)}interpolateXStrict(t){const n=(2*t-this.xSum)/this.xDiff;return this.interpolateNStrict(n)}interpolateN(t){return this.y[1]+t*.5*(this.abSum+t*this.c)}interpolateNStrict(t){if(t<-1||t>1)throw Gn;return this.interpolateN(t)}extremum(){if(this.c===0)throw lo;const t=this.abSum/(-2*this.c);if(t<-1||t>1)throw Qt;const n=.5*(this.xSum+this.xDiff*t),o=this.y[1]-this.abSum*this.abSum/(8*this.c);return[n,o]}zero(t){let n;t?n=e=>e-(2*this.y[1]+e*(this.abSum+this.c*e))/(this.abSum+2*this.c*e):n=e=>-2*this.y[1]/(this.abSum+this.c*e);const[o,c]=tn(0,n);if(!c)throw Zt;if(o>1||o<-1)throw Kn;return .5*(this.xSum+this.xDiff*o)}}function xc(s,t,n,o){let c=o;if(o.length>3){const e=(n-t)/(o.length-1);if(e===0)throw kt;let i=Cc((s-t)/e+.5);i<1?i=1:i>o.length-2&&(i=o.length-2),c=o.slice(i-1,i+2),n=t+(i+1)*e,t=t+(i-1)*e}return new Mo(t,n,c)}const tn=function(s,t){for(let n=0;n<50;n++){const o=t(s);if(!isFinite(o)||isNaN(o))break;if(Math.abs((o-s)/s)<1e-15)return[o,!0];s=o}return[0,!1]};function $c(s){if(s.length!==4)throw ho;return(9*(s[1]+s[2])-s[0]-s[3])/16}class Sc{constructor(t,n,o){if(o.length!==5)throw uo;if(n===t)throw kt;this.x1=t,this.x5=n,this.y=o,this.y3=o[2],this.a=o[1]-o[0],this.b=o[2]-o[1],this.c=o[3]-o[2],this.d=o[4]-o[3],this.e=this.b-this.a,this.f=this.c-this.b,this.g=this.d-this.c,this.h=this.f-this.e,this.j=this.g-this.f,this.k=this.j-this.h,this.xSum=n+t,this.xDiff=n-t,this.interpCoeff=[this.y3,(this.b+this.c)/2-(this.h+this.j)/12,this.f/2-this.k/24,(this.h+this.j)/12,this.k/24]}interpolateX(t){const n=(4*t-2*this.xSum)/this.xDiff;return this.interpolateN(n)}interpolateXStrict(t){const n=(4*t-2*this.xSum)/this.xDiff;return this.interpolateNStrict(n)}interpolateN(t){return a.horner(t,...this.interpCoeff)}interpolateNStrict(t){if(t<-1||t>1)throw Gn;return a.horner(t,...this.interpCoeff)}extremum(){const t=[6*(this.b+this.c)-this.h-this.j,0,3*(this.h+this.j),2*this.k],n=this.k-12*this.f;if(n===0)throw Qt;const[o,c]=tn(0,function(h){return a.horner(h,...t)/n});if(!c)throw Zt;if(o<-2||o>2)throw Qt;const e=.5*this.xSum+.25*this.xDiff*o,i=a.horner(o,...this.interpCoeff);return[e,i]}zero(t){let n;if(t){const i=this.k/24,h=(this.h+this.j)/12,r=this.f/2-i,u=(this.b+this.c)/2-h,l=[this.y3,u,r,h,i],M=[u,2*r,3*h,4*i];n=function(f){return f-a.horner(f,...l)/a.horner(f,...M)}}else{const i=[-24*this.y3,0,this.k-12*this.f,-2*(this.h+this.j),-this.k],h=12*(this.b+this.c)-2*(this.h+this.j);n=function(r){return a.horner(r,...i)/h}}const[o,c]=tn(0,n);if(!c)throw Zt;if(o>2||o<-2)throw Kn;return .5*this.xSum+.25*this.xDiff*o}}function qc(s,t){let n=0;return t.forEach((o,c)=>{const e=o[0];let i=1;t.forEach((h,r)=>{if(c!==r){const u=h[0];i*=(s-u)/(e-u)}}),n+=o[1]*i}),n}function vc(s){const t=new Array(s.length).fill(0),n=new Array(s.length).fill(0),o=s.length-1;for(let c=0;c<s.length;c++){const e=s[c][0]||s[c].x||0,i=s[c][1]||s[c].y||0;n[o]=1;let h=1,r=o;for(let u=0;u<s.length;u++)if(c!==u){const l=s[u][0]||s[u].x||0;n[r-1]=n[r]*-l;for(let M=r;M<o;M++)n[M]-=n[M+1]*l;r--,h*=e-l}n.forEach((u,l)=>{t[l]+=i*u/h})}return t}function Wc(s,t,n,o){const c=(n-t)/(o.length-1);if(c===0)throw kt;let e=Math.floor((s-t)/c);e<0?e=0:e>o.length-2&&(e=o.length-2);const i=o.slice(e,e+2),h=t+e*c;return i[0]+(o[1]-o[0])*(s-h)/c}const x0={errorNot3:ao,errorNot4:ho,errorNot5:uo,errorNoXRange:kt,errorNOutOfRange:Gn,errorNoExtremum:lo,errorExtremumOutside:Qt,errorZeroOutside:Kn,errorNoConverge:Zt,Len3:Mo,len3ForInterpolateX:xc,iterate:tn,len4Half:$c,Len5:Sc,lagrange:qc,lagrangePoly:vc,linear:Wc};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module angle
 */const{abs:_c,acos:Nc,asin:Rc,atan2:fo,cos:Wt,hypot:Xn,sin:mo,sqrt:kc,tan:_n}=Math;function po(s,t){const[n,o]=a.sincos(s.dec),[c,e]=a.sincos(t.dec),i=n*c+o*e*Wt(s.ra-t.ra);if(i<a.CosSmallAngle)return Nc(i);{const h=Wt((t.dec+s.dec)/2);return Xn((t.ra-s.ra)*h,t.dec-s.dec)}}function Vn(s,t,n,o,c){if(n.length!==3||o.length!==3)throw x0.errorNot3;const e=new Array(3);return n.forEach((r,u)=>{e[u]=po(n[u],o[u])}),new x0.Len3(s,t,e).extremum()[1]}function Bc(s,t,n,o){if(n.length!==3||o.length!==3)throw x0.ErrorNot3;const c=function(w,P){const[E,x]=a.sincos(w.dec),A=P.ra-w.ra,b=_n(A),_=_n(A/2),T=1/(1+E*E*b*_),z=mo(P.dec-w.dec),N=-T*(1-E/x*z)*x*b,O=T*(z+E*x*b*_);return[N,O]},e=new Array(3).fill(0),i=new Array(3).fill(0);n.forEach((w,P)=>{[e[P],i[P]]=c(n[P],o[P])});const h=new x0.Len3(-1,1,e),r=new x0.Len3(-1,1,i),u=(e[2]-e[0])/2,l=(i[2]-i[0])/2,M=e[0]+e[2]-2*e[1],f=i[0]+i[2]-2*i[1],g=u,D=l;let p=-(e[1]*g+i[1]*D)/(g*g+D*D),m=p,I,y;for(let w=0;w<10;w++){if(I=h.interpolateN(m),y=r.interpolateN(m),_c(p)<1e-5)return Xn(I,y);const P=u+m*M,E=l+m*f;p=-(I*P+y*E)/(P*P+E*E),m+=p}throw new Error("minSepRect: failure to converge")}function Nn(s){return .5*(1-Math.cos(s))}function Hc(s,t){return 2*Rc(kc(Nn(t.dec-s.dec)+Wt(s.dec)*Wt(t.dec)*Nn(t.ra-s.ra)))}function zc(s,t,n,o){return Vn(s,t,n,o)}function Fc(s,t){const[n,o]=a.sincos(s.dec),[c,e]=a.sincos(t.dec),i=Wt(t.ra-s.ra),h=o*c-n*e*i,r=e*mo(t.ra-s.ra),u=n*c+o*e*i;return fo(Xn(h,r),u)}function Oc(s,t,n,o){return Vn(s,t,n,o)}function Yc(s,t){const[n,o]=a.sincos(s.ra-t.ra),[c,e]=a.sincos(t.dec);return fo(n,e*_n(s.dec)-c*o)}const jc={sep:po,minSep:Vn,minSepRect:Bc,hav:Nn,sepHav:Hc,minSepHav:zc,sepPauwels:Fc,minSepPauwels:Oc,relativePosition:Yc};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module sexagesimal
 */class Qn{constructor(t,n,o,c){arguments.length===1?this.angle=Number(t):this.setDMS(!!t,n,o,c)}setDMS(t=!1,n=0,o=0,c=0){return this.angle=hn(t,n,o,c)*Math.PI/180,this}setAngle(t){return this.angle=t,this}rad(){return this.angle}deg(){return this.angle*180/Math.PI}toDMS(){return go(this.deg())}toString(t){let[n,o,c,e]=this.toDMS();return e=gt(e,t).toString().replace(/^0\./,"."),(n?"-":"")+(o+"°")+(c+"′")+(e+"″")}toDegString(t){let[n,o]=nn(this.deg());return o=gt(o,t).toString().replace(/^0\./,"."),n+"°"+o}}class Zn extends Qn{setDMS(t=!1,n=0,o=0,c=0){return this.angle=hn(t,n,o,c)*15*Math.PI/180,this}hour(){return this.angle*12/Math.PI}deg(){return this.hour()}toString(t){let[n,o,c,e]=this.toDMS();return e=gt(e,t).toString().replace(/^0\./,"."),(n?"-":"")+(o+"ʰ")+(c+"ᵐ")+(e+"ˢ")}}function hn(s,t,n,o){return o=((t*60+n)*60+o)/3600,s?-o:o}function go(s){const t=s<0;s=Math.abs(s);let[n,o]=nn(s%360);const[c,e]=nn(o*60);return o=gt(e*60),[t,n,c,o]}class Uc extends Zn{constructor(t=0,n=0,o=0){if(super(!1,t,n,o),[].slice.call(arguments).length===1)this.angle=t;else{const e=hn(!1,t,n,o)%24;this.angle=e*15*Math.PI/180}}hour(){return(24+this.angle*12/Math.PI%24)%24}}class Gc{constructor(t,n,o,c){typeof t=="number"?this.time=t:this.setHMS(t,n,o,c)}setHMS(t=!1,n=0,o=0,c=0){c+=(n*60+o)*60,t&&(c=-c),this.time=c}sec(){return this.time}min(){return this.time/60}hour(){return this.time/3600}day(){return this.time/3600/24}rad(){return this.time*Math.PI/12/3600}toHMS(){let t=this.time;const n=t<0;t=n?-t:t;const o=Math.trunc(t/3600);t=t-o*3600;const c=Math.trunc(t/60),e=t-c*60;return[n,o,c,e]}toString(t){const[n,o,c,e]=this.toHMS();let[i,h]=nn(e);return t===0?(i=gt(e,0),h=0):h=gt(h,t).toString().substr(1),(n?"-":"")+(o+"ʰ")+(c+"ᵐ")+(i+"ˢ")+(h||"")}}const Kc=s=>s*Math.PI/180,Xc=s=>s/60*Math.PI/180,Vc=s=>s/3600*Math.PI/180,Qc=s=>s*180/Math.PI,Zc=s=>s*3600*180/Math.PI,te=s=>s*240*180/Math.PI;function nn(s){const t=Math.trunc(s),n=Math.abs(s-t);return[t,n]}function gt(s,t=10){return parseFloat(s.toFixed(t))}const c0={Angle:Qn,HourAngle:Zn,DMSToDeg:hn,degToDMS:go,RA:Uc,Time:Gc,angleFromDeg:Kc,angleFromMin:Xc,angleFromSec:Vc,degFromAngle:Qc,secFromAngle:Zc,secFromHourAngle:te};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module globe
 */class Do{constructor(t,n){this.radius=t,this.flat=n}A(){return this.radius}B(){return this.radius*(1-this.flat)}eccentricity(){return Math.sqrt((2-this.flat)*this.flat)}parallaxConstants(t,n){const o=1-this.flat,c=Math.sin(Math.atan(o*Math.tan(t))),e=Math.cos(Math.atan(o*Math.tan(t))),i=Math.sin(t),h=Math.cos(t),r=n*.001/this.radius,u=c*o+r*i,l=e+r*h;return[u,l]}rho(t){return .9983271+.0016764*Math.cos(2*t)-35e-7*Math.cos(4*t)}radiusAtLatitude(t){const n=Math.sin(t),o=Math.cos(t);return this.A()*o/Math.sqrt(1-(2-this.flat)*this.flat*n*n)}radiusOfCurvature(t){const n=Math.sin(t),o=(2-this.flat)*this.flat;return this.A()*(1-o)/Math.pow(1-o*n*n,1.5)}distance(t,n){const[o,c]=Cn((t.lat+n.lat)/2),[e,i]=Cn((t.lat-n.lat)/2),[h,r]=Cn((t.lon-n.lon)/2),u=e*r+c*h,l=i*r+o*h,M=Math.atan(Math.sqrt(u/l)),f=Math.sqrt(u*l)/M,g=2*M*this.radius,D=(3*f-1)/(2*l),p=(3*f+1)/(2*u);return g*(1+this.flat*(D*o*i-p*c*e))}}const ne=new Do(6378.14,1/298.257),se=7292114992e-14;function oe(s){return s*Math.PI/180}function ce(s){return s*Math.PI/180}function ee(s){return(692.73*Math.sin(2*s)-1.16*Math.sin(4*s))*Math.PI/(180*3600)}class ie{constructor(t=0,n=0){this.lat=t,this.lon=n}}function re(s,t){const n=Math.sin(s.lat),o=Math.cos(s.lat),c=Math.sin(t.lat),e=Math.cos(t.lat);return n*c+o*e*Math.cos(s.lon-t.lon)}function ae(s){return 6371*s}function Cn(s){const t=Math.sin(s),n=Math.cos(s);return[t*t,n*n]}const wo={Ellipsoid:Do,Earth76:ne,RotationRate1996_5:se,oneDegreeOfLongitude:oe,oneDegreeOfLatitude:ce,geocentricLatitudeDifference:ee,Coord:ie,approxAngularDistance:re,approxLinearDistance:ae};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module coord
 */class un{constructor(t,n){typeof t=="object"&&(n=t.lat,t=t.lon),this.lon=t||0,this.lat=n||0}toEquatorial(t){const[n,o]=a.sincos(t),[c,e]=a.sincos(this.lat),[i,h]=a.sincos(this.lon);let r=Math.atan2(i*o-c/e*n,h);r<0&&(r+=2*Math.PI);const u=Math.asin(c*o+e*n*i);return new Y0(r,u)}}class Y0{constructor(t=0,n=0){this.ra=t,this.dec=n}toEcliptic(t){const[n,o]=a.sincos(t),[c,e]=a.sincos(this.ra),[i,h]=a.sincos(this.dec),r=Math.atan2(c*o+i/h*n,e),u=Math.asin(i*o-h*n*c);return new un(r,u)}toHorizontal(t,n){const o=new c0.Time(n).rad()-t.lon-this.ra,[c,e]=a.sincos(o),[i,h]=a.sincos(t.lat),[r,u]=a.sincos(this.dec),l=Math.atan2(c,e*i-r/u*h),M=Math.asin(i*r+h*u*e);return new yo(l,M)}toGalactic(){const[t,n]=a.sincos(_t.ra-this.ra),[o,c]=a.sincos(_t.dec),[e,i]=a.sincos(this.dec),h=Math.atan2(t,n*o-e/i*c),r=(ts+1.5*Math.PI-h)%(2*Math.PI),u=Math.asin(e*o+i*c*n);return new Po(r,u)}}class yo{constructor(t=0,n=0){this.az=t,this.alt=n}toEquatorial(t,n){const[o,c]=a.sincos(this.az),[e,i]=a.sincos(this.alt),[h,r]=a.sincos(t.lat),u=Math.atan2(o,c*h+e/i*r),l=a.pmod(new c0.Time(n).rad()-t.lon-u,2*Math.PI),M=Math.asin(h*e-r*i*c);return new Y0(l,M)}}class Po{constructor(t=0,n=0){this.lon=t,this.lat=n}toEquatorial(){const[t,n]=a.sincos(this.lon-ts-Math.PI/2),[o,c]=a.sincos(_t.dec),[e,i]=a.sincos(this.lat),h=Math.atan2(t,n*o-e/i*c),r=a.pmod(h+_t.ra-Math.PI,2*Math.PI),u=Math.asin(e*o+i*c*n);return new Y0(r,u)}}const bo=new Y0(new c0.RA(12,49,0).rad(),27.4*Math.PI/180),_t=bo,Ao=33*Math.PI/180,ts=Ao,$0={Ecliptic:un,Equatorial:Y0,Horizontal:yo,Galactic:Po,galacticNorth:bo,galacticNorth1950:_t,galacticLon0:Ao,galactic0Lon1950:ts};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module nutation
 */function Io(s){const t=a.J2000Century(s),n=a.horner(t,297.85036,445267.11148,-.0019142,1/189474)*Math.PI/180,o=a.horner(t,357.52772,35999.05034,-1603e-7,-1/3e5)*Math.PI/180,c=a.horner(t,134.96298,477198.867398,.0086972,1/56250)*Math.PI/180,e=a.horner(t,93.27191,483202.017538,-.0036825,1/327270)*Math.PI/180,i=a.horner(t,125.04452,-1934.136261,.0020708,1/45e4)*Math.PI/180;let h=0,r=0;for(let u=xs.length-1;u>=0;u--){const l=xs[u],M=l.d*n+l.m*o+l.n*c+l.f*e+l.ω*i,[f,g]=a.sincos(M);h+=f*(l.s0+l.s1*t),r+=g*(l.c0+l.c1*t)}return h*=1e-4/3600*(Math.PI/180),r*=1e-4/3600*(Math.PI/180),[h,r]}function he(s){const t=(s-a.J2000)/36525,n=(125.04452-1934.136261*t)*Math.PI/180,o=(280.4665+36000.7698*t)*Math.PI/180,c=(218.3165+481267.8813*t)*Math.PI/180,[e,i]=a.sincos(n),[h,r]=a.sincos(2*o),[u,l]=a.sincos(2*c),[M,f]=a.sincos(2*n),g=(-17.2*e-1.32*h-.23*u+.21*M)/3600*(Math.PI/180),D=(9.2*i+.57*r+.1*l-.09*f)/3600*(Math.PI/180);return[g,D]}function Eo(s){return a.horner(a.J2000Century(s),new c0.Angle(!1,23,26,21.448).rad(),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180))}function ue(s){return a.horner(a.J2000Century(s)*.01,new c0.Angle(!1,23,26,21.448).rad(),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180))}function le(s){const[t,n]=Io(s),o=Eo(s);return t*Math.cos(o+n)}const xs=function(){const s="d,m,n,f,ω,s0,s1,c0,c1".split(",");return[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]].map(n=>{const o={};return s.forEach((c,e)=>{o[c]=n[e]}),o})}(),r0={nutation:Io,approxNutation:he,meanObliquity:Eo,meanObliquityLaskar:ue,nutationInRA:le};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module elementequinox
 */let ln=class{constructor(t,n,o){typeof t=="object"&&(n=t.pode,o=t.peri,t=t.inc),this.inc=t||0,this.node=n||0,this.peri=o||0}};const xn=.0001139788,$s=.9999999935;function Me(s){const t=s.node-174.298782*Math.PI/180,[n,o]=a.sincos(s.inc),[c,e]=a.sincos(t),i=n*c,h=$s*n*e-xn*o,r=new ln;return r.inc=Math.asin(Math.hypot(i,h)),r.node=a.pmod(174.997194*Math.PI/180+Math.atan2(i,h),2*Math.PI),r.peri=a.pmod(s.peri+Math.atan2(-xn*c,$s*n-xn*o*e),2*Math.PI),r}const fe=4.50001688*Math.PI/180,de=5.19856209*Math.PI/180,me=.00651966*Math.PI/180;function pe(s){const t=de+s.node,[n,o]=a.sincos(s.inc),[c,e]=a.sincos(me),[i,h]=a.sincos(t),r=new ln;return r.inc=Math.acos(o*e-n*c*h),r.node=a.pmod(Math.atan2(n*i,o*c+n*e*h)-fe,2*Math.PI),r.peri=a.pmod(s.peri+Math.atan2(c*i,n*e+o*c*h),2*Math.PI),r}const ge={Elements:ln,reduceB1950ToJ2000:Me,reduceB1950FK4ToJ2000FK5:pe};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module precess
 */function To(s,t,n){const[o,c,e]=Lo(t,n),[i,h]=a.sincos(s.ra),r=o+c*i*Math.tan(s.dec),u=e*h,l=new Zn(!1,0,0,r).rad(),M=new Qn(!1,0,0,u).rad();return{ra:l,dec:M}}function Lo(s,t){const n=(t-s)*.01,o=3.07496+.00186*n,c=1.33621-57e-5*n,e=20.0431-.0085*n;return[o,c,e]}function De(s,t,n,o,c){const{ra:e,dec:i}=To(s,t,n),h=n-t,r=new Y0;return r.ra=s.ra+(e+o)*h,r.dec=s.dec+(i+c)*h,r}const ns=Math.PI/180,B=ns/3600,we=[2306.2181*B,1.39656*B,-139e-6*B],ye=[2306.2181*B,1.39656*B,-139e-6*B],Pe=[2004.3109*B,-.8533*B,-217e-6*B],be=[2306.2181*B,.30188*B,.017998*B],Ae=[2306.2181*B,1.09468*B,.018203*B],Ie=[2004.3109*B,-.42665*B,-.041833*B];class Jo{constructor(t,n){let o=be,c=Ae,e=Ie;if(t!==2e3){const r=(t-2e3)*.01;o=[a.horner(r,...we),.30188*B-344e-6*B*r,.017998*B],c=[a.horner(r,...ye),1.09468*B+66e-6*B*r,.018203*B],e=[a.horner(r,...Pe),-.42665*B-217e-6*B*r,-.041833*B]}const i=(n-t)*.01;this.ζ=a.horner(i,...o)*i,this.z=a.horner(i,...c)*i;const h=a.horner(i,...e)*i;this.sθ=Math.sin(h),this.cθ=Math.cos(h)}precess(t){const[n,o]=a.sincos(t.dec),[c,e]=a.sincos(t.ra+this.ζ),i=o*c,h=this.cθ*o*e-this.sθ*n,r=this.sθ*o*e+this.cθ*n,u=new Y0;return u.ra=Math.atan2(i,h)+this.z,r<a.CosSmallAngle?u.dec=Math.asin(r):u.dec=Math.acos(Math.hypot(i,h)),u}}function Ee(s,t,n,o,c){const e=new Jo(t,n),i=n-t,h=new Y0;return h.ra=s.ra+o*i,h.dec=s.dec+c*i,e.precess(h)}const Te=[47.0029*B,-.06603*B,598e-6*B],Le=[174.876384*ns,3289.4789*B,.60622*B],Je=[5029.0966*B,2.22226*B,-42e-6*B],Ce=[47.0029*B,-.03302*B,6e-5*B],xe=[174.876384*ns,-869.8089*B,.03536*B],$e=[5029.0966*B,1.11113*B,-6e-6*B];class Co{constructor(t,n){let o=Ce,c=xe,e=$e;if(t!==2e3){const r=(t-2e3)*.01;o=[a.horner(r,...Te),-.03302*B+598e-6*B*r,6e-5*B],c=[a.horner(r,...Le),-869.8089*B-.50491*B*r,.03536*B],e=[a.horner(r,...Je),1.11113*B-42e-6*B*r,-6e-6*B]}const i=(n-t)*.01;this.π=a.horner(i,...c),this.p=a.horner(i,...e)*i;const h=a.horner(i,...o)*i;this.sη=Math.sin(h),this.cη=Math.cos(h)}precess(t){const[n,o]=a.sincos(t.lat),[c,e]=a.sincos(this.π-t.lon),i=this.cη*o*c-this.sη*n,h=o*e,r=this.cη*n+this.sη*o*c,u=new un(this.p+this.π-Math.atan2(i,h));return r<a.CosSmallAngle?u.lat=Math.asin(r):u.lat=Math.acos(Math.hypot(i,h)),u}reduceElements(t){const n=this.π+this.p,[o,c]=a.sincos(t.inc),[e,i]=a.sincos(t.node-this.π),h=new ln;return h.inc=Math.acos(c*this.cη+o*this.sη*i),h.node=Math.atan2(o*e,this.cη*o*i-this.sη*c)+n,h.peri=Math.atan2(-this.sη*e,o*this.cη-c*this.sη*i)+t.peri,h}}function Se(s,t,n,o,c){const e=new Co(t,n);if(o&&c&&(o.rad()!==0||c.rad()!==0)){const{lon:i,lat:h}=xo(o.rad(),c.rad(),t,s),r=n-t;s.lon+=i*r,s.lat+=h*r}return e.precess(s)}function xo(s,t,n,o){const c=r0.meanObliquity(a.JulianYearToJDE(n)),[e,i]=a.sincos(c),{ra:h,dec:r}=o.toEquatorial(c),[u,l]=a.sincos(h),[M,f]=a.sincos(r),g=Math.cos(o.lat),D=(t*e*l+s*f*(i*f+e*M*u))/(g*g),p=(t*(i*f+e*M*u)-s*e*l*f)/g;return new un(D,p)}function qe(s,t,n,o,c,e,i){const[h,r]=a.sincos(s.ra),[u,l]=a.sincos(s.dec),M=o*l*r,f=o*l*h,g=o*u,D=c/o,p=g*i.rad(),m=M*D-p*r-f*e.rad(),I=f*D-p*h+M*e.rad(),y=g*D+o*i.rad()*l,w=n-t,P=M+w*m,E=f+w*I,x=g+w*y,A=new Y0;return A.ra=Math.atan2(E,P),A.dec=Math.atan2(x,Math.hypot(P,E)),A}const Dt={approxAnnualPrecession:To,mn:Lo,approxPosition:De,Precessor:Jo,position:Ee,EclipticPrecessor:Co,eclipticPosition:Se,properMotion:xo,properMotion3D:qe};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module planetposition
 */function Mt(s,t){const n=[];return Object.keys(t).forEach(c=>{n[c]=0;let e=t[c].length-1;for(e;e>=0;e--){const i={a:t[c][e][0],b:t[c][e][1],c:t[c][e][2]};n[c]+=i.a*Math.cos(i.b+i.c*s)}}),a.horner(s,...n)}class ve{constructor(t){if(typeof t!="object")throw new TypeError("need planet vsop87 data");this.name=t.name,this.type=t.type||"B",this.series=t}position2000(t){const o=a.J2000Century(t)*.1,c=a.pmod(Mt(o,this.series.L),2*Math.PI),e=Mt(o,this.series.B),i=Mt(o,this.series.R);switch(this.type){case"B":return new a.Coord(c,e,i);case"D":{const h=new $0.Ecliptic(c,e),r=a.JDEToJulianYear(t),l=Dt.eclipticPosition(h,r,2e3);return new a.Coord(l.lon,l.lat,i)}}}position(t){const o=a.J2000Century(t)*.1,c=a.pmod(Mt(o,this.series.L),2*Math.PI),e=Mt(o,this.series.B),i=Mt(o,this.series.R);switch(this.type){case"B":{const h=new $0.Ecliptic(c,e),r=2e3,u=a.JDEToJulianYear(t),l=Dt.eclipticPosition(h,r,u);return new a.Coord(l.lon,l.lat,i)}case"D":return new a.Coord(c,e,i)}}}function We(s,t,n){const o=a.J2000Century(n),c=s-c0.angleFromDeg((1.397+31e-5*o)*o),[e,i]=a.sincos(c),h=s+c0.angleFromSec(-.09033+.03916*(i+e)*Math.tan(t)),r=t+c0.angleFromSec(.03916*(i-e));return new a.Coord(h,r)}const O0={Planet:ve,toFK5:We};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module solar
 */function wt(s){const t=a.horner(s,280.46646,36000.76983,3032e-7)*Math.PI/180,n=$o(s),o=(a.horner(s,1.914602,-.004817,-14e-6)*Math.sin(n)+(.019993-101e-6*s)*Math.sin(2*n)+289e-6*Math.sin(3*n))*Math.PI/180,c=a.pmod(t+o,2*Math.PI),e=a.pmod(n+o,2*Math.PI);return{lon:c,ano:e}}function $o(s){return a.horner(s,357.52911,35999.05029,-1537e-7)*Math.PI/180}function So(s){return a.horner(s,.016708634,-42037e-9,-1267e-10)}function _e(s){const{lon:t,ano:n}=wt(s),o=So(s);return 1.000001018*(1-o*o)/(1+o*Math.cos(n))}function qo(s){const t=vo(s),{lon:n,ano:o}=wt(s);return n-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(t)}function vo(s){return 125.04*Math.PI/180-1934.136*Math.PI/180*s}function Ne(s){let{lon:t,ano:n}=wt(s);return t-=.01397*Math.PI/180*s*100,{lon:t,ano:n}}function Re(s){const{lon:t,ano:n}=wt(a.J2000Century(s)),o=r0.meanObliquity(s),[c,e]=a.sincos(t),[i,h]=a.sincos(o),r=Math.atan2(h*c,e),u=i*c;return new a.Coord(r,u)}function ke(s){const t=a.J2000Century(s),n=qo(t),o=r0.meanObliquity(s),[c,e]=a.sincos(n),[i,h]=a.sincos(o+.00256*Math.PI/180*Math.cos(vo(t))),r=Math.atan2(h*c,e),u=Math.asin(i*c);return new a.Coord(r,u)}function ss(s,t){let{lon:n,lat:o,range:c}=s.position(t);const e=n+Math.PI,i=a.horner(a.J2000Century(t),e,-1.397*Math.PI/180,-31e-5*Math.PI/180),[h,r]=a.sincos(i),u=.03916/3600*Math.PI/180*(r-h);return n=a.pmod(e-.09033/3600*Math.PI/180,2*Math.PI),o=u-o,new a.Coord(n,o,c)}function Be(s,t){let{lon:n,lat:o,range:c}=ss(s,t);const e=r0.nutation(t)[0],i=os(c);return n=n+e+i,new a.Coord(n,o,c)}function He(s,t){const{lon:n,lat:o,range:c}=ss(s,t),[e,i]=r0.nutation(t),h=os(c),r=n+e+h,u=r0.meanObliquity(t)+i,{ra:l,dec:M}=new $0.Ecliptic(r,o).toEquatorial(u);return new an(l,M,c)}function os(s){return-20.4898/3600*Math.PI/180/s}const C0={trueLongitude:wt,true:wt,meanAnomaly:$o,eccentricity:So,radius:_e,apparentLongitude:qo,true2000:Ne,trueEquatorial:Re,apparentEquatorial:ke,trueVSOP87:ss,apparentVSOP87:Be,apparentEquatorialVSOP87:He,aberration:os};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module apparent
 */const{cos:ze,tan:Wo}=Math;function cs(s,t,n){const o=r0.meanObliquity(n),[c,e]=a.sincos(o),[i,h]=r0.nutation(n),[r,u]=a.sincos(s),l=Wo(t),M=(e+c*r*l)*i-u*l*h,f=c*u*i+r*h;return[M,f]}const sn=20.49552*Math.PI/180/3600;function es(s){return a.horner(s,102.93735,1.71946,46e-5)*Math.PI/180}function Fe(s,t,n){const o=a.J2000Century(n),{lon:c,ano:e}=C0.trueLongitude(o),i=C0.eccentricity(o),h=es(o),[r,u]=a.sincos(t),[l,M]=a.sincos(c-s),[f,g]=a.sincos(h-s),D=sn*(i*g-M)/u,p=-sn*r*(l-i*f);return[D,p]}function _o(s,t,n){const o=r0.meanObliquity(n),c=a.J2000Century(n),{lon:e,ano:i}=C0.trueLongitude(c),h=C0.eccentricity(c),r=es(c),[u,l]=a.sincos(s),[M,f]=a.sincos(t),[g,D]=a.sincos(e),[p,m]=a.sincos(r),I=ze(o),y=l*I,w=sn*(h*(y*m+u*p)-(y*D+u*g))/f,P=I*(Wo(o)*f-u*M),E=l*M,x=sn*(h*(m*P+p*E)-(D*P+g*E));return[w,x]}function Oe(s,t,n,o,c){const e=Dt.position(s,t,n,o,c),i=a.JulianYearToJDE(n),[h,r]=cs(e.ra,e.dec,i),[u,l]=_o(e.ra,e.dec,i);return e.ra+=h+u,e.dec+=r+l,e}function No(s,t,n){const o=a.J2000Century(n),c={T:o,L2:3.1761467+1021.3285546*o,L3:1.7534703+628.3075849*o,L4:6.2034809+334.0612431*o,L5:.5995465+52.9690965*o,L6:.8740168+21.3299095*o,L7:5.4812939+7.4781599*o,L8:5.3118863+3.8133036*o,Lp:3.8103444+8399.6847337*o,D:5.1984667+7771.3771486*o,Mp:2.3555559+8328.6914289*o,F:1.6279052+8433.4661601*o};let e=0,i=0,h=0;for(let f=35;f>=0;f--){const[g,D,p]=Ye[f](c);e+=g,i+=D,h+=p}const[r,u]=a.sincos(s),[l,M]=a.sincos(t);return[(i*u-e*r)/(Ss*M),-((e*u+i*r)*l-h*M)/Ss]}const Ss=17314463350,Ye=[function(s){const[t,n]=a.sincos(s.L3);return[(-1719914-2*s.T)*t-25*n,(25-13*s.T)*t+(1578089+156*s.T)*n,(10+32*s.T)*t+(684185-358*s.T)*n]},function(s){const[t,n]=a.sincos(2*s.L3);return[(6434+141*s.T)*t+(28007-107*s.T)*n,(25697-95*s.T)*t+(-5904-130*s.T)*n,(11141-48*s.T)*t+(-2559-55*s.T)*n]},function(s){const[t,n]=a.sincos(s.L5);return[715*t,6*t-657*n,-15*t-282*n]},function(s){const[t,n]=a.sincos(s.Lp);return[715*t,-656*n,-285*n]},function(s){const[t,n]=a.sincos(3*s.L3);return[(486-5*s.T)*t+(-236-4*s.T)*n,(-216-4*s.T)*t+(-446+5*s.T)*n,-94*t-193*n]},function(s){const[t,n]=a.sincos(s.L6);return[159*t,2*t-147*n,-6*t-61*n]},function(s){const t=Math.cos(s.F);return[0,26*t,-59*t]},function(s){const[t,n]=a.sincos(s.Lp+s.Mp);return[39*t,-36*n,-16*n]},function(s){const[t,n]=a.sincos(2*s.L5);return[33*t-10*n,-9*t-30*n,-5*t-13*n]},function(s){const[t,n]=a.sincos(2*s.L3-s.L5);return[31*t+n,t-28*n,-12*n]},function(s){const[t,n]=a.sincos(3*s.L3-8*s.L4+3*s.L5);return[8*t-28*n,25*t+8*n,11*t+3*n]},function(s){const[t,n]=a.sincos(5*s.L3-8*s.L4+3*s.L5);return[8*t-28*n,-25*t-8*n,-11*t+-3*n]},function(s){const[t,n]=a.sincos(2*s.L2-s.L3);return[21*t,-19*n,-8*n]},function(s){const[t,n]=a.sincos(s.L2);return[-19*t,17*n,8*n]},function(s){const[t,n]=a.sincos(s.L7);return[17*t,-16*n,-7*n]},function(s){const[t,n]=a.sincos(s.L3-2*s.L5);return[16*t,15*n,t+7*n]},function(s){const[t,n]=a.sincos(s.L8);return[16*t,t-15*n,-3*t-6*n]},function(s){const[t,n]=a.sincos(s.L3+s.L5);return[11*t-n,-t-10*n,-t-5*n]},function(s){const[t,n]=a.sincos(2*s.L2-2*s.L3);return[-11*n,-10*t,-4*t]},function(s){const[t,n]=a.sincos(s.L3-s.L5);return[-11*t-2*n,-2*t+9*n,-t+4*n]},function(s){const[t,n]=a.sincos(4*s.L3);return[-7*t-8*n,-8*t+6*n,-3*t+3*n]},function(s){const[t,n]=a.sincos(3*s.L3-2*s.L5);return[-10*t,9*n,4*n]},function(s){const[t,n]=a.sincos(s.L2-2*s.L3);return[-9*t,-9*n,-4*n]},function(s){const[t,n]=a.sincos(2*s.L2-3*s.L3);return[-9*t,-8*n,-4*n]},function(s){const[t,n]=a.sincos(2*s.L6);return[-9*n,-8*t,-3*t]},function(s){const[t,n]=a.sincos(2*s.L2-4*s.L3);return[-9*n,8*t,3*t]},function(s){const[t,n]=a.sincos(3*s.L3-2*s.L4);return[8*t,-8*n,-3*n]},function(s){const[t,n]=a.sincos(s.Lp+2*s.D-s.Mp);return[8*t,-7*n,-3*n]},function(s){const[t,n]=a.sincos(8*s.L2-12*s.L3);return[-4*t-7*n,-6*t+4*n,-3*t+2*n]},function(s){const[t,n]=a.sincos(8*s.L2-14*s.L3);return[-4*t-7*n,6*t-4*n,3*t-2*n]},function(s){const[t,n]=a.sincos(2*s.L4);return[-6*t-5*n,-4*t+5*n,-2*t+2*n]},function(s){const[t,n]=a.sincos(3*s.L2-4*s.L3);return[-t-n,-2*t-7*n,t-4*n]},function(s){const[t,n]=a.sincos(2*s.L3-2*s.L5);return[4*t-6*n,-5*t-4*n,-2*t-2*n]},function(s){const[t,n]=a.sincos(3*s.L2-3*s.L3);return[-7*n,-6*t,-3*t]},function(s){const[t,n]=a.sincos(2*s.L3-2*s.L4);return[5*t-5*n,-4*t-5*n,-2*t-2*n]},function(s){const[t,n]=a.sincos(s.Lp-2*s.D);return[5*t,-5*n,-2*n]}];function je(s,t,n,o){const c=t-2e3;let e=new $0.Equatorial;e.ra=s.ra+n.rad()*c,e.dec=s.dec+o.rad()*c;const i=a.JulianYearToJDE(t),[h,r]=No(e.ra,e.dec,i);e.ra+=h,e.dec+=r,e=Dt.position(e,2e3,t,0,0);const[u,l]=cs(e.ra,e.dec,i);return e.ra+=u,e.dec+=l,e}const Ro={nutation:cs,perihelion:es,eclipticAberration:Fe,aberration:_o,position:Oe,aberrationRonVondrak:No,positionRonVondrak:je};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module apsis
 */const{sin:C,cos:v}=Math,at=1/1325.55,S0=Math.PI/180,ko=6378.137,Ue=1738.1,Mn=function(s){return a.horner(s,24515346698e-4,27.55454989/at,-6691e-7,-1098e-9,52e-10)},is=function(s,t){const n=(s-1999.97)*13.2555;return Math.floor(n-t+.5)+t};function Ge(s){return Mn(is(s,0)*at)}function Ke(s){const t=new fn(s,0);return Mn(t.T)+t.perigeeCorr()}function Xe(s){return Mn(is(s,.5)*at)}function Ve(s){const t=new fn(s,.5);return Mn(t.T)+t.apogeeCorr()}function Qe(s){return new fn(s,.5).apogeeParallax()}function Ze(s){return new fn(s,0).perigeeParallax()}function t2(s){return ko/C(s)}class fn{constructor(t,n){return this.k=is(t,n),this.T=this.k*at,this.D=a.horner(this.T,171.9179*S0,335.9106046*S0/at,-.0100383*S0,-1156e-8*S0,55e-9*S0),this.M=a.horner(this.T,347.3477*S0,27.1577721*S0/at,-813e-6*S0,-1e-6*S0),this.F=a.horner(this.T,316.6109*S0,364.5287911*S0/at,-.0125053*S0,-148e-7*S0),this}perigeeCorr(){const t=this;return-1.6769*C(2*t.D)+.4589*C(4*t.D)+-.1856*C(6*t.D)+.0883*C(8*t.D)+(-.0773+19e-5*t.T)*C(2*t.D-t.M)+(.0502-13e-5*t.T)*C(t.M)+-.046*C(10*t.D)+(.0422-11e-5*t.T)*C(4*t.D-t.M)+-.0256*C(6*t.D-t.M)+.0253*C(12*t.D)+.0237*C(t.D)+.0162*C(8*t.D-t.M)+-.0145*C(14*t.D)+.0129*C(2*t.F)+-.0112*C(3*t.D)+-.0104*C(10*t.D-t.M)+.0086*C(16*t.D)+.0069*C(12*t.D-t.M)+.0066*C(5*t.D)+-.0053*C(2*(t.D+t.F))+-.0052*C(18*t.D)+-.0046*C(14*t.D-t.M)+-.0041*C(7*t.D)+.004*C(2*t.D+t.M)+.0032*C(20*t.D)+-.0032*C(t.D+t.M)+.0031*C(16*t.D-t.M)+-.0029*C(4*t.D+t.M)+.0027*C(9*t.D)+.0027*C(4*t.D+2*t.F)+-.0027*C(2*(t.D-t.M))+.0024*C(4*t.D-2*t.M)+-.0021*C(6*t.D-2*t.M)+-.0021*C(22*t.D)+-.0021*C(18*t.D-t.M)+.0019*C(6*t.D+t.M)+-.0018*C(11*t.D)+-.0014*C(8*t.D+t.M)+-.0014*C(4*t.D-2*t.F)+-.0014*C(6*t.D+2*t.F)+.0014*C(3*t.D+t.M)+-.0014*C(5*t.D+t.M)+.0013*C(13*t.D)+.0013*C(20*t.D-t.M)+.0011*C(3*t.D+2*t.M)+-.0011*C(2*(2*t.D+t.F-t.M))+-.001*C(t.D+2*t.M)+-9e-4*C(22*t.D-t.M)+-8e-4*C(4*t.F)+8e-4*C(6*t.D-2*t.F)+8e-4*C(2*(t.D-t.F)+t.M)+7e-4*C(2*t.M)+7e-4*C(2*t.F-t.M)+7e-4*C(2*t.D+4*t.F)+-6e-4*C(2*(t.F-t.M))+-6e-4*C(2*(t.D-t.F+t.M))+6e-4*C(24*t.D)+5e-4*C(4*(t.D-t.F))+5e-4*C(2*(t.D+t.M))+-4e-4*C(t.D-t.M)}apogeeCorr(){const t=this;return .4392*C(2*t.D)+.0684*C(4*t.D)+(.0456-11e-5*t.T)*C(t.M)+(.0426-11e-5*t.T)*C(2*t.D-t.M)+.0212*C(2*t.F)+-.0189*C(t.D)+.0144*C(6*t.D)+.0113*C(4*t.D-t.M)+.0047*C(2*(t.D+t.F))+.0036*C(t.D+t.M)+.0035*C(8*t.D)+.0034*C(6*t.D-t.M)+-.0034*C(2*(t.D-t.F))+.0022*C(2*(t.D-t.M))+-.0017*C(3*t.D)+.0013*C(4*t.D+2*t.F)+.0011*C(8*t.D-t.M)+.001*C(4*t.D-2*t.M)+9e-4*C(10*t.D)+7e-4*C(3*t.D+t.M)+6e-4*C(2*t.M)+5e-4*C(2*t.D+t.M)+5e-4*C(2*(t.D+t.M))+4e-4*C(6*t.D+2*t.F)+4e-4*C(6*t.D-2*t.M)+4e-4*C(10*t.D-t.M)+-4e-4*C(5*t.D)+-4e-4*C(4*t.D-2*t.F)+3e-4*C(2*t.F+t.M)+3e-4*C(12*t.D)+3e-4*C(2*t.D+2*t.F-t.M)+-3e-4*C(t.D-t.M)}apogeeParallax(){const t=Math.PI/180/3600,n=this;return 3245.251*t+-9.147*t*v(2*n.D)+-.841*t*v(n.D)+.697*t*v(2*n.F)+(-.656*t+.0016*t*n.T)*v(n.M)+.355*t*v(4*n.D)+.159*t*v(2*n.D-n.M)+.127*t*v(n.D+n.M)+.065*t*v(4*n.D-n.M)+.052*t*v(6*n.D)+.043*t*v(2*n.D+n.M)+.031*t*v(2*(n.D+n.F))+-.023*t*v(2*(n.D-n.F))+.022*t*v(2*(n.D-n.M))+.019*t*v(2*(n.D+n.M))+-.016*t*v(2*n.M)+.014*t*v(6*n.D-n.M)+.01*t*v(8*n.D)}perigeeParallax(){const t=Math.PI/180/3600,n=this;return 3629.215*t+63.224*t*v(2*n.D)+-6.99*t*v(4*n.D)+(2.834*t-.0071*n.T*t)*v(2*n.D-n.M)+1.927*t*v(6*n.D)+-1.263*t*v(n.D)+-.702*t*v(8*n.D)+(.696*t-.0017*n.T*t)*v(n.M)+-.69*t*v(2*n.F)+(-.629*t+.0016*n.T*t)*v(4*n.D-n.M)+-.392*t*v(2*(n.D-n.F))+.297*t*v(10*n.D)+.26*t*v(6*n.D-n.M)+.201*t*v(3*n.D)+-.161*t*v(2*n.D+n.M)+.157*t*v(n.D+n.M)+-.138*t*v(12*n.D)+-.127*t*v(8*n.D-n.M)+.104*t*v(2*(n.D+n.F))+.104*t*v(2*(n.D-n.M))+-.079*t*v(5*n.D)+.068*t*v(14*n.D)+.067*t*v(10*n.D-n.M)+.054*t*v(4*n.D+n.M)+-.038*t*v(12*n.D-n.M)+-.038*t*v(4*n.D-2*n.M)+.037*t*v(7*n.D)+-.037*t*v(4*n.D+2*n.F)+-.035*t*v(16*n.D)+-.03*t*v(3*n.D+n.M)+.029*t*v(n.D-n.M)+-.025*t*v(6*n.D+n.M)+.023*t*v(2*n.M)+.023*t*v(14*n.D-n.M)+-.023*t*v(2*(n.D+n.M))+.022*t*v(6*n.D-2*n.M)+-.021*t*v(2*n.D-2*n.F-n.M)+-.02*t*v(9*n.D)+.019*t*v(18*n.D)+.017*t*v(6*n.D+2*n.F)+.014*t*v(2*n.F-n.M)+-.014*t*v(16*n.D-n.M)+.013*t*v(4*n.D-2*n.F)+.012*t*v(8*n.D+n.M)+.011*t*v(11*n.D)+.01*t*v(5*n.D+n.M)+-.01*t*v(20*n.D)}}const n2={EARTH_RADIUS:ko,MOON_RADIUS:Ue,meanPerigee:Ge,perigee:Ke,meanApogee:Xe,apogee:Ve,apogeeParallax:Qe,perigeeParallax:Ze,distance:t2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module binary
 */const{atan:s2,atan2:o2,cos:Rn,sqrt:on,tan:c2}=Math;function e2(s,t,n){const o=2*Math.PI/n;return a.pmod(o*(s-t),2*Math.PI)}function i2(s,t,n,o,c,e){const i=s*(1-t*Rn(e)),h=2*s2(on((1+t)/(1-t))*c2(e/2)),[r,u]=a.sincos(h+c),l=Rn(n),M=r*l;let f=o2(M,u)+o;f<0&&(f+=2*Math.PI);const g=i*on(M*M+u*u);return[f,g]}function r2(s,t,n){const o=Rn(t),[c,e]=a.sincos(n),i=(1-s*s*e*e)*o*o,h=s*s*c*e*o,r=1-s*s*c*c,u=i-r,l=on(u*u+4*h*h);return on(2*l/(i+r+l))}const a2={meanAnomaly:e2,position:i2,apparentEccentricity:r2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module conjunction
 */function h2(s,t,n,o){if(n.length!==5||o.length!==5)throw new Error("Five rows required in ephemerides");const c=new Array(5),e=new Array(5);return n.forEach((i,h)=>{c[h]=o[h].ra-n[h].ra,e[h]=o[h].dec-n[h].dec}),Bo(s,t,c,e)}function u2(s,t,n,o){if(o.length!==5)throw new Error("Five rows required in ephemerides");const c=new Array(5),e=new Array(5);return o.forEach((i,h)=>{c[h]=o[h].ra-n.ra,e[h]=o[h].dec-n.dec}),Bo(s,t,c,e)}const Bo=function(s,t,n,o){let c=new x0.Len5(s,t,n);const e=c.zero(!0);c=new x0.Len5(s,t,o);const i=c.interpolateXStrict(e);return[e,i]},l2={planetary:h2,stellar:u2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module circle
 */function M2(s,t,n){const o=Math.cos(s.dec),c=Math.cos(t.dec),e=Math.cos(n.dec);let i=2*Math.asin(Math.sqrt(ft(t.dec-s.dec)+o*c*ft(t.ra-s.ra))),h=2*Math.asin(Math.sqrt(ft(n.dec-t.dec)+c*e*ft(n.ra-t.ra))),r=2*Math.asin(Math.sqrt(ft(s.dec-n.dec)+e*o*ft(s.ra-n.ra)));return h>i&&([i,h]=qs(h,i)),r>i&&([i,r]=qs(r,i)),i*i>=h*h+r*r?[i,!0]:[2*i*h*r/Math.sqrt((i+h+r)*(i+h-r)*(h+r-i)*(i+r-h)),!1]}const qs=function(s,t){return[s,t]},ft=function(s){return .5*(1-Math.cos(s))},f2={smallest:M2},it={historic:{table:[44,43,43,41,40,39,38,37,37,36,36,36,37,37,38,37,36,36,35,35,34,33,33,32,32,31,31,30,30,29,29,29,29,29,28,28,27,27,26,26,25,25,25,26,26,26,26,25,25,25,24,24,24,24,24,24,24,24,24,24,23,23,23,23,22,22,22,22,22,21,21,21,21,21,21,21,21,20,20,20,20,20,20,20,20,20,21,21,21,20,20,20,20,20,19,19,19,19,19,20,20,20,20,19,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21.1,21,21,21,20.9,20.8,20.7,20.6,20.4,20.2,20,19.7,19.4,19.1,18.7,18.3,17.8,17.4,17,16.8,16.6,16.4,16.1,15.9,15.7,15.5,15.3,15,14.7,14.5,14.3,14.2,14.1,14.1,14.1,13.9,13.7,13.6,13.5,13.5,13.5,13.5,13.4,13.4,13.4,13.4,13.3,13.3,13.2,13.2,13.2,13.1,13.1,13.1,13,13.2,13.3,13.4,13.5,13.6,13.7,13.8,13.9,14,14,14.1,14.1,14.1,14.1,14.2,14.3,14.4,14.4,14.5,14.6,14.6,14.7,14.7,14.7,14.8,14.8,14.9,14.9,15,15,15.1,15.2,15.3,15.4,15.5,15.6,15.6,15.6,15.8,15.9,15.9,15.9,15.8,15.7,15.8,15.7,15.7,15.7,15.8,15.9,16.1,16.1,16,15.9,15.9,15.7,15.4,15.3,15.4,15.5,15.6,15.6,15.6,15.6,15.6,15.6,15.6,15.5,15.5,15.4,15.3,15.2,15.1,14.9,14.8,14.6,14.4,14.3,14.2,14.1,14.2,14.2,13.9,13.7,13.5,13.3,13.1,13,13.2,13.2,13.1,13.1,13.2,13.3,13.5,13.5,13.4,13.2,13.2,13.1,13.1,13,12.8,12.6,12.7,12.6,12.3,12,11.9,11.8,11.6,11.4,11.2,11.1,11.1,11.1,11.1,11.1,11.2,11.1,11.1,11.2,11.4,11.5,11.3,11.2,11.4,11.7,11.9,11.9,11.9,11.8,11.7,11.8,11.8,11.8,11.7,11.6,11.6,11.5,11.5,11.4,11.4,11.3,11.3,11.13,11.16,10.94,10.72,10.29,10.04,9.94,9.91,9.88,9.86,9.72,9.67,9.66,9.64,9.51,9.4,9.21,9,8.6,8.29,7.95,7.73,7.59,7.49,7.36,7.26,7.1,7,6.89,6.82,6.73,6.64,6.39,6.28,6.25,6.27,6.25,6.27,6.22,6.24,6.22,6.27,6.3,6.36,6.35,6.37,6.32,6.33,6.33,6.37,6.37,6.41,6.4,6.44,6.46,6.51,6.48,6.51,6.53,6.58,6.55,6.61,6.69,6.8,6.84,6.94,7.03,7.13,7.15,7.22,7.26,7.3,7.23,7.22,7.21,7.2,6.99,6.98,7.19,7.36,7.35,7.39,7.41,7.45,7.36,7.18,6.95,6.72,6.45,6.24,5.92,5.59,5.15,4.67,4.11,3.52,2.94,2.47,1.97,1.52,1.04,.6,.11,-.34,-.82,-1.25,-1.7,-2.08,-2.48,-2.82,-3.19,-3.5,-3.84,-4.14,-4.43,-4.59,-4.79,-4.92,-5.09,-5.24,-5.36,-5.34,-5.37,-5.32,-5.34,-5.33,-5.4,-5.47,-5.58,-5.66,-5.74,-5.68,-5.69,-5.65,-5.67,-5.68,-5.73,-5.72,-5.78,-5.79,-5.86,-5.89,-6.01,-6.13,-6.28,-6.41,-6.53,-6.49,-6.5,-6.45,-6.41,-6.26,-6.11,-5.9,-5.63,-5.13,-4.68,-4.19,-3.72,-3.21,-2.7,-2.09,-1.48,-.75,-.08,.62,1.26,1.95,2.59,3.28,3.92,4.61,5.2,5.73,6.29,7,7.68,8.45,9.13,9.78,10.38,10.99,11.64,12.47,13.23,14,14.69,15.38,16,16.64,17.19,17.72,18.19,18.67,19.13,19.69,20.14,20.54,20.86,21.14,21.41,21.78,22.06,22.3,22.51,22.79,23.01,23.29,23.46,23.55,23.63,23.8,23.95,24.25,24.39,24.42,24.34,24.22,24.1,24.08,24.02,24.04,23.98,23.91,23.89,23.95,23.93,23.92,23.88,23.94,23.91,23.82,23.76,23.87,23.91,23.95,23.96,24,24.04,24.2,24.35,24.61,24.82,25.09,25.3,25.56,25.77,26.05,26.27,26.54,26.76,27.04,27.27,27.55,27.77,28.03,28.25,28.5,28.7,28.95,29.15,29.38,29.57,29.8,29.97,30.19,30.36,30.57,30.72,30.93,31.07,31.24,31.349,31.516,31.677,31.923,32.166,32.449,32.671,32.919,33.15,33.397,33.584,33.804,33.992,34.24,34.466,34.731,35.03,35.4,35.738,36.147,36.546,36.995,37.429,37.879,38.291,38.753,39.204,39.707,40.182,40.706,41.17,41.686,42.227,42.825,43.373,43.959,44.486,44.997,45.477,45.983,46.458,46.997,47.521,48.034,48.535,49.099,49.589,50.102,50.54,50.975,51.382,51.81,52.168,52.572,52.957,53.434,53.789,54.087],first:1657,last:1984.5},data:{table:[43.4724372,43.5648351,43.6736863,43.7782156,43.8763273,43.9562443,44.0314956,44.1131788,44.1982187,44.2951747,44.3936471,44.4840562,44.5646335,44.6425099,44.7385767,44.8370135,44.9302138,44.9986146,45.0583549,45.1283911,45.2063835,45.2980068,45.3897017,45.476138,45.5632485,45.6450189,45.7374593,45.8283721,45.9132976,45.9819705,46.0407484,46.1067084,46.1825041,46.2788561,46.3713351,46.4567207,46.544486,46.6310899,46.7302231,46.8283588,46.9247443,46.9969757,47.0709148,47.1450515,47.2361542,47.3413241,47.4319364,47.5213815,47.6049313,47.6837388,47.7781381,47.8770756,47.9687104,48.0348257,48.0942021,48.1608205,48.2460028,48.3438529,48.4355405,48.5344163,48.6324506,48.7293718,48.8365414,48.9353232,49.0318781,49.1013205,49.1590844,49.2285534,49.3069683,49.4017939,49.4945263,49.5861495,49.6804907,49.7602264,49.8555805,49.9489224,50.0346777,50.1018531,50.1621723,50.2260014,50.2967905,50.3831254,50.4598772,50.5387068,50.6160484,50.6865941,50.7658362,50.8453698,50.918672,50.9761148,51.0278017,51.084323,51.1537928,51.2318645,51.306308,51.3807849,51.4526292,51.5160394,51.5985479,51.680924,51.7572854,51.8133335,51.8532385,51.9014358,51.9603433,52.0328072,52.0984957,52.1667826,52.2316418,52.2938376,52.3679897,52.4465221,52.5179552,52.5751485,52.6178012,52.666816,52.7340036,52.8055792,52.8792189,52.9564838,53.0444971,53.126769,53.2196749,53.3024139,53.3746645,53.4335399,53.4778015,53.5299937,53.5845392,53.6522628,53.7255844,53.7882418,53.8366625,53.8829665,53.9442904,54.0042478,54.0536342,54.085644,54.1084122,54.1462942,54.1913988,54.2452023,54.2957622,54.3427024,54.3910864,54.4319877,54.4897699,54.545636,54.597741,54.6354962,54.6532352,54.677594,54.7173643,54.7740957,54.8253023,54.8712512,54.916146,54.9580535,54.9997186,55.047571,55.0911778,55.1132386,55.132774,55.1532423,55.1898003,55.2415531,55.283803,55.3222105,55.3612676,55.406262,55.4628719,55.5110909,55.5523777,55.5811877,55.6004372,55.626202,55.6656271,55.7167999,55.7698097,55.8196609,55.8615028,55.9129883,55.9663474,56.0220102,56.0700015,56.0939035,56.110463,56.1313736,56.1610839,56.2068432,56.2582503,56.3000349,56.339902,56.3789995,56.4282839,56.4803947,56.5352164,56.5697487,56.5983102,56.6328326,56.6738814,56.7332116,56.7971596,56.8552701,56.9111378,56.9754725,57.0470772,57.1136128,57.173831,57.2226068,57.259731,57.3072742,57.3643368,57.4334281,57.5015747,57.5653127,57.6333396,57.6972844,57.7710774,57.8407427,57.9057801,57.9575663,57.9974929,58.0425517,58.1043319,58.1679128,58.2389092,58.3091659,58.3833021,58.4536748,58.5401438,58.6227714,58.6916662,58.7409628,58.7836189,58.8405543,58.898579,58.9713678,59.043837,59.1218414,59.2002687,59.274737,59.3574134,59.4433827,59.5242416,59.5849787,59.6343497,59.6927827,59.758805,59.8386448,59.9110567,59.9844537,60.056435,60.123065,60.2042185,60.2803745,60.3530352,60.4011891,60.4439959,60.4900257,60.5578054,60.6324446,60.7058569,60.7853482,60.8663504,60.9386672,61.0276757,61.1103448,61.1870458,61.2453891,61.2881024,61.3377799,61.4036165,61.4760366,61.5524599,61.6286593,61.6845819,61.743306,61.8132425,61.8823203,61.9496762,61.9968743,62.0342938,62.0714108,62.1202315,62.1809508,62.2382046,62.2950486,62.3506479,62.3995381,62.475395,62.5463091,62.6136031,62.6570739,62.6941742,62.7383271,62.7926305,62.8566986,62.9145607,62.9658689,63.0216632,63.0807052,63.1461718,63.2052946,63.2599441,63.2844088,63.2961369,63.3126092,63.3421622,63.3871303,63.4339302,63.4673369,63.4978642,63.5319327,63.5679441,63.6104432,63.6444291,63.6641815,63.6739403,63.692603,63.7147066,63.7518055,63.792717,63.8285221,63.8556871,63.8803854,63.9075025,63.9392787,63.9690744,63.9798604,63.9833077,63.9938011,64.0093384,64.0399621,64.0670429,64.0907881,64.1068077,64.1282125,64.1584211,64.1832722,64.2093975,64.2116628,64.2073173,64.2115565,64.2222858,64.2499625,64.2760973,64.2998037,64.3191858,64.345013,64.3734584,64.3943291,64.4151156,64.4132064,64.4118464,64.4096536,64.4167832,64.43292,64.4510529,64.4734276,64.4893377,64.5053342,64.5269189,64.5470942,64.5596729,64.5512293,64.5370906,64.5359472,64.5414947,64.5543634,64.5654298,64.5736111,64.5891142,64.6014759,64.6176147,64.6374397,64.6548674,64.6530021,64.6379271,64.637161,64.6399614,64.6543152,64.6723164,64.6876311,64.7051905,64.7313433,64.7575312,64.7811143,64.8000929,64.7994561,64.7876424,64.783095,64.7920604,64.8096421,64.8310888,64.8451826,64.8597013,64.8849929,64.9174991,64.9480298,64.9793881,64.9894772,65.0028155,65.0138193,65.0371432,65.0772597,65.112197,65.1464034,65.1832638,65.2145358,65.2493713,65.2920645,65.3279403,65.3413366,65.3451881,65.34964,65.3711307,65.3971998,65.4295547,65.4573487,65.486752,65.5152012,65.5449916,65.5780768,65.612728,65.6287505,65.6370091,65.6493375,65.6759928,65.7096966,65.746092,65.7768362,65.8024614,65.8236695,65.8595036,65.8973008,65.932291,65.950911,65.9534105,65.962833,65.9838647,66.0146733,66.042049,66.0699217,66.0961343,66.1310116,66.1682713,66.2071627,66.2355846,66.2408549,66.2335423,66.2349107,66.2441095,66.2751123,66.3054334,66.3245568,66.3405713,66.3624433,66.3957101,66.428903,66.4618675,66.4748837,66.4751281,66.4828678,66.5056165,66.5382912,66.5705628,66.6030198,66.6339689,66.6569117,66.6925011,66.7288729,66.7578719,66.7707625,66.7740427,66.7846288,66.810324,66.840048,66.8778601,66.9069091,66.944259,66.9762508,67.0258126,67.0716286,67.1100184,67.1266401,67.1331391,67.145797,67.17174,67.2091069,67.2459812,67.2810383,67.3136452,67.3456968,67.389003,67.4318433,67.4666209,67.4858459,67.4989147,67.5110936,67.5352658,67.571103,67.6070253,67.6439167,67.6765272,67.7116693,67.7590634,67.8011542,67.840213,67.8606318,67.8821576,67.9120101,67.9546462,68.0054839,68.051412,68.1024205,68.1577127,68.2043653,68.2664507,68.3188171,68.3703564,68.3964356,68.4094472,68.4304611,68.4629791,68.507818,68.5537018,68.5927179,68.6298107,68.6670627,68.7135208,68.7622755,68.8032843,68.8244838,68.8373427,68.847693,68.8688567,68.9005814,68.9354999,68.9676423,68.9875354,69.0175527,69.0499081,69.0823433,69.1070034,69.1134027,69.1141898,69.1207203,69.1355578,69.16459,69.1964228,69.2201632,69.2451564,69.2732758,69.3031979,69.3325675,69.3540507,69.3581722,69.3441594,69.3376329,69.3377424,69.3432191,69.3540144,69.3611554,69.3751703,69.3889904,69.4091639,69.4264662,69.4386335,69.4241335,69.3921241,69.3693422,69.3574782,69.3593242,69.3630244,69.359334,69.3510133,69.3537917,69.3582217,69.367306,69.3678649,69.3514228,69.3273414,69.3033273,69.2892463,69.2880419,69.2908014,69.2944974,69.2913953,69.286149,69.2835153,69.2815422,69.2806375,69.2553511,69.2125426,69.1847287,69.17207,69.1691531,69.173303,69.1698064,69.1589095,69.1556275,69.1672253,69.1771384],first:1973.0849315068492,firstYM:[1973,2],last:2023.3287671232877},prediction:{table:[67.87818,67.96817999999999,68.02817999999999,68.04818,68.12818,68.21817999999999,68.26818,68.28818,68.36818,68.44818,68.50818,68.51818,68.59818,68.68818,68.73818,68.74817999999999,68.82818,68.91817999999999,68.96817999999999,68.98818,69.06818,69.14818,69.20818,69.22818,69.30818,69.39818,69.46817999999999,69.48818,69.57818,69.66817999999999,69.73818,69.75818,69.85817999999999,69.95818,70.02817999999999,70.05818,70.15818,70.25818,70.33818,70.36818,70.46817999999999],first:2022,last:2032}};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module deltat
 */function d2(s){return s%4===0&&s%100!==0||s%400===0}function m2(s){let t;if(s<-500)t=a.horner((s-1820)*.01,-20,0,32);else if(s<500)t=a.horner(s*.01,10583.6,-1014.41,33.78311,-5.952053,-.1798452,.022174192,.0090316521);else if(s<1600)t=a.horner((s-1e3)*.01,1574.2,-556.01,71.23472,.319781,-.8503463,-.005050998,.0083572073);else if(s<it.historic.first)t=a.horner(s-1600,120,-.9808,-.01532,1/7129);else if(s<it.data.first)t=vs(s,it.historic);else if(s<it.data.last-.25)t=p2(s,it.data);else if(s<it.prediction.last)t=vs(s,it.prediction);else if(s<2050)t=a.horner((s-2e3)/100,62.92,32.217,55.89);else if(s<2150)t=a.horner((s-1820)/100,-205.72,56.28,32);else{const n=(s-1820)/100;t=-20+32*n*n}return t}function vs(s,t){return x0.len3ForInterpolateX(s,t.first,t.last,t.table).interpolateX(s)}function p2(s,t){const[n,o]=t.firstYM,{year:c,month:e,first:i,last:h}=rs(s),r=12*(c-n)+(e-o),u=t.table.slice(r,r+3);return new x0.Len3(i,h,u).interpolateX(s)}function rs(s){const t=s|0,n=s-t,o=d2(t)?1:0,c=rs.data[o];let e=12;for(;e>0&&c[e]>n;)e--;const i=t+c[e],h=e<11?t+c[e+2]:t+1+c[(e+2)%12];return{year:t,month:e,first:i,last:h}}rs.data=[[0,0,.08493150684921602,.16164383561635987,.24657534246580326,.3287671232876619,.4136986301368779,.4958904109589639,.5808219178081799,.6657534246576233,.747945205479482,.832876712328698,.915068493150784],[0,0,.08743169398917416,.1639344262296163,.24863387978143692,.3306010928961314,.4153005464481794,.49726775956287383,.5819672131146945,.6666666666667425,.7486338797814369,.8333333333332575,.9153005464481794]];const St={deltaT:m2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module iterate
 */function g2(s,t,n,o){const c=Math.pow(10,-n);for(let e=0;e<o;e++){const i=s(t);if(Math.abs(i-t)<c)return i;t=i}throw new Error("Maximum iterations reached")}function D2(s,t,n){for(let o=0;o<n;o++){const c=s(t);if(Math.abs((c-t)/c)<1e-15)return c;t=c}throw new Error("Maximum iterations reached")}function w2(s,t,n){let o=s(t),c=0;for(let e=0;e<52;e++){c=(t+n)/2;const i=s(c);if(i===0)break;Ws(o)===Ws(i)?(t=c,o=i):n=c}return c}function Ws(s){return s<0}const Bt={decimalPlaces:g2,fullPrecision:D2,binaryRoot:w2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module kepler
 */function _s(s,t){return 2*Math.atan(Math.sqrt((1+t)/(1-t))*Math.tan(s*.5))}function y2(s,t,n){return n*(1-t*Math.cos(s))}function P2(s,t,n){const o=function(c){return t+s*Math.sin(c)};return Bt.decimalPlaces(o,t,n,n*5)}function b2(s,t,n){const o=function(c){const[e,i]=a.sincos(c);return c+(t+s*e-c)/(1-s*i)};return Bt.decimalPlaces(o,t,n,n)}function A2(s,t,n){const o=function(c){const[e,i]=a.sincos(c);return c+Math.asin(Math.sin((t+s*e-c)/(1-s*i)))};return Bt.decimalPlaces(o,t,n,n*5)}function I2(s,t,n){const o=function(c){const[e,i]=a.sincos(c);let h=(t+s*e-c)/(1-s*i);return h>.5?h=.5:h<-.5&&(h=-.5),c+h};return Bt.decimalPlaces(o,t,n,n)}function E2(s,t){t=a.pmod(t,2*Math.PI);let n=1;t>Math.PI&&(n=-1,t=2*Math.PI-t);let o=Math.PI*.5,c=Math.PI*.25;for(let e=0;e<53;e++){const i=o-s*Math.sin(o);t-i<0?o-=c:o+=c,c*=.5}return n<0?-o:o}function T2(s,t){const[n,o]=a.sincos(t);return Math.atan2(n,o-s)}const xt={trueAnomaly:_s,true:_s,radius:y2,kepler1:P2,kepler2:b2,kepler2a:A2,kepler2b:I2,kepler3:E2,kepler4:T2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module solarxyz
 */function L2(s,t){const{lon:n,lat:o,range:c}=C0.trueVSOP87(s,t),[e,i]=a.sincos(r0.meanObliquity(t)),[h,r]=a.sincos(n),u=Math.sin(o),l=c*r,M=c*(h*i-u*e),f=c*(h*e+u*i);return{x:l,y:M,z:f}}function J2(s,t){const n=s.position2000(t).lon;return a.pmod(n+Math.PI-.09033/3600*Math.PI/180,2*Math.PI)}function Ho(s,t){const{x:n,y:o,z:c}=as(s,t);return{x:n+44036e-11*o-190919e-12*c,y:-479966e-12*n+.917482137087*o-.397776982902*c,z:.397776982902*o+.917482137087*c}}function as(s,t){const{lon:n,lat:o,range:c}=s.position2000(t),e=n+Math.PI,i=-o,[h,r]=a.sincos(e),[u,l]=a.sincos(i),M=c*l*r,f=c*l*h,g=c*u;return{x:M,y:f,z:g}}function C2(s,t){const{x:n,y:o,z:c}=as(s,t);return{x:.999925702634*n+.012189716217*o+11134016e-12*c,y:-.011179418036*n+.917413998946*o-.397777041885*c,z:-.004859003787*n+.397747363646*o+.917482111428*c}}const x2=[2306.2181,.30188,.017998],$2=[2306.2181,1.09468,.018203],S2=[2004.3109,-.42665,-.041833];function q2(s,t,n){const o=Ho(s,t),c=o.x,e=o.y,i=o.z,h=(n-2e3)*.01,r=a.horner(h,x2)*h*Math.PI/180/3600,u=a.horner(h,$2)*h*Math.PI/180/3600,l=a.horner(h,S2)*h*Math.PI/180/3600,[M,f]=a.sincos(r),[g,D]=a.sincos(u),[p,m]=a.sincos(l),I=f*D*m-M*g,y=M*D+f*g*m,w=f*p,P=-f*g-M*D*m,E=f*D-M*g*m,x=-M*p,A=-D*p,b=-g*p,_=m;return{x:I*c+P*e+A*i,y:y*c+E*e+b*i,z:w*c+x*e+_*i}}const zo={position:L2,longitudeJ2000:J2,positionJ2000:Ho,xyz:as,positionB1950:C2,positionEquinox:q2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module elliptic
 */function v2(s,t,n){let o=0,c=0,e=0;const i=t.position(n),[h,r,u]=[i.lon,i.lat,i.range],[l,M]=a.sincos(r),[f,g]=a.sincos(h);function D(_=0){const T=s.position(n-_),[z,N,O]=[T.lon,T.lat,T.range],[Q,Y]=a.sincos(N),[t0,Z]=a.sincos(z);o=O*Y*Z-u*M*g,c=O*Y*t0-u*M*f,e=O*Q-u*l}D();const p=Math.sqrt(o*o+c*c+e*e),m=a.lightTime(p);D(m);let I=Math.atan2(c,o),y=Math.atan2(e,Math.hypot(o,c));const[w,P]=Ro.eclipticAberration(I,y,n),E=O0.toFK5(I+w,y+P,n);I=E.lon,y=E.lat;const[x,A]=r0.nutation(n);I+=x;const b=r0.meanObliquity(n)+A;return new $0.Ecliptic(I,y).toEquatorial(b)}let W2=class{constructor(t,n,o,c,e,i){let h={};typeof t=="object"&&(h=t),this.axis=h.axis||t,this.ecc=h.ecc||n,this.inc=h.inc||o,this.argP=h.argP||c,this.node=h.node||e,this.timeP=h.timeP||i}position(t,n){const o=a.K/this.axis/Math.sqrt(this.axis),c=a.SOblJ2000,e=a.COblJ2000,[i,h]=a.sincos(this.node),[r,u]=a.sincos(this.inc),l=h,M=i*e,f=i*c,g=-i*u,D=h*u*e-r*c,p=h*u*c+r*e,m=Math.atan2(l,g),I=Math.atan2(M,D),y=Math.atan2(f,p),w=Math.hypot(l,g),P=Math.hypot(M,D),E=Math.hypot(f,p);return Fo(A=>{const b=o*(A-this.timeP);let _;try{_=xt.kepler2b(this.ecc,b,15)}catch{_=xt.kepler3(this.ecc,b)}const T=xt.trueAnomaly(_,this.ecc),z=xt.radius(_,this.ecc,this.axis),N=z*w*Math.sin(m+this.argP+T),O=z*P*Math.sin(I+this.argP+T),Q=z*E*Math.sin(y+this.argP+T);return{x:N,y:O,z:Q}},t,n)}};function Fo(s,t,n){const o=zo.positionJ2000(n,t),[c,e,i]=[o.x,o.y,o.z];let h=0,r=0,u=0,l=0;function M(I=0){const{x:y,y:w,z:P}=s(t-I);h=c+y,r=e+w,u=i+P,l=Math.sqrt(h*h+r*r+u*u)}M();const f=a.lightTime(l);M(f);let g=Math.atan2(r,h);g<0&&(g+=2*Math.PI);const D=Math.asin(u/l),p=Math.sqrt(c*c+e*e+i*i),m=Math.acos((h*c+r*e+u*i)/p/l);return new a.Coord(g,D,void 0,m)}function _2(s,t){return 42.1219*Math.sqrt(1/t-.5/s)}function N2(s,t){return 29.7847*Math.sqrt((1-t)/(1+t)/s)}function R2(s,t){return 29.7847*Math.sqrt((1+t)/(1-t)/s)}function k2(s,t){const n=s*Math.sqrt(1-t*t);return Math.PI*(3*(s+n)-Math.sqrt((s+3*n)*(3*s+n)))}function B2(s,t){const n=s*Math.sqrt(1-t*t),o=s+n,c=s*n,e=o*.5,i=Math.sqrt(c),h=2*c/o;return Math.PI*(21*e-2*i-3*h)*.125}function H2(s,t){const n=s*Math.sqrt(1-t*t),o=(s-n)/(s+n),c=o*o;let e=1,i=c*.25,h=1+i,r=-1,u=2;for(;h!==e;)r+=2,u+=2,i*=r*r*c/(u*u),e=h,h+=i;return 2*Math.PI*s*e/(1+o)}const mt={position:v2,Elements:W2,astrometricJ2000:Fo,velocity:_2,vAphelion:N2,vPerihelion:R2,length1:k2,length2:B2,length4:H2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module moonphase
 */const{sin:H,cos:Jt}=Math,R0=1/1236.85,G=Math.PI/180,z2=29.530588861;function tt(s){return a.horner(s,245155009766e-5,29.530588861/R0,15437e-8,-15e-8,73e-11)}function Ht(s,t){const n=(s-2e3)*12.3685;return Math.floor(n-t+.5)+t}function F2(s){return tt(Ht(s,0)*R0)}function O2(s){return tt(Ht(s,.25)*R0)}function Y2(s){return tt(Ht(s,.5)*R0)}function j2(s){return tt(Ht(s,.75)*R0)}function Ns(s){const t=new dn(s,0);return tt(t.T)+t.nfc(X2)+t.a()}function U2(s){const t=new dn(s,.25);return tt(t.T)+t.flc()+t.w()+t.a()}function G2(s){const t=new dn(s,.5);return tt(t.T)+t.nfc(V2)+t.a()}function K2(s){const t=new dn(s,.75);return tt(t.T)+t.flc()-t.w()+t.a()}class dn{constructor(t,n){this.A=new Array(14);const o=this.k=Ht(t,n),c=this.T=this.k*R0;this.E=a.horner(c,1,-.002516,-74e-7),this.M=a.horner(c,2.5534*G,29.1053567*G/R0,-14e-7*G,-11e-8*G),this.M_=a.horner(c,201.5643*G,385.81693528*G/R0,.0107582*G,1238e-8*G,-58e-9*G),this.F=a.horner(c,160.7108*G,390.67050284*G/R0,-.0016118*G,-227e-8*G,11e-9*G),this.Ω=a.horner(c,124.7746*G,-1.56375588*G/R0,.0020672*G,215e-8*G),this.A[0]=299.7*G+.107408*G*o-.009173*c*c,this.A[1]=251.88*G+.016321*G*o,this.A[2]=251.83*G+26.651886*G*o,this.A[3]=349.42*G+36.412478*G*o,this.A[4]=84.66*G+18.206239*G*o,this.A[5]=141.74*G+53.303771*G*o,this.A[6]=207.17*G+2.453732*G*o,this.A[7]=154.84*G+7.30686*G*o,this.A[8]=34.52*G+27.261239*G*o,this.A[9]=207.19*G+.121824*G*o,this.A[10]=291.34*G+1.844379*G*o,this.A[11]=161.72*G+24.198154*G*o,this.A[12]=239.56*G+25.513099*G*o,this.A[13]=331.55*G+3.592518*G*o}nfc(t){const{M:n,M_:o,E:c,F:e,Ω:i}=this;return t[0]*H(o)+t[1]*H(n)*c+t[2]*H(2*o)+t[3]*H(2*e)+t[4]*H(o-n)*c+t[5]*H(o+n)*c+t[6]*H(2*n)*c*c+t[7]*H(o-2*e)+t[8]*H(o+2*e)+t[9]*H(2*o+n)*c+t[10]*H(3*o)+t[11]*H(n+2*e)*c+t[12]*H(n-2*e)*c+t[13]*H(2*o-n)*c+t[14]*H(i)+t[15]*H(o+2*n)+t[16]*H(2*(o-e))+t[17]*H(3*n)+t[18]*H(o+n-2*e)+t[19]*H(2*(o+e))+t[20]*H(o+n+2*e)+t[21]*H(o-n+2*e)+t[22]*H(o-n-2*e)+t[23]*H(3*o+n)+t[24]*H(4*o)}flc(){const{M:t,M_:n,E:o,F:c,Ω:e}=this;return-.62801*H(n)+.17172*H(t)*o+-.01183*H(n+t)*o+.00862*H(2*n)+.00804*H(2*c)+.00454*H(n-t)*o+.00204*H(2*t)*o*o+-.0018*H(n-2*c)+-7e-4*H(n+2*c)+-4e-4*H(3*n)+-34e-5*H(2*n-t)*o+32e-5*H(t+2*c)*o+32e-5*H(t-2*c)*o+-28e-5*H(n+2*t)*o*o+27e-5*H(2*n+t)*o+-17e-5*H(e)+-5e-5*H(n-t-2*c)+4e-5*H(2*n+2*c)+-4e-5*H(n+t+2*c)+4e-5*H(n-2*t)+3e-5*H(n+t-2*c)+3e-5*H(3*t)+2e-5*H(2*n-2*c)+2e-5*H(n-t+2*c)+-2e-5*H(3*n+t)}w(){const{M:t,M_:n,E:o,F:c}=this;return .00306-38e-5*o*Jt(t)+26e-5*Jt(n)-2e-5*(Jt(n-t)-Jt(n+t)-Jt(2*c))}a(){let t=0;return Q2.forEach((n,o)=>{t+=n*H(this.A[o])}),t}}const X2=[-.4072,.17241,.01608,.01039,.00739,-.00514,.00208,-.00111,-57e-5,56e-5,-42e-5,42e-5,38e-5,-24e-5,-17e-5,-7e-5,4e-5,4e-5,3e-5,3e-5,-3e-5,3e-5,-2e-5,-2e-5,2e-5],V2=[-.40614,.17302,.01614,.01043,.00734,-.00515,.00209,-.00111,-57e-5,56e-5,-42e-5,42e-5,38e-5,-24e-5,-17e-5,-7e-5,4e-5,4e-5,3e-5,3e-5,-3e-5,3e-5,-2e-5,-2e-5,2e-5],Q2=[325e-6,165e-6,164e-6,126e-6,11e-5,62e-6,6e-5,56e-6,47e-6,42e-6,4e-5,37e-6,35e-6,23e-6],hs={meanLunarMonth:z2,meanNew:F2,meanFirst:O2,meanFull:Y2,meanLast:j2,newMoon:Ns,new:Ns,first:U2,full:G2,last:K2};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module eclipse
 */const Oo=function(s,t,n,o){const c=.0008085054776246109,e=Math.PI/180,i=s*c,h=a.horner(i,160.7108*e,390.67050284*e/c,-.0016118*e,-227e-8*e,11e-9*e);if(Math.abs(Math.sin(h))>.36)return[!1];const r=!0,u=a.horner(i,1,-.002516,-74e-7),l=a.horner(i,2.5534*e,29.1053567*e/c,-14e-7*e,-11e-8*e),M=a.horner(i,201.5643*e,385.81693528*e/c,.0107582*e,1238e-8*e,-58e-9*e),f=a.horner(i,124.7746*e,-1.56375588*e/c,.0020672*e,215e-8*e),g=Math.sin(f),D=h-.02665*e*g,p=a.horner(i,299.77*e,.107408*e/c,-.009173*e),m=t+n*Math.sin(M)+o*Math.sin(l)*u+.0161*Math.sin(2*M)+-.0097*Math.sin(2*D)+.0073*Math.sin(M-l)*u+-.005*Math.sin(M+l)*u+-.0023*Math.sin(M-2*D)+.0021*Math.sin(2*l)*u+.0012*Math.sin(M+2*D)+6e-4*Math.sin(2*M+l)*u+-4e-4*Math.sin(3*M)+-3e-4*Math.sin(l+2*D)*u+3e-4*Math.sin(p)+-2e-4*Math.sin(l-2*D)*u+-2e-4*Math.sin(2*M-l)*u+-2e-4*g,I=.207*Math.sin(l)*u+.0024*Math.sin(2*l)*u+-.0392*Math.sin(M)+.0116*Math.sin(2*M)+-.0073*Math.sin(M+l)*u+.0067*Math.sin(M-l)*u+.0118*Math.sin(2*D),y=5.2207+-.0048*Math.cos(l)*u+.002*Math.cos(2*l)*u+-.3299*Math.cos(M)+-.006*Math.cos(M+l)*u+.0041*Math.cos(M-l)*u,[w,P]=a.sincos(D),E=Math.abs(P),x=(I*P+y*w)*(1-.0048*E),A=.0059+.0046*Math.cos(l)*u+-.0182*Math.cos(M)+4e-4*Math.cos(2*M)+-5e-4*Math.cos(l+M);return[r,m,x,A,M]},J0={None:0,Partial:1,Annular:2,AnnularTotal:3,Penumbral:4,Umbral:5,Total:6},Yo=function(s,t){const n=(s-2e3)*12.3685;return Math.floor(n-t+.5)+t};function Z2(s){let t=J0.None,n;const[o,c,e,i,h]=Oo(Yo(s,0),hs.meanNew(s),-.4075,.1721),r=i+.5461;if(!o)return{type:t};const u=Math.abs(e);if(u>1.5433+i)return{type:t};const l=u<.9972;if(!l)t=J0.Partial,u<1.026&&u<.9972+Math.abs(i)&&(t=J0.Total);else if(i<0)t=J0.Total;else if(i>.0047)t=J0.Annular;else{const M=.00464*Math.sqrt(1-e*e);i<M?t=J0.AnnularTotal:t=J0.Annular}return t===J0.Partial&&(n=(1.5433+i-u)/(.5461+2*i)),{type:t,central:l,jdeMax:c,magnitude:n,distance:e,umbral:i,penumbral:r}}function ti(s){let t=J0.None,n,o,c,e;const[i,h,r,u,l]=Oo(Yo(s,.5),hs.meanFull(s),-.4065,.1727);if(!i)return{type:t};const M=1.2848+u,f=.7403-u,g=Math.abs(r);if(n=(1.0128-u-g)/.545,n>1)t=J0.Total;else if(n>0)t=J0.Umbral;else{if(n=(1.5573+u-g)/.545,n<0)return{type:t};t=J0.Penumbral}const D=1.0128-u,p=.4678-u,m=.5458+.04*Math.cos(l),I=r*r;switch(t){case J0.Total:o=Math.sqrt(p*p-I)/m/24;case J0.Umbral:c=Math.sqrt(D*D-I)/m/24;default:{const y=1.5573+u;e=Math.sqrt(y*y-I)/m/24}}return{type:t,jdeMax:h,magnitude:n,distance:r,umbral:f,penumbral:M,sdTotal:o,sdPartial:c,sdPenumbral:e}}const ni={TYPE:J0,solar:Z2,lunar:ti};/**
 * @copyright 2020 mdmunir
 * @copyright 2020 commenthol
 * @license MIT
 * @module elp
 */const $n=1/3600*Math.PI/180;function Xt(s,t){const n=[];return Object.keys(t).forEach(o=>{n[o]=0;let c=t[o].length-1;for(c;c>=0;c--){const e=t[o][c],i=a.horner(s,e.slice(1));n[o]+=e[0]*Math.sin(i)}}),a.horner(s,...n)}let jo=class{constructor(t){if(typeof t!="object")throw new TypeError("need Elp data");this.series=t}_calcLBR(t){const n=a.horner(t,this.series.W1)+Xt(t,this.series.L)*$n,o=Xt(t,this.series.B)*$n,c=Xt(t,this.series.R);return{L:a.pmod(n,2*Math.PI),B:o,R:c}}positionXYZ(t){const n=a.J2000Century(t),{L:o,B:c,R:e}=this._calcLBR(n),i=e*Math.cos(o)*Math.cos(c),h=e*Math.sin(o)*Math.cos(c),r=e*Math.sin(c),u=a.horner(n,0,10180391e-12,47020439e-14,-5417367e-16,-2507948e-18,463486e-20),l=a.horner(n,0,-.000113469002,12372674e-14,1265417e-15,-1371808e-18,-320334e-20),M=Math.sqrt(1-u*u-l*l),f=1-2*u*u,g=2*u*l,D=2*u*M,p=2*u*l,m=1-2*l*l,I=-2*l*M,y=-2*u*M,w=2*l*M,P=1-2*u*u-2*l*l;return{x:f*i+g*h+D*r,y:p*i+m*h+I*r,z:y*i+w*h+P*r}}lightTime(t){const n=a.J2000Century(t),o=Xt(n,this.series.R);return a.lightTime(o/a.AU)}position(t){const n=a.J2000Century(t),{L:o,B:c,R:e}=this._calcLBR(n),i=a.horner(n,0,5029.0966-.29965,1.112,77e-6,-2353e-8)*$n;return new an(a.pmod(o+i,2*Math.PI),c,e)}};function si(s,t){return new jo(s).position(t)}const oi={Moon:jo,position:si};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module eqtime
 */const{cos:ci,sin:Rs,tan:ei}=Math;function ii(s,t){const n=a.J2000Century(s)*.1,o=Uo(n),{lon:c,lat:e,range:i}=C0.trueVSOP87(t,s),[h,r]=r0.nutation(s),u=-20.4898/3600*Math.PI/180/i,l=c+h+u,M=r0.meanObliquity(s)+r,f=new $0.Ecliptic(l,e).toEquatorial(M),g=o-.0057183*Math.PI/180-f.ra+h*ci(M);return a.pmod(g+Math.PI,2*Math.PI)-Math.PI}const Uo=function(s){return a.horner(s,280.4664567,360007.6982779,.03032028,1/49931,-1/15300,-1/2e6)*Math.PI/180};function ri(s){const t=r0.meanObliquity(s),n=ei(t*.5),o=n*n,c=a.J2000Century(s),e=Uo(c*.1),i=C0.eccentricity(c),h=C0.meanAnomaly(c),[r,u]=a.sincos(2*e),l=Rs(h);return o*r-2*i*l+4*i*o*l*u-o*o*r*u-1.25*i*i*Rs(2*h)}const kn={e:ii,eSmart:ri};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module fit
 */function ai(s){let t=0,n=0,o=0,c=0;for(const u of s){const l=u.x,M=u.y;t+=l,n+=M,o+=l*l,c+=l*M}const e=s.length,i=e*o-t*t,h=(e*c-t*n)/i,r=(n*o-t*c)/i;return[h,r]}function hi(s){let t=0,n=0,o=0,c=0,e=0;for(const h of s){const r=h.x,u=h.y;t+=r,n+=u,o+=r*r,c+=u*u,e+=r*u}const i=s.length;return(i*e-t*n)/(Math.sqrt(i*o-t*t)*Math.sqrt(i*c-n*n))}function ui(s){let t=0,n=0,o=0,c=0,e=0,i=0,h=0;for(const g of s){const D=g.x,p=g.y,m=D*D;t+=D,n+=m,o+=D*m,c+=m*m,e+=p,i+=D*p,h+=m*p}const r=s.length,u=r*n*c+2*t*n*o-n*n*n-t*t*c-r*o*o,l=(r*n*h+t*o*e+t*n*i-n*n*e-t*t*h-r*o*i)/u,M=(r*c*i+t*n*h+n*o*e-n*n*i-t*c*e-r*o*h)/u,f=(n*c*e+n*o*i+t*o*h-n*n*h-t*c*i-o*o*e)/u;return[l,M,f]}function li(s,t,n,o){let c=0,e=0,i=0,h=0,r=0,u=0,l=0,M=0,f=0;for(const I of s){const y=I.x,w=I.y,P=t(y),E=n(y),x=o(y);c+=P*P,e+=P*E,i+=P*x,h+=E*E,r+=E*x,u+=x*x,l+=w*P,M+=w*E,f+=w*x}const g=c*h*u+2*e*i*r-c*r*r-h*i*i-u*e*e,D=(l*(h*u-r*r)+M*(i*r-e*u)+f*(e*r-i*h))/g,p=(l*(r*i-e*u)+M*(c*u-i*i)+f*(e*i-c*r))/g,m=(l*(e*r-h*i)+M*(e*i-c*r)+f*(c*h-e*e))/g;return[D,p,m]}function Mi(s,t){let n=0,o=0;for(const c of s){const e=t(c.x),i=c.y;n+=i*e,o+=e*e}return n/o}const fi={linear:ai,correlationCoefficient:hi,quadratic:ui,func3:li,func1:Mi};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module illum
 */const{toDeg:j0}=a,Vt=Math.PI/180;function di(s,t,n){return Math.acos((s*s+t*t-n*n)/(2*s*t))}function mi(s,t,n){const o=s+t;return(o*o-n*n)/(4*s*t)}function pi(s,t,n,o,c,e){return Math.acos((n-c*Math.cos(t)*Math.cos(s-o))/e)}function gi(s,t,n,o,c,e){const[i,h]=a.sincos(s),[r,u]=a.sincos(t);return Math.acos((n*u*h+o*u*i+c*r)/e)}function Di(s){const t=a.J2000Century(s),n=(261.51+22518.443*t)*Vt,o=(177.53+35999.05*t)*Vt,c=(50.42+58517.811*t)*Vt,e=n+(1.91*Math.sin(o)+.78*Math.sin(c))*Vt,i=Math.sqrt(1.52321+1.44666*Math.cos(e)),h=.72333+i;return(h*h-1)/2.89332/i}function wi(s,t,n){const o=j0(n)-50;return 1.16+5*Math.log10(s*t)+(.02838+1023e-7*o)*o}function yi(s,t,n){const o=j0(n);return-4+5*Math.log10(s*t)+(.01322+4247e-10*o*o)*o}function Pi(s,t,n){return-1.3+5*Math.log10(s*t)+.01486*j0(n)}function bi(s,t){return-8.93+5*Math.log10(s*t)}function Ai(s,t,n,o){const c=Math.sin(Math.abs(n));return-8.68+5*Math.log10(s*t)+.044*Math.abs(j0(o))-2.6*c+1.25*c*c}function Ii(s,t){return-6.85+5*Math.log10(s*t)}function Ei(s,t){return-7.05+5*Math.log10(s*t)}function Ti(s,t,n){return a.horner(j0(n),-.42+5*Math.log10(s*t),.038,-273e-6,2e-6)}function Li(s,t,n){return a.horner(j0(n),-4.4+5*Math.log10(s*t),9e-4,239e-6,-65e-8)}function Ji(s,t,n){return-1.52+5*Math.log10(s*t)+.016*j0(n)}function Ci(s,t,n){return-9.4+5*Math.log10(s*t)+.005*j0(n)}function xi(s,t,n,o){const c=Math.sin(Math.abs(n));return-8.88+5*Math.log10(s*t)+.044*Math.abs(j0(o))-2.6*c+1.25*c*c}function $i(s,t){return-7.19+5*Math.log10(s*t)}function Si(s,t){return-6.87+5*Math.log10(s*t)}function qi(s,t){return-1+5*Math.log10(s*t)}const Go={phaseAngle:di,fraction:mi,phaseAngle2:pi,phaseAngle3:gi,fractionVenus:Di,mercury:wi,venus:yi,mars:Pi,jupiter:bi,saturn:Ai,uranus:Ii,neptune:Ei,mercury84:Ti,venus84:Li,mars84:Ji,jupiter84:Ci,saturn84:xi,uranus84:$i,neptune84:Si,pluto84:qi};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module julian
 */const H0=Math.trunc,Ko=22991605e-1,Nt=[0,0,31,59,90,120,151,181,212,243,273,304,334],vi=86400;class us{constructor(t,n=1,o=1){t instanceof Date?this.fromDate(t):(this.year=t,this.month=n,this.day=o)}getDate(){return{year:this.year,month:this.month,day:Math.floor(this.day)}}getTime(){const t=new c0.Time(this.day*vi),[n,o,c,e]=t.toHMS();let[i,h]=a.modf(e);return h=Math.trunc(h*1e3),{hour:o%24,minute:c,second:i,millisecond:h}}toISOString(){const{year:t,month:n,day:o}=this.getDate(),{hour:c,minute:e,second:i,millisecond:h}=this.getTime();return`${rt(t,4)}-${rt(n)}-${rt(o)}T${rt(c)}:${rt(e)}:${rt(i)}.${rt(h,3)}Z`}isGregorian(){return n1(this.year,this.month,this.day)}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1;const n=t.getUTCDate(),o=t.getUTCHours(),c=t.getUTCMinutes(),e=t.getUTCSeconds(),i=t.getMilliseconds();return this.day=n+(o+(c+(e+i/1e3)/60)/60)/24,this}toDate(){const[t,n]=a.modf(this.day),[o,c]=a.modf(n*24),[e,i]=a.modf(c*60),[h,r]=a.modf(i*60),u=new Date(Date.UTC(this.year,this.month-1,t,o,e,h,Math.round(r*1e3)));return u.setUTCFullYear(this.year),u}toYear(){const[t,n]=a.modf(this.day),o=this.dayOfYear()-1+n,c=this.isLeapYear()?366:365;return this.year+o/c}fromYear(t){const[n,o]=a.modf(t);this.year=n;const c=this.isLeapYear()?366:365,e=a.round(o*c,5);let i=12;for(;i>0&&Nt[i]>e;)i--;return this.month=i,this.day=1+e-Nt[this.month],this}isLeapYear(){return this.isGregorian()?Ft(this.year):zt(this.year)}toJD(){return mn(this.year,this.month,this.day,!this.isGregorian())}fromJD(t){const n=!t1(t),{year:o,month:c,day:e}=pn(t,n);return this.year=o,this.month=c,this.day=e,this}fromJDE(t){this.fromJD(t);const n=St.deltaT(this.toYear());return this.day-=n/86400,this}toJDE(){const t=St.deltaT(this.toYear());return this.day+=t/86400,this.toJD()}midnight(){return this.day=Math.floor(this.day),this}noon(){return this.day=Math.floor(this.day)+.5,this}deltaT(t){const n=St.deltaT(this.toYear());return t?this.day-=n/86400:this.day+=n/86400,this}dayOfWeek(){return s1(this.toJD())}dayOfYear(){return this.isGregorian()?Ms(this.year,this.month,this.day):fs(this.year,this.month,this.day)}}class ls extends us{toJD(){return Vo(this.year,this.month,this.day)}fromJD(t){const{year:n,month:o,day:c}=Zo(t);return this.year=n,this.month=o,this.day=c,this}isLeapYear(){return zt(this.year)}dayOfYear(){return fs(this.year,this.month,this.day)}toGregorian(){const t=this.toJD();return new ht().fromJD(t)}}class ht extends us{toJD(){return Xo(this.year,this.month,this.day)}fromJD(t){const{year:n,month:o,day:c}=Qo(t);return this.year=n,this.month=o,this.day=c,this}isLeapYear(){return Ft(this.year)}dayOfYear(){return Ms(this.year,this.month,this.day)}toJulian(){const t=this.toJD();return new ls().fromJD(t)}}function mn(s,t,n,o){let c=0;if(t<3&&(s--,t+=12),!o){const i=a.floorDiv(s,100);c=2-i+a.floorDiv(i,4)}return a.floorDiv(36525*H0(s+4716),100)+(a.floorDiv(306*(t+1),10)+c)+n-1524.5}function Xo(s,t,n){return mn(s,t,n,!1)}function Vo(s,t,n){return mn(s,t,n,!0)}function zt(s){return s%4===0}function Ft(s){return s%4===0&&s%100!==0||s%400===0}function pn(s,t){const[n,o]=a.modf(s+.5);let c=n;if(!t){const f=a.floorDiv(n*100-186721625,3652425);c=n+1+f-a.floorDiv(f,4)}const e=c+1524,i=a.floorDiv(e*100-12210,36525),h=a.floorDiv(36525*i,100),r=H0(a.floorDiv((e-h)*1e4,306001));let u,l;const M=H0(e-h)-a.floorDiv(306001*r,1e4)+o;return r===14||r===15?l=r-13:l=r-1,l<3?u=H0(i)-4715:u=H0(i)-4716,{year:u,month:l,day:M}}function Qo(s){return pn(s,!1)}function Zo(s){return pn(s,!0)}function t1(s){return s>=Ko}function n1(s,t=1,n=1){return s>1582||s===1582&&t>10||s===1582&&t===10&&n>=15}function Wi(s){return new ht().fromJD(s).toDate()}function _i(s){return new ht().fromDate(s).toJD()}function Ni(s){return new ht().fromJDE(s).toDate()}function Ri(s){return new ht().fromDate(s).toJDE()}function ki(s){return s+a.JMod}function Bi(s){return s-a.JMod}function s1(s){return H0(s+1.5)%7}function Ms(s,t,n){return ds(s,t,H0(n),Ft(s))}function fs(s,t,n){return ds(s,t,H0(n),zt(s))}function ds(s,t,n,o){let c=0;return o&&t>1&&(c=1),c+Nt[t]+H0(n)}function ms(s,t){let n,o=0;for(t&&(o=1),n=1;n<=12;n++)if(o+Nt[n]>s){n=n-1;break}const c=s-o-Nt[n];return{month:n,day:c}}function Hi(s,t){const{month:n,day:o}=ms(t,Ft(s));return new ht(s,n,o)}function zi(s,t){const{month:n,day:o}=ms(t,zt(s));return new ls(s,n,o)}function rt(s,t){t=t||2;const n=s<0?"-":"";s=Math.abs(s);const o="0000"+s;return n+o.substr(o.length-t,t)}const F0={GREGORIAN0JD:Ko,Calendar:us,CalendarJulian:ls,CalendarGregorian:ht,CalendarToJD:mn,CalendarGregorianToJD:Xo,CalendarJulianToJD:Vo,LeapYearJulian:zt,LeapYearGregorian:Ft,JDToCalendar:pn,JDToCalendarGregorian:Qo,JDToCalendarJulian:Zo,isJDCalendarGregorian:t1,isCalendarGregorian:n1,JDToDate:Wi,DateToJD:_i,JDEToDate:Ni,DateToJDE:Ri,MJDToJD:ki,JDToMJD:Bi,DayOfWeek:s1,DayOfYearGregorian:Ms,DayOfYearJulian:fs,DayOfYear:ds,DayOfYearToCalendar:ms,DayOfYearToCalendarGregorian:Hi,DayOfYearToCalendarJulian:zi};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module jm
 */const pt=Math.trunc;function Fi(s){const t=s+3760,n=ks(s);let o=3,c=n;c>31&&(o++,c-=31);let e=9,i=n-21;i>30&&(e++,i-=30);let h=12;switch(t%19){case 0:case 3:case 6:case 8:case 11:case 14:case 17:h++;break}const r=s+1;let u=F0.LeapYearGregorian;r<1583&&(u=F0.LeapYearJulian);let l=365;return u(r)&&l++,l+=ks(r)-n,[t,o,c,e,i,h,l]}const ks=function(s){const t=a.floorDiv(s,100);let n=0;s>=1583&&(n=pt(a.floorDiv(3*t-5,4)));const o=(12*s+12)%19,c=s%4,e=-1.904412361576+1.554241796621*o+.25*c-.003177794022*s+n,i=Math.floor(e),h=pt(i),r=(h+3*s+5*c+2-n)%7,u=e-i;let l;return r===2||r===4||r===6?l=h+23:r===1&&o>6&&u>=.63287037?l=h+24:r===0&&o>11&&u>=.897723765?l=h+23:l=h+22,pt(l)};function Oi(s,t,n){const o=n+a.floorDiv(295001*(t-1)+9900,1e4),c=a.floorDiv(s,30),e=s%30,i=a.floorDiv(11*e+3,30),h=404*c+354*e+208+i,r=a.floorDiv(h,1461),u=h%1461,l=621+28*c+4*r,M=a.floorDiv(u*1e4,3652422),f=a.floorDiv(3652422*M,1e4);let g=u-f+o-1,D=l+M;return g>366&&D%4===0?(g-=366,D++):g>365&&D%4>0&&(g-=365,D++),a.floorDiv(36525*(D-1),100)+1721423+g}function o1(s){return(11*(s%30)+3)%30>18}function Yi(s,t,n){let o=2;s%4===0&&(o=1);const c=a.floorDiv(275*t,9)-o*a.floorDiv(t+9,12)+n-30,e=pt(s-623),i=a.floorDiv(e,4),h=function(w){const E=365.25001*(w%4),x=Math.floor(E);return E-x>.5?pt(x)+1:pt(x)}(e),r=1461*i+170+h,u=a.floorDiv(r,10631),l=r%10631,M=a.floorDiv(l,354),f=l%354,g=a.floorDiv(11*M+14,30);let D=30*u+M+1,p=f-g+c-1,m=354;o1(s)&&m++,p>m&&(p-=m,D++);let I,y;if(p===355)I=12,y=30;else{const w=a.floorDiv((p-1)*10,295);I=1+w,y=a.floorDiv(10*p-295*w,10)}return{year:D,month:I,day:y}}const ji=["","Muḥarram","Ṣafar","Rabīʿ I","Rabīʿ II","Jumādā I","Jumādā II","Rajab","Shaʿbān","Ramaḍān","Shawwāl","Dhū al-Qaʿda","Dhū al-Ḥijja"];function Ui(s){return ji[s]}const Gi={JewishCalendar:Fi,MoslemToJD:Oi,MoslemLeapYear:o1,JulianToMoslem:Yi,moslemMonth:Ui};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module jupiter
 */function Ki(s,t,n){const o=s-24332825e-1,c=o/a.JulianCentury,e=Math.PI/180,i=268*e+.1061*e*c,h=64.5*e-.0164*e*c,r=17.71*e+877.90003539*e*o,u=16.838*e+870.27003539*e*o,l=t.position(s);let[M,f,g]=[l.lon,l.lat,l.range];const D=O0.toFK5(M,f,s);M=D.lon,f=D.lat;const[p,m]=a.sincos(M),I=Math.sin(f);let y=4,w=0,P=0,E=0,x=0,A=0,b=0;const _=function(){const An=a.lightTime(y),lt=n.position(s-An);w=lt.lon,P=lt.lat,E=lt.range;const Gt=O0.toFK5(w,P,s);w=Gt.lon,P=Gt.lat;const[In,En]=a.sincos(P),[Tn,Kt]=a.sincos(w);x=E*En*Kt-g*m,A=E*En*Tn-g*p,b=E*In-g*I,y=Math.sqrt(x*x+A*A+b*b)};_(),_();const T=r0.meanObliquity(s),[z,N]=a.sincos(T),[O,Q]=a.sincos(w),[Y,t0]=a.sincos(P),Z=Math.atan2(N*O-z*Y/t0,Q),o0=Math.asin(N*Y+z*t0*O),[W,e0]=a.sincos(o0),[L,$]=a.sincos(h),q=Math.asin(-L*W-$*e0*Math.cos(i-Z)),F=A*N-b*z,R=A*z+b*N;let K=Math.atan2(F,x),U=Math.atan(R/Math.hypot(x,F));const[X,s0]=a.sincos(U),[a0,f0]=a.sincos(i-K),d0=Math.atan2(L*s0*f0-X*$,s0*a0),w0=Math.asin(-L*X-$*s0*Math.cos(i-K));let u0=r-d0-5.07033*e*y,l0=u-d0-5.02626*e*y,p0=(2*E*y+g*g-E*E-y*y)/(4*E*y);Math.sin(w-M)<0&&(p0=-p0),u0=a.pmod(u0+p0,2*Math.PI),l0=a.pmod(l0+p0,2*Math.PI);const[y0,M0]=r0.nutation(s),E0=T+M0,[b0,g0]=a.sincos(E0),[n0,P0]=a.sincos(K);K+=.005693*e*(P0*m*g0+n0*p)/s0,U+=.005693*e*(m*g0*(b0/g0*s0-n0*X)+P0*X*p);const m0=X/s0,h0=(g0+b0*n0*m0)*y0-P0*m0*M0,T0=b0*P0*y0+n0*M0,D0=K+h0,st=U+T0,[G0,K0]=a.sincos(i),q0=L/$,N0=(g0+b0*G0*q0)*y0-K0*q0*M0,k0=b0*K0*y0+G0*M0,X0=i+N0,ut=h+k0,[Et,ot]=a.sincos(st),[ct,et]=a.sincos(ut),[Tt,Lt]=a.sincos(X0-D0);let V0=Math.atan2(et*Tt,ct*ot-et*Et*Lt);return V0<0&&(V0+=2*Math.PI),[q,w0,u0,l0,V0]}function Xi(s){const t=s-a.J2000,n=Math.PI/180,o=172.74*n+.00111588*n*t,c=357.529*n+.9856003*n*t,e=Math.sin(o),i=20.02*n+.0830853*n*t+.329*n*e,h=66.115*n+.9025179*n*t-.329*n*e,[r,u]=a.sincos(c),[l,M]=a.sincos(i),[f,g]=a.sincos(2*c),[D,p]=a.sincos(2*i),m=1.915*n*r+.02*n*f,I=5.555*n*l+.168*n*D,y=h+m-I,w=1.00014-.01671*u-14e-5*g,P=5.20872-.25208*M-.00611*p,[E,x]=a.sincos(y),A=Math.sqrt(P*P+w*w-2*P*w*x),b=Math.asin(w/A*E),_=t-A/173;let T=210.98*n+877.8169088*n*_+b-I,z=187.23*n+870.1869088*n*_+b-I,N=Math.sin(b/2);N*=N,E>0&&(N=-N),T=a.pmod(T+N,2*Math.PI),z=a.pmod(z+N,2*Math.PI);const O=34.35*n+.083091*n*t+.329*n*e+I,Q=3.12*n*Math.sin(O+42.8*n),Y=Q-2.22*n*Math.sin(b)*Math.cos(O+22*n)-1.3*n*(P-A)/A*Math.sin(O-100.5*n);return[Q,Y,T,z]}const Vi={physical:Ki,physical2:Xi};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module planetelements
 */const Qi="mercury",Zi="venus",tr="earth",nr="mars",sr="jupiter",or="saturn",cr="uranus",er="neptune";function c1(s,t,n,o,c,e){const i=typeof s=="object"?s:{};this.lon=i.lon||s,this.axis=i.axis||t,this.ecc=i.ecc||n,this.inc=i.inc||o,this.node=i.node||c,this.peri=i.peri||e}const ps={mercury:{L:[252.250906,149474.0722491,3035e-7,18e-9],a:[.38709831],e:[.20563175,20407e-9,-283e-10,-18e-11],i:[7.004986,.0018215,-181e-7,56e-9],Ω:[48.330893,1.1861883,17542e-8,215e-9],ϖ:[77.456119,1.5564776,29544e-8,9e-9]},venus:{L:[181.979801,58519.2130302,31014e-8,15e-9],a:[.72332982],e:[.00677192,-47765e-9,981e-10,46e-11],i:[3.394662,.0010037,-88e-8,-7e-9],Ω:[76.67992,.9011206,40618e-8,-93e-9],ϖ:[131.563703,1.4022288,-.00107618,-5678e-9]},earth:{L:[100.466457,36000.7698278,30322e-8,2e-8],a:[1.000001018],e:[.01670863,-42037e-9,-1267e-10,14e-11],i:[0],Ω:void 0,ϖ:[102.937348,1.7195366,45688e-8,-18e-9]},mars:{L:[355.433,19141.6964471,31052e-8,16e-9],a:[1.523679342],e:[.09340065,90484e-9,-806e-10,-25e-11],i:[1.849726,-6011e-7,1276e-8,-7e-9],Ω:[49.558093,.7720959,1557e-8,2267e-9],ϖ:[336.060234,1.8410449,13477e-8,536e-9]},jupiter:{L:[34.351519,3036.3027748,2233e-7,37e-9],a:[5.202603209,1913e-10],e:[.04849793,163225e-9,-4714e-10,-201e-11],i:[1.303267,-.0054965,466e-8,-2e-9],Ω:[100.464407,1.0209774,40315e-8,404e-9],ϖ:[14.331207,1.6126352,.00103042,-4464e-9]},saturn:{L:[50.077444,1223.5110686,51908e-8,-3e-8],a:[9.554909192,-2139e-9,4e-9],e:[.05554814,-346641e-9,-6436e-10,34e-10],i:[2.488879,-.0037362,-1519e-8,87e-9],Ω:[113.665503,.877088,-12176e-8,-2249e-9],ϖ:[93.057237,1.9637613,83753e-8,4928e-9]},uranus:{L:[314.055005,429.8640561,3039e-7,26e-9],a:[19.218446062,-372e-10,98e-11],e:[.04638122,-27293e-9,789e-10,24e-11],i:[.773197,7744e-7,3749e-8,-92e-9],Ω:[74.005957,.5211278,.00133947,18484e-9],ϖ:[173.005291,1.486379,21406e-8,434e-9]},neptune:{L:[304.348665,219.8833092,30882e-8,18e-9],a:[30.110386869,-1663e-10,69e-11],e:[.00945575,6033e-9,0,-5e-11],i:[1.769953,-.0093082,-708e-8,27e-9],Ω:[131.784057,1.1022039,25952e-8,-637e-9],ϖ:[48.120276,1.4262957,38434e-8,2e-8]}};function ir(s,t,n){const o=a.J2000Century(t),c=ps[s];return n=n||new c1,n.lon=a.pmod(a.horner(o,c.L)*Math.PI/180,2*Math.PI),n.axis=a.horner(o,c.a),n.ecc=a.horner(o,c.e),n.inc=a.horner(o,c.i)*Math.PI/180,n.node=a.horner(o,c.Ω)*Math.PI/180,n.peri=a.horner(o,c.ϖ)*Math.PI/180,n}function rr(s,t){return a.horner(a.J2000Century(t),ps[s].i)*Math.PI/180}function ar(s,t){return a.horner(a.J2000Century(t),ps[s].Ω)*Math.PI/180}const $t={mercury:Qi,venus:Zi,earth:tr,mars:nr,jupiter:sr,saturn:or,uranus:cr,neptune:er,Elements:c1,mean:ir,inc:rr,node:ar};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module jupitermoons
 */const hr=0,ur=1,lr=2,Mr=3,fr=[17295,21819,27558,36548];function e1(s,t){this.x=s,this.y=t}function dr(s){const t=s-a.J2000,n=Math.PI/180,o=172.74*n+.00111588*n*t,c=357.529*n+.9856003*n*t,e=Math.sin(o),i=20.02*n+.0830853*n*t+.329*n*e,h=66.115*n+.9025179*n*t-.329*n*e,[r,u]=a.sincos(c),[l,M]=a.sincos(i),[f,g]=a.sincos(2*c),[D,p]=a.sincos(2*i),m=1.915*n*r+.02*n*f,I=5.555*n*l+.168*n*D,y=h+m-I,w=1.00014-.01671*u-14e-5*g,P=5.20872-.25208*M-.00611*p,[E,x]=a.sincos(y),A=Math.sqrt(P*P+w*w-2*P*w*x),b=Math.asin(w/A*E),_=34.35*n+.083091*n*t+.329*n*e+I,z=3.12*n*Math.sin(_+42.8*n)-2.22*n*Math.sin(b)*Math.cos(_+22*n)-1.3*n*(P-A)/A*Math.sin(_-100.5*n),N=t-A/173,O=163.8069*n+203.4058646*n*N+b-I,Q=358.414*n+101.2916335*n*N+b-I,Y=5.7176*n+50.234518*n*N+b-I,t0=224.8092*n+21.48798*n*N+b-I,Z=331.18*n+50.310482*n*N,o0=87.45*n+21.569231*n*N,[W,e0]=a.sincos(2*(O-Q)),[L,$]=a.sincos(2*(Q-Y)),[q,F]=a.sincos(Z),[R,K]=a.sincos(o0),U=.473*n*W,X=1.065*n*L,s0=.165*n*q,a0=.843*n*R,f0=5.9057-.0244*e0,d0=9.3966-.0882*$,w0=14.9883-.0216*F,u0=26.3627-.1939*K,l0=Math.sin(z),p0=function(y0,M0){const[E0,b0]=a.sincos(y0);return new e1(M0*E0,-M0*b0*l0)};return[p0(O+U,f0),p0(Q+X,d0),p0(Y+s0,w0),p0(t0+a0,u0)]}function mr(s,t,n,o){o=o||new Array(4);let c,e,i,h=5;(function(){const{lon:n0,lat:P0,range:m0}=C0.trueVSOP87(t,s),[h0,T0,D0]=[n0,P0,m0],[st,G0]=a.sincos(h0),K0=Math.sin(T0);let q0=a.lightTime(h),N0=0,k0=0,X0=0;function ut(){const{lon:Et,lat:ot,range:ct}=n.position(s-q0),[et,Tt]=a.sincos(Et),[Lt,V0]=a.sincos(ot);N0=ct*V0*Tt+D0*G0,k0=ct*V0*et+D0*st,X0=ct*Lt+D0*K0,h=Math.sqrt(N0*N0+k0*k0+X0*X0),q0=a.lightTime(h)}ut(),ut(),c=Math.atan2(k0,N0),e=Math.atan(X0/Math.hypot(N0,k0)),i=s-24430005e-1-q0})();const r=Math.PI/180,u=106.07719*r+203.48895579*r*i,l=175.73161*r+101.374724735*r*i,M=120.55883*r+50.317609207*r*i,f=84.44459*r+21.571071177*r*i,g=97.0881*r+.16138586*r*i,D=154.8663*r+.04726307*r*i,p=188.184*r+.00712734*r*i,m=335.2868*r+.00184*r*i,I=312.3346*r-.13279386*r*i,y=100.4411*r-.03263064*r*i,w=119.1942*r-.00717703*r*i,P=322.6186*r-.00175934*r*i,E=.33033*r*Math.sin(163.679*r+.0010512*r*i)+.03439*r*Math.sin(34.486*r-.0161731*r*i),x=199.6766*r+.1737919*r*i;let A=316.5182*r-208e-8*r*i;const b=30.23756*r+.0830925701*r*i+E,_=31.97853*r+.0334597339*r*i,T=13.469942*r,z=.47259*r*Math.sin(2*(u-l))+-.03478*r*Math.sin(p-m)+.01081*r*Math.sin(l-2*M+p)+.00738*r*Math.sin(x)+.00713*r*Math.sin(l-2*M+D)+-.00674*r*Math.sin(g+p-2*T-2*b)+.00666*r*Math.sin(l-2*M+m)+.00445*r*Math.sin(u-p)+-.00354*r*Math.sin(u-l)+-.00317*r*Math.sin(2*A-2*T)+.00265*r*Math.sin(u-m)+-.00186*r*Math.sin(b)+.00162*r*Math.sin(D-p)+.00158*r*Math.sin(4*(u-l))+-.00155*r*Math.sin(u-M)+-.00138*r*Math.sin(A+w-2*T-2*b)+-.00115*r*Math.sin(2*(u-2*l+y))+89e-5*r*Math.sin(D-m)+85e-5*r*Math.sin(u+p-2*T-2*b)+83e-5*r*Math.sin(y-w)+53e-5*r*Math.sin(A-y),N=1.06476*r*Math.sin(2*(l-M))+.04256*r*Math.sin(u-2*l+p)+.03581*r*Math.sin(l-p)+.02395*r*Math.sin(u-2*l+m)+.01984*r*Math.sin(l-m)+-.01778*r*Math.sin(x)+.01654*r*Math.sin(l-D)+.01334*r*Math.sin(l-2*M+D)+.01294*r*Math.sin(p-m)+-.01142*r*Math.sin(l-M)+-.01057*r*Math.sin(b)+-.00775*r*Math.sin(2*(A-T))+.00524*r*Math.sin(2*(u-l))+-.0046*r*Math.sin(u-M)+.00316*r*Math.sin(A-2*b+w-2*T)+-.00203*r*Math.sin(g+p-2*T-2*b)+.00146*r*Math.sin(A-w)+-.00145*r*Math.sin(2*b)+.00125*r*Math.sin(A-P)+-.00115*r*Math.sin(u-2*M+p)+-94e-5*r*Math.sin(2*(l-y))+86e-5*r*Math.sin(2*(u-2*l+y))+-86e-5*r*Math.sin(5*_-2*b+52.225*r)+-78e-5*r*Math.sin(l-f)+-64e-5*r*Math.sin(3*M-7*f+4*m)+64e-5*r*Math.sin(g-m)+-63e-5*r*Math.sin(u-2*M+m)+58e-5*r*Math.sin(w-P)+56e-5*r*Math.sin(2*(A-T-b))+56e-5*r*Math.sin(2*(l-f))+55e-5*r*Math.sin(2*(u-M))+52e-5*r*Math.sin(3*M-7*f+p+3*m)+-43e-5*r*Math.sin(u-p)+41e-5*r*Math.sin(5*(l-M))+41e-5*r*Math.sin(m-T)+32e-5*r*Math.sin(y-w)+32e-5*r*Math.sin(2*(M-b-T)),O=.1649*r*Math.sin(M-p)+.09081*r*Math.sin(M-m)+-.06907*r*Math.sin(l-M)+.03784*r*Math.sin(p-m)+.01846*r*Math.sin(2*(M-f))+-.0134*r*Math.sin(b)+-.01014*r*Math.sin(2*(A-T))+.00704*r*Math.sin(l-2*M+p)+-.0062*r*Math.sin(l-2*M+D)+-.00541*r*Math.sin(M-f)+.00381*r*Math.sin(l-2*M+m)+.00235*r*Math.sin(A-w)+.00198*r*Math.sin(A-P)+.00176*r*Math.sin(x)+.0013*r*Math.sin(3*(M-f))+.00125*r*Math.sin(u-M)+-.00119*r*Math.sin(5*_-2*b+52.225*r)+.00109*r*Math.sin(u-l)+-.001*r*Math.sin(3*M-7*f+4*m)+91e-5*r*Math.sin(w-P)+8e-4*r*Math.sin(3*M-7*f+p+3*m)+-75e-5*r*Math.sin(2*l-3*M+p)+72e-5*r*Math.sin(g+p-2*T-2*b)+69e-5*r*Math.sin(m-T)+-58e-5*r*Math.sin(2*M-3*f+m)+-57e-5*r*Math.sin(M-2*f+m)+56e-5*r*Math.sin(M+p-2*T-2*b)+-52e-5*r*Math.sin(l-2*M+g)+-5e-4*r*Math.sin(D-p)+48e-5*r*Math.sin(M-2*f+p)+-45e-5*r*Math.sin(2*l-3*M+m)+-41e-5*r*Math.sin(D-m)+-38e-5*r*Math.sin(2*b)+-37e-5*r*Math.sin(p-m+w-P)+-32e-5*r*Math.sin(3*M-7*f+2*p+2*m)+3e-4*r*Math.sin(4*(M-f))+29e-5*r*Math.sin(M+m-2*T-2*b)+-28e-5*r*Math.sin(w+A-2*T-2*b)+26e-5*r*Math.sin(M-T-b)+24e-5*r*Math.sin(l-3*M+2*f)+21e-5*r*Math.sin(2*(M-T-b))+-21e-5*r*Math.sin(M-D)+17e-5*r*Math.sin(2*(M-p)),Q=.84287*r*Math.sin(f-m)+.03431*r*Math.sin(m-p)+-.03305*r*Math.sin(2*(A-T))+-.03211*r*Math.sin(b)+-.01862*r*Math.sin(f-p)+.01186*r*Math.sin(A-P)+.00623*r*Math.sin(f+m-2*b-2*T)+.00387*r*Math.sin(2*(f-m))+-.00284*r*Math.sin(5*_-2*b+52.225*r)+-.00234*r*Math.sin(2*(A-m))+-.00223*r*Math.sin(M-f)+-.00208*r*Math.sin(f-T)+.00178*r*Math.sin(A+P-2*m)+.00134*r*Math.sin(m-T)+.00125*r*Math.sin(2*(f-b-T))+-.00117*r*Math.sin(2*b)+-.00112*r*Math.sin(2*(M-f))+.00107*r*Math.sin(3*M-7*f+4*m)+.00102*r*Math.sin(f-b-T)+96e-5*r*Math.sin(2*f-A-P)+87e-5*r*Math.sin(2*(A-P))+-85e-5*r*Math.sin(3*M-7*f+p+3*m)+85e-5*r*Math.sin(M-2*f+m)+-81e-5*r*Math.sin(2*(f-A))+71e-5*r*Math.sin(f+m-2*T-3*b)+61e-5*r*Math.sin(u-f)+-56e-5*r*Math.sin(A-w)+-54e-5*r*Math.sin(M-2*f+p)+51e-5*r*Math.sin(l-f)+42e-5*r*Math.sin(2*(A-b-T))+39e-5*r*Math.sin(2*(m-P))+36e-5*r*Math.sin(A+T-m-P)+35e-5*r*Math.sin(2*_-b+188.37*r)+-35e-5*r*Math.sin(f-m+2*T-2*A)+-32e-5*r*Math.sin(f+m-2*T-b)+3e-4*r*Math.sin(2*_-2*b+149.15*r)+29e-5*r*Math.sin(3*M-7*f+2*p+2*m)+28e-5*r*Math.sin(f-m+2*A-2*T)+-28e-5*r*Math.sin(2*(f-P))+-27e-5*r*Math.sin(p-m+w-P)+-26e-5*r*Math.sin(5*_-3*b+188.37*r)+25e-5*r*Math.sin(P-w)+-25e-5*r*Math.sin(l-3*M+2*f)+-23e-5*r*Math.sin(3*(M-f))+21e-5*r*Math.sin(2*f-2*T-3*b)+-21e-5*r*Math.sin(2*M-3*f+m)+19e-5*r*Math.sin(f-m-b)+-19e-5*r*Math.sin(2*f-p-m)+-18e-5*r*Math.sin(f-m+b)+-16e-5*r*Math.sin(f+p-2*T-2*b),Y=u+z,t0=l+N,Z=M+O,o0=f+Q;let W;const e0=new Array(5).fill(0),L=new Array(5).fill(0),$=new Array(5).fill(0);let q;(function(){const n0=[Y,t0,Z,o0],P0=[Math.atan(6393e-7*Math.sin(Y-I)+1825e-7*Math.sin(Y-y)+329e-7*Math.sin(Y-w)+-311e-7*Math.sin(Y-A)+93e-7*Math.sin(Y-P)+75e-7*Math.sin(3*Y-4*l-1.9927*z+y)+46e-7*Math.sin(Y+A-2*T-2*b)),Math.atan(.0081004*Math.sin(t0-y)+4512e-7*Math.sin(t0-w)+-3284e-7*Math.sin(t0-A)+116e-6*Math.sin(t0-P)+272e-7*Math.sin(u-2*M+1.0146*N+y)+-144e-7*Math.sin(t0-I)+143e-7*Math.sin(t0+A-2*T-2*b)+35e-7*Math.sin(t0-A+b)+-28e-7*Math.sin(u-2*M+1.0146*N+w)),Math.atan(.0032402*Math.sin(Z-w)+-.0016911*Math.sin(Z-A)+6847e-7*Math.sin(Z-P)+-2797e-7*Math.sin(Z-y)+321e-7*Math.sin(Z+A-2*T-2*b)+51e-7*Math.sin(Z-A+b)+-45e-7*Math.sin(Z-A-b)+-45e-7*Math.sin(Z+A-2*T)+37e-7*Math.sin(Z+A-2*T-3*b)+3e-6*Math.sin(2*l-3*Z+4.03*O+y)+-21e-7*Math.sin(2*l-3*Z+4.03*O+w)),Math.atan(-.0076579*Math.sin(o0-A)+.0044134*Math.sin(o0-P)+-5112e-7*Math.sin(o0-w)+773e-7*Math.sin(o0+A-2*T-2*b)+104e-7*Math.sin(o0-A+b)+-102e-7*Math.sin(o0-A-b)+88e-7*Math.sin(o0+A-2*T-3*b)+-38e-7*Math.sin(o0+A-2*T-b))];q=[5.90569*(1+-.0041339*Math.cos(2*(u-l))+-387e-7*Math.cos(u-p)+-214e-7*Math.cos(u-m)+17e-6*Math.cos(u-l)+-131e-7*Math.cos(4*(u-l))+106e-7*Math.cos(u-M)+-66e-7*Math.cos(u+p-2*T-2*b)),9.39657*(1+.0093848*Math.cos(u-l)+-3116e-7*Math.cos(l-p)+-1744e-7*Math.cos(l-m)+-1442e-7*Math.cos(l-D)+553e-7*Math.cos(l-M)+523e-7*Math.cos(u-M)+-29e-6*Math.cos(2*(u-l))+164e-7*Math.cos(2*(l-y))+107e-7*Math.cos(u-2*M+p)+-102e-7*Math.cos(l-g)+-91e-7*Math.cos(2*(u-M))),14.98832*(1+-.0014388*Math.cos(M-p)+-7917e-7*Math.cos(M-m)+6342e-7*Math.cos(l-M)+-1761e-7*Math.cos(2*(M-f))+294e-7*Math.cos(M-f)+-156e-7*Math.cos(3*(M-f))+156e-7*Math.cos(u-M)+-153e-7*Math.cos(u-l)+7e-6*Math.cos(2*l-3*M+p)+-51e-7*Math.cos(M+p-2*T-2*b)),26.36273*(1+-.0073546*Math.cos(f-m)+1621e-7*Math.cos(f-p)+974e-7*Math.cos(M-f)+-543e-7*Math.cos(f+m-2*T-2*b)+-271e-7*Math.cos(2*(f-m))+182e-7*Math.cos(f-T)+177e-7*Math.cos(2*(M-f))+-167e-7*Math.cos(2*f-A-P)+167e-7*Math.cos(A-P)+-155e-7*Math.cos(2*(f-T-b))+142e-7*Math.cos(2*(f-A))+105e-7*Math.cos(u-f)+92e-7*Math.cos(l-f)+-89e-7*Math.cos(f-T-b)+-62e-7*Math.cos(f+m-2*T-3*b)+48e-7*Math.cos(2*(f-P)))];const m0=(s-2433282423e-3)/a.JulianCentury,h0=(1.3966626*r+3088e-7*r*m0)*m0;for(const D0 in n0)n0[D0]+=h0;A+=h0;const T0=(s-a.J1900)/a.JulianCentury;W=3.120262*r+6e-4*r*T0;for(const D0 in n0){const[st,G0]=a.sincos(n0[D0]-A),[K0,q0]=a.sincos(P0[D0]);e0[D0]=q[D0]*G0*q0,L[D0]=q[D0]*st*q0,$[D0]=q[D0]*K0}})(),$[4]=1;const F=new Array(5).fill(0),R=new Array(5).fill(0),K=new Array(5).fill(0),[U,X]=a.sincos(W),s0=$t.node($t.jupiter,s),[a0,f0]=a.sincos(s0),[d0,w0]=a.sincos(A-s0),[u0,l0]=a.sincos($t.inc($t.jupiter,s)),[p0,y0]=a.sincos(c),[M0,E0]=a.sincos(e);for(const n0 in F){let P0,m0=e0[n0],h0=L[n0]*X-$[n0]*U,T0=L[n0]*U+$[n0]*X;P0=m0*w0-h0*d0,h0=m0*d0+h0*w0,m0=P0;const D0=h0*l0-T0*u0;T0=h0*u0+T0*l0,h0=D0,P0=m0*f0-h0*a0,h0=m0*a0+h0*f0,m0=P0,P0=m0*p0-h0*y0,h0=m0*y0+h0*p0,m0=P0,F[n0]=m0,R[n0]=T0*M0+h0*E0,K[n0]=T0*E0-h0*M0}const[b0,g0]=a.sincos(Math.atan2(F[4],K[4]));for(let n0=0;n0<4;n0++){let P0=F[n0]*g0-K[n0]*b0;const m0=F[n0]*b0+K[n0]*g0,h0=R[n0],T0=P0/q[n0];P0+=Math.abs(h0)/fr[n0]*Math.sqrt(1-T0*T0);const D0=h/(h+h0/2095);o[n0]=new e1(P0*D0,m0*D0)}return o}const pr={io:hr,europa:ur,ganymede:lr,callisto:Mr,positions:dr,e5:mr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module line
 */function gr(s,t,n,o,c,e,i,h){if(c.length!==5||e.length!==5)throw new Error("r3, d3 must be length 5");const r=new Array(5);return c.forEach((l,M)=>{r[M]=Math.tan(t)*Math.sin(n-l)+Math.tan(o)*Math.sin(l-s)+Math.tan(e[M])*Math.sin(s-n)}),new x0.Len5(i,h,r).zero(!1)}function Dr(s,t,n,o,c,e){const[i,h]=a.sincos(o),[r,u]=a.sincos(n-s),[l,M]=a.sincos(c-n),f=Math.atan2(r,h*Math.tan(t)-i*u),g=Math.atan2(l,h*Math.tan(e)-i*M);return f+g}function wr(s,t,n,o,c,e){const[i,h]=a.sincos(s),[r,u]=a.sincos(t),[l,M]=a.sincos(n),[f,g]=a.sincos(o),D=u*h,p=g*M,m=u*i,I=g*l,y=r,w=f,P=m*w-y*I,E=y*p-D*w,x=D*I-m*p,A=Math.tan(c),b=Math.tan(e)/Math.cos(c);return Math.asin((P+E*A+x*b)/(Math.sqrt(P*P+E*E+x*x)*Math.sqrt(1+A*A+b*b)))}function yr(s,t,n,o,c,e){const[i,h]=a.sincos(s),[r,u]=a.sincos(t),[l,M]=a.sincos(n),[f,g]=a.sincos(o),[D,p]=a.sincos(c),[m,I]=a.sincos(e),y=u*h,w=g*M,P=I*p,E=u*i,x=g*l,A=I*D,b=E*f-x*r,_=x*m-A*f,T=E*m-A*r,z=r*w-f*y,N=f*P-m*w,O=r*P-m*y,Q=y*x-w*E,Y=w*A-P*x,t0=y*A-P*E,Z=Math.acos((b*_+z*N+Q*Y)/(Math.sqrt(b*b+z*z+Q*Q)*Math.sqrt(_*_+N*N+Y*Y))),o0=Math.asin((w*T+x*O+f*t0)/(Math.sqrt(w*w+x*x+f*f)*Math.sqrt(T*T+O*O+t0*t0)));return[Z,o0]}const Pr={time:gr,angle:Dr,error:wr,angleError:yr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module nearparabolic
 */let br=class{constructor(t,n,o){this.timeP=t,this.pDis=n,this.ecc=o}anomalyDistance(t){const n=a.K*Math.sqrt((1+this.ecc)/this.pDis)/(2*this.pDis),o=(1-this.ecc)/(1+this.ecc),c=t-this.timeP;if(c===0)return{ano:0,dist:this.pDis,err:null};const e=1e4,i=1e-9,h=n*c;let r=2/(3*Math.abs(h));if(r=2/Math.tan(2*Math.atan(Math.cbrt(Math.tan(Math.atan(r)/2)))),c<0&&(r=-r),this.ecc!==1){let M=0;for(;;){const f=r;let g=1;const D=r*r;let p=-D*r,m=h+2*o*r*D/3;for(;;){g+=1,p=-p*o*D;const y=(g-(g+1)*o)/(2*g+1)*p;if(m+=y,g>50||Math.abs(y)>e)return{err:new Error("No convergence")};if(Math.abs(y)<=i)break}if(M++,M>50)return{err:new Error("No convergence")};for(;;){const I=r;if(r=(2*r*r*r/3+m)/(r*r+1),Math.abs(r-I)<=i)break}if(Math.abs(r-f)<=i)break}}let u=2*Math.atan(r);const l=this.pDis*(1+this.ecc)/(1+this.ecc*Math.cos(u));return u<0&&(u+=2*Math.PI),{ano:u,dist:l,err:null}}};const Ar={Elements:br};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module node
 */function Ir(s,t,n,o){return gs(-n,s,t,o)}function Er(s,t,n,o){return gs(Math.PI-n,s,t,o)}function gs(s,t,n,o){const c=2*Math.atan(Math.sqrt((1-n)/(1+n))*Math.tan(s*.5)),[e,i]=a.sincos(c),h=c-n*e,r=a.K/t/Math.sqrt(t),u=o+h/r,l=t*(1-n*i);return[u,l]}function Tr(s,t,n){return Ds(-t,s,n)}function Lr(s,t,n){return Ds(Math.PI-t,s,n)}function Ds(s,t,n){const o=Math.tan(s*.5),c=n+27.403895*o*(o*o+3)*t*Math.sqrt(t),e=t*(1+o*o);return[c,e]}const Jr={ellipticAscending:Ir,ellipticDescending:Er,el:gs,parabolicAscending:Tr,parabolicDescending:Lr,pa:Ds};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module mars
 */function Cr(s,t,n){const o=a.J2000Century(s),c=Math.PI/180;let e=352.9065*c+1.1733*c*o;const i=63.2818*c-.00394*c*o,h=t.position(s),r=h.range,u=O0.toFK5(h.lon,h.lat,s),[l,M]=[u.lon,u.lat],[f,g]=a.sincos(l),D=Math.sin(M);let p=.5,m=a.lightTime(p),I=0,y=0,w=0,P=0,E=0,x=0;function A(){const Ln=n.position(s-m);w=Ln.range;const Ls=O0.toFK5(Ln.lon,Ln.lat,s);I=Ls.lon,y=Ls.lat;const[Q1,Js]=a.sincos(y),[Z1,tc]=a.sincos(I);P=w*Js*tc-r*g,E=w*Js*Z1-r*f,x=w*Q1-r*D,p=Math.sqrt(P*P+E*E+x*x),m=a.lightTime(p)}A(),A();let b=Math.atan2(E,P),_=Math.atan(x/Math.hypot(P,E));const[T,z]=a.sincos(i),[N,O]=a.sincos(_),Q=Math.asin(-T*N-z*O*Math.cos(e-b)),Y=49.5581*c+.7721*c*o,t0=I-.00697*c/w,Z=y-225e-6*c*Math.cos(I-Y)/w,[o0,W]=a.sincos(Z),e0=Math.asin(-T*o0-z*W*Math.cos(e-t0)),L=11.504*c+350.89200025*c*(s-m-24332825e-1),$=r0.meanObliquity(s),[q,F]=a.sincos($);let R=new $0.Ecliptic(e,i).toEquatorial($);const[K,U]=[R.ra,R.dec],X=E*F-x*q,s0=E*q+x*F,a0=Math.atan2(X,P),f0=Math.atan(s0/Math.hypot(P,X)),[d0,w0]=a.sincos(f0),[u0,l0]=a.sincos(U),[p0,y0]=a.sincos(K-a0),M0=Math.atan2(u0*w0*y0-d0*l0,w0*p0),E0=a.pmod(L-M0,2*Math.PI),[b0,g0]=r0.nutation(s),[n0,P0]=a.sincos(l-b);b+=.005693*c*P0/O,_+=.005693*c*n0*N,e+=b0,b+=b0;const m0=$+g0,[h0,T0]=a.sincos(m0);R=new $0.Ecliptic(e,i).toEquatorial(m0);const[D0,st]=[R.ra,R.dec];R=new $0.Ecliptic(b,_).toEquatorial(m0);const[G0,K0]=[R.ra,R.dec],[q0,N0]=a.sincos(st),[k0,X0]=a.sincos(K0),[ut,Et]=a.sincos(D0-G0);let ot=Math.atan2(N0*ut,q0*X0-N0*k0*Et);ot<0&&(ot+=2*Math.PI);const ct=l+Math.PI,[et,Tt]=a.sincos(ct),Lt=Math.atan2(T0*et,Tt),V0=Math.asin(h0*et),[An,lt]=a.sincos(V0),[Gt,In]=a.sincos(Lt-a0),Tn=Math.atan2(lt*Gt,An*w0-lt*d0*In)+Math.PI,Kt=9.36/60/60*Math.PI/180/p,Ts=Go.fraction(w,p,r),V1=(1-Ts)*Kt;return[Q,e0,E0,ot,Tn,Kt,Ts,V1]}const xr={physical:Cr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module moonposition
 */const{asin:$r,sin:L0}=Math,j=Math.PI/180,Sr=6378.137;function qr(s){return $r(Sr/s)}function i1(s){const t=a.horner(s,297.8501921*j,445267.1114034*j,-.0018819*j,j/545868,-j/113065e3),n=a.horner(s,357.5291092*j,35999.0502909*j,-1536e-7*j,j/2449e4),o=a.horner(s,134.9633964*j,477198.8675055*j,.0087414*j,j/69699,-j/14712e3),c=a.horner(s,93.272095*j,483202.0175233*j,-.0036539*j,-j/3526e3,j/86331e4);return[t,n,o,c]}function vr(s){const t=a.J2000Century(s),n=a.horner(t,218.3164477*j,481267.88123421*j,-.0015786*j,j/538841,-j/65194e3),[o,c,e,i]=i1(t),h=119.75*j+131.849*j*t,r=53.09*j+479264.29*j*t,u=313.45*j+481266.484*j*t,l=a.horner(t,1,-.002516,-74e-7),M=l*l;let f=3958*L0(h)+1962*L0(n-i)+318*L0(r),g=0,D=-2235*L0(n)+382*L0(u)+175*L0(h-i)+175*L0(h+i)+127*L0(n-e)-115*L0(n+e);Wr.forEach(y=>{const[w,P]=a.sincos(o*y.d+c*y.m+e*y.m_+i*y.f);switch(y.m){case 0:f+=y.Σl*w,g+=y.Σr*P;break;case-1:case 1:f+=y.Σl*w*l,g+=y.Σr*P*l;break;case-2:case 2:f+=y.Σl*w*M,g+=y.Σr*P*M;break}}),_r.forEach(y=>{const w=L0(o*y.d+c*y.m+e*y.m_+i*y.f);switch(y.m){case 0:D+=y.Σb*w;break;case-1:case 1:D+=y.Σb*w*l;break;case-2:case 2:D+=y.Σb*w*M;break}});const p=a.pmod(n,2*Math.PI)+f*1e-6*j,m=D*1e-6*j,I=385000.56+g*.001;return new a.Coord(p,m,I)}const Wr=function(){return[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]].map(t=>{const n={};return["d","m","m_","f","Σl","Σr"].forEach((c,e)=>{n[c]=t[e]}),n})}(),_r=function(){return[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]].map(t=>{const n={};return["d","m","m_","f","Σb"].forEach((c,e)=>{n[c]=t[e]}),n})}();function r1(s){return a.pmod(a.horner(a.J2000Century(s),125.0445479*j,-1934.1362891*j,.0020754*j,j/467441,-j/60616e3),2*Math.PI)}function Nr(s){return a.pmod(a.horner(a.J2000Century(s),83.3532465*j,4069.0137287*j,-.01032*j,-j/80053,j/18999e3),2*Math.PI)}function Rr(s){const[t,n,o,c]=i1(a.J2000Century(s));return r1(s)+-1.4979*j*L0(2*(t-c))+-.15*j*L0(n)+-.1226*j*L0(2*t)+.1176*j*L0(2*c)+-.0801*j*L0(2*(o-c))}const a1={parallax:qr,position:vr,node:r1,perigee:Nr,trueNode:Rr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module moon
 */const{sin:i0,cos:I0,asin:Bn,atan2:kr}=Math,S=Math.PI/180,h1=1.54242*S,[Sn,Bs]=a.sincos(h1);function u1(s,t){const{lon:n,lat:o,range:c}=a1.position(s),e=new l1(s),[i,h]=e.lib(n,o),r=e.pa(n,o,h),[u,l]=e.sun(n,o,c,t),M=new a.Coord(i,h),f=new a.Coord(u,l);return[M,r,f]}let l1=class{constructor(t){this.jde=t;const[n,o]=r0.nutation(t);this.Δψ=n;const c=a.J2000Century(t),e=this.F=a.horner(c,93.272095*S,483202.0175233*S,-.0036539*S,-S/3526e3,S/86331e4);this.Ω=a.horner(c,125.0445479*S,-1934.1362891*S,.0020754*S,S/467441,-S/60616e3),this.ε=r0.meanObliquity(t)+o,this.sε=i0(this.ε),this.cε=I0(this.ε);const i=a.horner(c,297.8501921*S,445267.1114034*S,-.0018819*S,S/545868,-S/113065e3),h=a.horner(c,357.5291092*S,35999.0502909*S,-1536e-7*S,S/2449e4),r=a.horner(c,134.9633964*S,477198.8675055*S,.0087414*S,S/69699,-S/14712e3),u=a.horner(c,1,-.002516,-74e-7),l=119.75*S+131.849*S*c,M=72.56*S+20.186*S*c;this.ρ=-.02752*S*I0(r)+-.02245*S*i0(e)+.00684*S*I0(r-2*e)+-.00293*S*I0(2*e)+-85e-5*S*I0(2*(e-i))+-54e-5*S*I0(r-2*i)+-2e-4*S*i0(r+e)+-2e-4*S*I0(r+2*e)+-2e-4*S*I0(r-e)+14e-5*S*I0(r+2*(e-i)),this.σ=-.02816*S*i0(r)+.02244*S*I0(e)+-.00682*S*i0(r-2*e)+-.00279*S*i0(2*e)+-83e-5*S*i0(2*(e-i))+69e-5*S*i0(r-2*i)+4e-4*S*I0(r+e)+-25e-5*S*i0(2*r)+-23e-5*S*i0(r+2*e)+2e-4*S*I0(r-e)+19e-5*S*i0(r-e)+13e-5*S*i0(r+2*(e-i))+-1e-4*S*I0(r-3*e),this.τ=.0252*S*i0(h)*u+.00473*S*i0(2*(r-e))+-.00467*S*i0(r)+.00396*S*i0(l)+.00276*S*i0(2*(r-i))+.00196*S*i0(this.Ω)+-.00183*S*I0(r-e)+.00115*S*i0(r-2*i)+-96e-5*S*i0(r-i)+46e-5*S*i0(2*(e-i))+-39e-5*S*i0(r-e)+-32e-5*S*i0(r-h-i)+27e-5*S*i0(2*(r-i)-h)+23e-5*S*i0(M)+-14e-5*S*i0(2*i)+14e-5*S*I0(2*(r-e))+-12e-5*S*i0(r-2*e)+-12e-5*S*i0(2*r)+11e-5*S*i0(2*(r-h-i))}lib(t,n){const[o,c,e]=this.optical(t,n),[i,h]=this.physical(e,c);let r=o+i;r>Math.PI&&(r-=2*Math.PI);const u=c+h;return[r,u]}optical(t,n){const o=t-this.Ω,[c,e]=a.sincos(o),[i,h]=a.sincos(n),r=kr(c*h*Bs-i*Sn,e*h),u=a.pmod(r-this.F,2*Math.PI),l=Bn(-c*h*Sn-i*Bs);return[u,l,r]}physical(t,n){const[o,c]=a.sincos(t),e=-this.τ+(this.ρ*c+this.σ*o)*Math.tan(n),i=this.σ*c-this.ρ*o;return[e,i]}pa(t,n,o){const c=this.Ω+this.Δψ+this.σ/Sn,[e,i]=a.sincos(c),[h,r]=a.sincos(h1+this.ρ),u=h*e,l=h*i*this.cε-r*this.sε,M=Math.atan2(u,l),f=new $0.Ecliptic(t+this.Δψ,n).toEquatorial(this.ε);let g=Bn(Math.hypot(u,l)*I0(f.ra-M)/I0(o));return g<0&&(g+=2*Math.PI),g}sun(t,n,o,c){const{lon:e,lat:i,range:h}=C0.apparentVSOP87(c,this.jde),r=o/(h*a.AU),u=e+Math.PI+57.296*S*r*I0(n)*i0(e-t),l=r*n;return this.lib(u,l)}};function M1(s,t){const n=Math.PI/2-t.lon,[o,c]=a.sincos(t.lat),[e,i]=a.sincos(s.lat);return Bn(o*e+c*i*i0(n+s.lon))}function Br(s,t,n){return t-=cn(s,t,n),t-cn(s,t,n)}function Hr(s,t,n){return t+=cn(s,t,n),t+cn(s,t,n)}function cn(s,t,n){const o=u1(t,n);return M1(s,o[2])/(12.19075*S*I0(s.lat))}const k=(s,t)=>new a.Coord(s*S,t*S),zr={archimedes:k(-3.9,29.7),aristarchus:k(-47.5,23.7),aristillus:k(1.2,33.9),aristoteles:k(17.3,50.1),arzachel:k(-1.9,-17.7),autolycus:k(1.5,30.7),billy:k(-50,-13.8),birt:k(-8.5,-22.3),campanus:k(-27.7,-28),censorinus:k(32.7,-.4),clavius:k(-14,-58),copernicus:k(-20,9.7),delambre:k(17.5,-1.9),dionysius:k(17.3,2.8),endymion:k(56.4,53.6),eratosthenes:k(-11.3,14.5),eudoxus:k(16.3,44.3),fracastorius:k(33.2,-21),fraMauro:k(-17,-6),gassendi:k(-39.9,-17.5),goclenius:k(45,-10.1),grimaldi:k(-68.5,-5.8),harpalus:k(-43.4,52.6),horrocks:k(5.9,-4),kepler:k(-38,8.1),langrenus:k(60.9,-8.9),lansberg:k(-26.6,-.3),letronne:k(-43,-10),macrobius:k(46,21.2),manilius:k(9.1,14.5),menelaus:k(16,16.3),messier:k(47.6,-1.9),petavius:k(61,-25),pico:k(-8.8,45.8),pitatus:k(-13.5,-29.8),piton:k(-.8,40.8),plato:k(-9.2,51.4),plinius:k(23.6,15.3),posidonius:k(30,31.9),proclus:k(46.9,16.1),ptolemeusA:k(-.8,-8.5),pytheas:k(-20.6,20.5),reinhold:k(-22.8,3.2),riccioli:k(-74.3,-3.2),schickard:k(-54.5,-44),schiller:k(-39,-52),tauruntius:k(46.5,5.6),theophilus:k(26.5,-11.4),timocharis:k(-13.1,26.7),tycho:k(-11,-43.2),vitruvius:k(31.3,17.6),walter:k(1,-33)},Fr={physical:u1,Moon:l1,sunAltitude:M1,sunrise:Br,sunset:Hr,selenographic:zr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module moonillum
 */const A0=Math.PI/180;function Or(s,t){return d1(s.range,t.range,f1(s.ra,s.dec,t.ra,t.dec))}function f1(s,t,n,o){const[c,e]=a.sincos(t),[i,h]=a.sincos(o);return i*c+h*e*Math.cos(n-s)}function d1(s,t,n){const o=Math.sin(Math.acos(n));let c=Math.atan(t*o/(s-t*n));return c<0&&(c+=Math.PI),c}function Yr(s,t){return Math.acos(-f1(s.ra,s.dec,t.ra,t.dec))}function jr(s,t){return d1(s.range,t.range,m1(s.lon,s.lat,t.lon))}function m1(s,t,n){return Math.cos(t)*Math.cos(s-n)}function Ur(s,t){return Math.acos(-m1(s.lon,s.lat,t.lon))}function Gr(s){const t=a.J2000Century(s),n=a.horner(t,297.8501921*A0,445267.1114034*A0,-.0018819*A0,A0/545868,-A0/113065e3),o=a.horner(t,357.5291092*A0,35999.0502909*A0,-1536e-7*A0,A0/2449e4),c=a.horner(t,134.9633964*A0,477198.8675055*A0,.0087414*A0,A0/69699,-A0/14712e3);return Math.PI-a.pmod(n,2*Math.PI)+-6.289*A0*Math.sin(c)+2.1*A0*Math.sin(o)+-1.274*A0*Math.sin(2*n-c)+-.658*A0*Math.sin(2*n)+-.214*A0*Math.sin(2*c)+-.11*A0*Math.sin(n)}const Kr={phaseAngleEquatorial:Or,phaseAngleEquatorial2:Yr,phaseAngleEcliptic:jr,phaseAngleEcliptic2:Ur,phaseAngle3:Gr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module moonmaxdec
 */function Xr(s){return p1(s,Qr)}function Vr(s){return p1(s,Zr)}const J=Math.PI/180,dt=1/1336.86;function p1(s,t){let n=(s-2000.03)*13.3686;n=Math.floor(n+.5);const o=n*dt,c=a.horner(o,t.D,333.0705546*J/dt,-4214e-7*J,11e-8*J),e=a.horner(o,t.m,26.9281592*J/dt,-355e-7*J,-1e-7*J),i=a.horner(o,t.m_,356.9562794*J/dt,.0103066*J,1251e-8*J),h=a.horner(o,t.f,1.4467807*J/dt,-.002069*J,-215e-8*J),r=a.horner(o,1,-.002516,-74e-7),u=a.horner(o,t.JDE,27.321582247/dt,119804e-9,-141e-9)+t.tc[0]*Math.cos(h)+t.tc[1]*Math.sin(i)+t.tc[2]*Math.sin(2*h)+t.tc[3]*Math.sin(2*c-i)+t.tc[4]*Math.cos(i-h)+t.tc[5]*Math.cos(i+h)+t.tc[6]*Math.sin(2*c)+t.tc[7]*Math.sin(e)*r+t.tc[8]*Math.cos(3*h)+t.tc[9]*Math.sin(i+2*h)+t.tc[10]*Math.cos(2*c-h)+t.tc[11]*Math.cos(2*c-i-h)+t.tc[12]*Math.cos(2*c-i+h)+t.tc[13]*Math.cos(2*c+h)+t.tc[14]*Math.sin(2*i)+t.tc[15]*Math.sin(i-2*h)+t.tc[16]*Math.cos(2*i-h)+t.tc[17]*Math.sin(i+3*h)+t.tc[18]*Math.sin(2*c-e-i)*r+t.tc[19]*Math.cos(i-2*h)+t.tc[20]*Math.sin(2*(c-i))+t.tc[21]*Math.sin(h)+t.tc[22]*Math.sin(2*c+i)+t.tc[23]*Math.cos(i+2*h)+t.tc[24]*Math.sin(2*c-e)*r+t.tc[25]*Math.sin(i+h)+t.tc[26]*Math.sin(e-i)*r+t.tc[27]*Math.sin(i-3*h)+t.tc[28]*Math.sin(2*i+h)+t.tc[29]*Math.cos(2*(c-i)-h)+t.tc[30]*Math.sin(3*h)+t.tc[31]*Math.cos(i+3*h)+t.tc[32]*Math.cos(2*i)+t.tc[33]*Math.cos(2*c-i)+t.tc[34]*Math.cos(2*c+i+h)+t.tc[35]*Math.cos(i)+t.tc[36]*Math.sin(3*i+h)+t.tc[37]*Math.sin(2*c-i+h)+t.tc[38]*Math.cos(2*(c-i))+t.tc[39]*Math.cos(c+h)+t.tc[40]*Math.sin(e+i)*r+t.tc[41]*Math.sin(2*(c-h))+t.tc[42]*Math.cos(2*i+h)+t.tc[43]*Math.cos(3*i+h),l=23.6961*J-.013004*J*o+t.dc[0]*Math.sin(h)+t.dc[1]*Math.cos(2*h)+t.dc[2]*Math.sin(2*c-h)+t.dc[3]*Math.sin(3*h)+t.dc[4]*Math.cos(2*(c-h))+t.dc[5]*Math.cos(2*c)+t.dc[6]*Math.sin(i-h)+t.dc[7]*Math.sin(i+2*h)+t.dc[8]*Math.cos(h)+t.dc[9]*Math.sin(2*c+e-h)*r+t.dc[10]*Math.sin(i+3*h)+t.dc[11]*Math.sin(c+h)+t.dc[12]*Math.sin(i-2*h)+t.dc[13]*Math.sin(2*c-e-h)*r+t.dc[14]*Math.sin(2*c-i-h)+t.dc[15]*Math.cos(i+h)+t.dc[16]*Math.cos(i+2*h)+t.dc[17]*Math.cos(2*i+h)+t.dc[18]*Math.cos(i-3*h)+t.dc[19]*Math.cos(2*i-h)+t.dc[20]*Math.cos(i-2*h)+t.dc[21]*Math.sin(2*i)+t.dc[22]*Math.sin(3*i+h)+t.dc[23]*Math.cos(2*c+e-h)*r+t.dc[24]*Math.cos(i-h)+t.dc[25]*Math.cos(3*h)+t.dc[26]*Math.sin(2*c+h)+t.dc[27]*Math.cos(i+3*h)+t.dc[28]*Math.cos(c+h)+t.dc[29]*Math.sin(2*i-h)+t.dc[30]*Math.cos(3*i+h)+t.dc[31]*Math.cos(2*(c+i)+h)+t.dc[32]*Math.sin(2*(c-i)-h)+t.dc[33]*Math.cos(2*i)+t.dc[34]*Math.cos(i)+t.dc[35]*Math.sin(2*h)+t.dc[36]*Math.sin(i+h);return{jde:u,dec:t.s*l}}const Qr={D:152.2029*J,m:14.8591*J,m_:4.6881*J,f:325.8867*J,JDE:24515625897e-4,s:1,tc:[.8975,-.4726,-.103,-.0976,-.0462,-.0461,-.0438,.0162,-.0157,.0145,.0136,-.0095,-.0091,-.0089,.0075,-.0068,.0061,-.0047,-.0043,-.004,-.0037,.0031,.003,-.0029,-.0029,-.0027,.0024,-.0021,.0019,.0018,.0018,.0017,.0017,-.0014,.0013,.0013,.0012,.0011,-.0011,.001,.001,-9e-4,7e-4,-7e-4],dc:[5.1093*J,.2658*J,.1448*J,-.0322*J,.0133*J,.0125*J,-.0124*J,-.0101*J,.0097*J,-.0087*J,.0074*J,.0067*J,.0063*J,.006*J,-.0057*J,-.0056*J,.0052*J,.0041*J,-.004*J,.0038*J,-.0034*J,-.0029*J,.0029*J,-.0028*J,-.0028*J,-.0023*J,-.0021*J,.0019*J,.0018*J,.0017*J,.0015*J,.0014*J,-.0012*J,-.0012*J,-.001*J,-.001*J,6e-4*J]},Zr={D:345.6676*J,m:1.3951*J,m_:186.21*J,f:145.1633*J,JDE:24515489289e-4,s:-1,tc:[-.8975,-.4726,-.103,-.0976,.0541,.0516,-.0438,.0112,.0157,.0023,-.0136,.011,.0091,.0089,.0075,-.003,-.0061,-.0047,-.0043,.004,-.0037,-.0031,.003,.0029,-.0029,-.0027,.0024,-.0021,-.0019,-6e-4,-.0018,-.0017,.0017,.0014,-.0013,-.0013,.0012,.0011,.0011,.001,.001,-9e-4,-7e-4,-7e-4],dc:[-5.1093*J,.2658*J,-.1448*J,.0322*J,.0133*J,.0125*J,-.0015*J,.0101*J,-.0097*J,.0087*J,.0074*J,.0067*J,-.0063*J,-.006*J,.0057*J,-.0056*J,-.0052*J,-.0041*J,-.004*J,-.0038*J,.0034*J,-.0029*J,.0029*J,.0028*J,-.0028*J,.0023*J,.0021*J,.0019*J,.0018*J,-.0017*J,.0015*J,.0014*J,.0012*J,-.0012*J,.001*J,-.001*J,.0037*J]},ta={north:Xr,south:Vr};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module moonnode
 */function na(s){return g1(s,0)}function sa(s){return g1(s,.5)}function g1(s,t){let n=(s-2000.05)*13.4223;n=Math.floor(n-t+.5)+t;const o=Math.PI/180,c=1/1342.23,e=n*c,i=a.horner(e,183.638*o,331.73735682*o/c,.0014852*o,209e-8*o,-1e-8*o),h=a.horner(e,17.4006*o,26.8203725*o/c,1186e-7*o,6e-8*o),r=a.horner(e,38.3776*o,355.52747313*o/c,.0123499*o,14627e-9*o,-69e-9*o),u=a.horner(e,123.9767*o,-1.44098956*o/c,.0020608*o,214e-8*o,-16e-9*o),l=a.horner(e,299.75*o,132.85*o,-.009173*o),M=u+272.75*o-2.3*o*e,f=a.horner(e,1,-.002516,-74e-7);return a.horner(e,24515651619e-4,27.212220817/c,2762e-7,21e-9,-88e-12)+-.4721*Math.sin(r)+-.1649*Math.sin(2*i)+-.0868*Math.sin(2*i-r)+.0084*Math.sin(2*i+r)+-.0083*Math.sin(2*i-h)*f+-.0039*Math.sin(2*i-h-r)*f+.0034*Math.sin(2*r)+-.0031*Math.sin(2*(i-r))+.003*Math.sin(2*i+h)*f+.0028*Math.sin(h-r)*f+.0026*Math.sin(h)*f+.0025*Math.sin(4*i)+.0024*Math.sin(i)+.0022*Math.sin(h+r)*f+.0017*Math.sin(u)+.0014*Math.sin(4*i-r)+5e-4*Math.sin(2*i+h-r)*f+4e-4*Math.sin(2*i-h+r)*f+-3e-4*Math.sin(2*(i-h))*f+3e-4*Math.sin(4*i-h)*f+3e-4*Math.sin(l)+3e-4*Math.sin(M)}const oa={ascending:na,descending:sa};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module parabolic
 */class ca{constructor(t,n){this.timeP=t,this.pDis=n}anomalyDistance(t){const o=3*a.K/Math.SQRT2*(t-this.timeP)/this.pDis/Math.sqrt(this.pDis)*.5,c=Math.cbrt(o+Math.sqrt(o*o+1)),e=c-1/c,i=2*Math.atan(e),h=this.pDis*(1+e*e);return{ano:i,dist:h}}}const ea={Elements:ca};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module sidereal
 */function D1(s){const[t,n]=a.modf(s+.5);return[a.J2000Century(t-.5),n]}const ws=[24110.54841,8640184812866e-6,.093104,-62e-7];function ia(s){return a.pmod(w1(s),86400)}function w1(s){const[t,n]=y1(s);return t+n*1.00273790935*86400}function ra(s){const[t,n]=y1(s);return a.pmod(t,86400)}function y1(s){const[t,n]=D1(s);return[a.horner(t,...ws),n]}function aa(s){const t=w1(s),o=r0.nutationInRA(s)*3600*180/Math.PI/15;return a.pmod(t+o,86400)}function ha(s){const[t,n]=a.modf(s+.5),o=(t-.5-a.J2000)/36525,c=a.horner(o,...ws)+n*1.00273790935*86400,i=r0.nutationInRA(t)*3600*180/Math.PI/15;return a.pmod(c+i,86400)}const yt={JDToCFrac:D1,iau82:ws,mean:ia,mean0UT:ra,apparent:aa,apparent0UT:ha};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module parallax
 */const ua=8.794/3600*Math.PI/180;function gn(s){return Math.asin(Math.sin(ua)/s)}function la(s,t,n,o,c){const[e,i,h]=[s.ra,s.dec,s.range],r=gn(h),u=new c0.Time(yt.apparent(c)).rad(),l=a.pmod(u-o-e,2*Math.PI),M=Math.sin(r),[f,g]=a.sincos(l),[D,p]=a.sincos(i),m=Math.atan2(-n*M*f,p-n*M*g),I=e+m,y=Math.atan2((D-t*M)*Math.cos(m),p-n*M*g);return new an(I,y)}function Ma(s,t,n,o,c){const[e,i,h]=[s.ra,s.dec,s.range],r=gn(h),u=new c0.Time(yt.apparent(c)).rad(),l=a.pmod(u-o-e,2*Math.PI),[M,f]=a.sincos(l),[g,D]=a.sincos(i),p=-r*n*M/D,m=-r*(t*D-n*f*g);return new a.Coord(p,m)}function fa(s,t,n,o,c){const[e,i,h]=[s.ra,s.dec,s.range],r=gn(h),u=new c0.Time(yt.apparent(c)).rad(),l=a.pmod(u-o-e,2*Math.PI),M=Math.sin(r),[f,g]=a.sincos(l),[D,p]=a.sincos(i),m=p*f,I=p*g-n*M,y=D-t*M,w=Math.sqrt(m*m+I*I+y*y),P=Math.atan2(m,I),E=Math.asin(y/w);return[P,E]}function da(s,t,n,o,c,e,i){const[h,r]=[s.lon,s.lat],[u,l]=wo.Earth76.parallaxConstants(n,o),[M,f]=a.sincos(h),[g,D]=a.sincos(r),[p,m]=a.sincos(c),[I,y]=a.sincos(e),w=Math.sin(i),P=f*D-l*w*y;let E=Math.atan2(M*D-w*(u*p+l*m*I),P);E<0&&(E+=2*Math.PI);const x=Math.cos(E),A=Math.atan(x*(g-w*(u*m-l*p*I))/P),b=Math.asin(x*Math.cos(A)*Math.sin(t)/P);return[E,A,b]}const ma={horizontal:gn,topocentric:la,topocentric2:Ma,topocentric3:fa,topocentricEcliptical:da};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module parallactic
 */function pa(s,t,n){const[o,c]=a.sincos(t),[e,i]=a.sincos(n);return Math.atan2(e,Math.tan(s)*c-o*i)}function ga(s,t){return Math.acos(Math.sin(s)/Math.cos(t))}function Da(s,t,n){const[o,c]=a.sincos(s),[e,i]=a.sincos(t),[h,r]=a.sincos(n);let u=Math.atan2(-r,o*(e/i)+c*h);return u<0&&(u+=Math.PI),[u,u+Math.PI,Math.acos(c*e-o*i*h)]}function wa(s,t){return Math.atan(-Math.cos(s)*Math.tan(t))}function ya(s,t){const n=Math.tan(t),o=Math.tan(s)*n,c=Math.sqrt(1-o*o);return Math.atan(c*Math.cos(s)/n)}const Pa={parallacticAngle:pa,parallacticAngleOnHorizon:ga,eclipticAtHorizon:Da,eclipticAtEquator:wa,diurnalPathAtHorizon:ya};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module perihelion
 */const W0={mercury:0,venus:1,earth:2,mars:3,jupiter:4,saturn:5,uranus:6,neptune:7,embary:8},ba=W0.mercury,Aa=W0.venus,Hn=W0.earth,Ia=W0.mars,Ea=W0.jupiter,Ta=W0.saturn,La=W0.uranus,P1=W0.neptune,b1=W0.embary;function Ja(s,t){return ys(s,t,!1,A1)}function Ca(s,t){return ys(s,t,!0,I1)}const A1=function(s){return Math.floor(s+.5)},I1=function(s){return Math.floor(s)+.5},ys=function(s,t,n,o){let c=s;c===b1&&(c=Hn);const e=o(Hs[c].a*(t-Hs[c].b));let i=a.horner(e,...xa[c]);if(s===Hn){let h=$a;n&&(h=Sa);for(let r=0;r<5;r++)i+=h[r]*Math.sin((zs[r].a+zs[r].b*e)*Math.PI/180)}return i},Hs=[{a:4.15201,b:2000.12},{a:1.62549,b:2000.53},{a:.99997,b:2000.01},{a:.53166,b:2001.78},{a:.0843,b:2011.2},{a:.03393,b:2003.52},{a:.0119,b:2051.1},{a:.00607,b:2047.5}],xa=[[2451590257e-3,87.96934963],[2451738233e-3,224.7008188,-327e-10],[2451547507e-3,365.2596358,156e-10],[2452195026e-3,686.9957857,-1187e-10],[2455636936e-3,4332.897065,1367e-7],[245283012e-2,10764.21676,827e-6],[24702135e-1,30694.8767,-.00541],[24688951e-1,60190.33,.03429]],zs=[{a:328.41,b:132.788585},{a:316.13,b:584.903153},{a:346.2,b:450.380738},{a:136.95,b:659.306737},{a:249.52,b:329.653368}],$a=[1.278,-.055,-.091,-.056,-.045],Sa=[-1.352,.061,.062,.029,.031];function qa(s,t,n,o){return E1(W0[s.name],t,n,s,!1,A1,o)}function va(s,t,n,o){return E1(W0[s.name],t,n,s,!0,I1,o)}const E1=function(s,t,n,o,c,e,i){const h=ys(s,t,c,e);if(s!==P1)return Ct(h,n,c,o,i);if(i)Ct(h-5e3,n,c,o,([r,u])=>{Ct(h+5e3,n,c,o,([l,M])=>{if(u>M===c){i([r,u]);return}i([l,M])})});else{const[r,u]=Ct(h-5e3,n,c,o),[l,M]=Ct(h+5e3,n,c,o);return u>M===c?[r,u]:[l,M]}},Ct=function(s,t,n,o,c){let e=s-t,i=s+t;const h=new Array(3);h[1]=o.position2000(s).range,h[0]=o.position2000(e).range,h[2]=o.position2000(i).range;function r(){const l=new x0.Len3(e,i,h),[M,f]=l.extremum();return[M,f]}function u(){if(n){if(h[1]>h[0]&&h[1]>h[2])return c&&c(r()),!0}else if(h[1]<h[0]&&h[1]<h[2])return c&&c(r()),!0;h[0]<h[2]===n?(e=s,s=i,i+=t,h[0]=h[1],h[1]=h[2],h[2]=o.position2000(i).range):(i=s,s=e,e-=t,h[2]=h[1],h[1]=h[0],h[0]=o.position2000(e).range),c&&setImmediate(u,0)}if(c)u();else for(;;)if(u())return r()},Wa={mercury:ba,venus:Aa,earth:Hn,mars:Ia,jupiter:Ea,saturn:Ta,uranus:La,neptune:P1,embary:b1,perihelion:Ja,aphelion:Ca,perihelion2:qa,aphelion2:va};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module planetary
 */function Ot(s,t){const n=Math.floor((365.2425*s+1721060-t.A)/t.B+.5),o=t.A+n*t.B,c=a.pmod(t.M0+n*t.M1,360)*Math.PI/180,e=a.J2000Century(o);return[o,c,e]}function Pt(s,t,n){let o=a.horner(s,n[0]),c=0;for(let e=1;e<n.length;e++){c+=t;const[i,h]=a.sincos(c);o+=i*a.horner(s,n[e]),e++,o+=h*a.horner(s,n[e])}return o}function Yt(s,t,n){const[o,c,e]=Ot(s,t);return o+Pt(e,c,n)}function _a(s){return Yt(s,Dn,c3)}function Na(s){return Yt(s,Ga,e3)}function Ra(s){return Yt(s,Ka,i3)}function ka(s){return Yt(s,L1,r3)}function T1(s,t,n,o){let c=n.length-2*o.length,e=Pt(s,t,n.slice(0,c));for(let i=0;i<o.length;i++){const[h,r]=a.sincos((o[i].c+o[i].f*s)*Math.PI/180);e+=h*a.horner(s,n[c]),c++,e+=r*a.horner(s,n[c]),c++}return e}function bt(s,t,n,o){const[c,e,i]=Ot(s,t);return c+T1(i,e,n,o)}function Ba(s){return bt(s,Xa,a3,n3)}function Ha(s){return bt(s,Va,h3,J1)}function za(s){return bt(s,Qa,u3,J1)}function Fa(s){return bt(s,Za,l3,s3)}function Oa(s){return bt(s,t3,M3,o3)}function Ps(s,t,n,o){const[c,e,i]=Ot(s,Dn);return[c+Pt(i,e,n),Pt(i,e,o)*Math.PI/180]}function Ya(s){return Ps(s,Dn,f3,d3)}function ja(s){return Ps(s,Dn,m3,p3)}function Ua(s){const[t,n,o]=Ot(s,L1);return t+Pt(o,n,g3)}function U0(s,t,n,o){this.A=s,this.B=t,this.M0=n,this.M1=o}const Dn=new U0(2451612023e-3,115.8774771,63.5867,114.2088742),Ga=new U0(2451554084e-3,115.8774771,6.4822,114.2088742),Ka=new U0(2451996706e-3,583.921361,82.7311,215.513058),L1=new U0(2452097382e-3,779.936104,181.9573,48.705244),Xa=new U0(2451870628e-3,398.884046,318.4681,33.140229),Va=new U0(245187017e-2,378.091904,318.0172,12.647487),Qa=new U0(2451681124e-3,378.091904,131.6934,12.647487),Za=new U0(2451764317e-3,369.656035,213.6884,4.333093),t3=new U0(2451753122e-3,367.486703,202.6544,2.194998);function z0(s,t){this.c=s,this.f=t}const n3=[new z0(82.74,40.76)],J1=[new z0(82.74,40.76),new z0(29.86,1181.36),new z0(14.13,590.68),new z0(220.02,1262.87)],s3=[new z0(207.83,8.51),new z0(108.84,419.96)],o3=[new z0(207.83,8.51),new z0(276.74,209.98)],c3=[[.0545,2e-4],[-6.2008,.0074,3e-5],[-3.275,-.0197,1e-5],[.4737,-.0052,-1e-5],[.8111,.0033,-2e-5],[.0037,.0018],[-.1768,0,1e-5],[-.0211,-4e-4],[.0326,-3e-4],[.0083,1e-4],[-.004,1e-4]],e3=[[-.0548,-2e-4],[7.3894,-.01,-3e-5],[3.22,.0197,-1e-5],[.8383,-.0064,-1e-5],[.9666,.0039,-3e-5],[.077,-.0026],[.2758,2e-4,-2e-5],[-.0128,-8e-4],[.0734,-4e-4,-1e-5],[-.0122,-2e-4],[.0173,-2e-4]],i3=[[-.0096,2e-4,-1e-5],[2.0009,-.0033,-1e-5],[.598,-.0104,1e-5],[.0967,-.0018,-3e-5],[.0913,9e-4,-2e-5],[.0046,-2e-4],[.0079,1e-4]],r3=[[-.3088,0,2e-5],[-17.6965,.0363,5e-5],[18.3131,.0467,-6e-5],[-.2162,-.0198,-1e-5],[-4.5028,-.0019,7e-5],[.8987,.0058,-2e-5],[.7666,-.005,-3e-5],[-.3636,-1e-4,2e-5],[.0402,.0032],[.0737,-8e-4],[-.098,-.0011]],a3=[[-.1029,0,-9e-5],[-1.9658,-.0056,7e-5],[6.1537,.021,-6e-5],[-.2081,-.0013],[-.1116,-.001],[.0074,1e-4],[-.0097,-1e-4],[0,.0144,-8e-5],[.3642,-.0019,-29e-5]],h3=[[-.0209,6e-4,23e-5],[4.5795,-.0312,-17e-5],[1.1462,-.0351,11e-5],[.0985,-.0015],[.0733,-.0031,1e-5],[.0025,-1e-4],[.005,-2e-4],[0,-.0337,18e-5],[-.851,.0044,68e-5],[0,-.0064,4e-5],[.2397,-.0012,-8e-5],[0,-.001],[.1245,6e-4],[0,.0024,-3e-5],[.0477,-5e-4,-6e-5]],u3=[[.0172,-6e-4,23e-5],[-8.5885,.0411,2e-4],[-1.147,.0352,-11e-5],[.3331,-.0034,-1e-5],[.1145,-.0045,2e-5],[-.0169,2e-4],[-.0109,4e-4],[0,-.0337,18e-5],[-.851,.0044,68e-5],[0,-.0064,4e-5],[.2397,-.0012,-8e-5],[0,-.001],[.1245,6e-4],[0,.0024,-3e-5],[.0477,-5e-4,-6e-5]],l3=[[.0844,-6e-4],[-.1048,.0246],[-5.1221,.0104,3e-5],[-.1428,5e-4],[-.0148,-.0013],[0],[.0055],[0],[.885],[0],[.2153]],M3=[[-.014,0,1e-5],[-1.3486,.001,1e-5],[.8597,.0037],[-.0082,-2e-4,1e-5],[.0037,-3e-4],[0],[-.5964],[0],[.0728]],f3=[[-21.6106,2e-4],[-1.9803,-.006,1e-5],[1.4151,-.0072,-1e-5],[.5528,-5e-4,-1e-5],[.2905,.0034,1e-5],[-.1121,-1e-4,1e-5],[-.0098,-.0015],[.0192],[.0111,4e-4],[-.0061],[-.0032,-1e-4]],d3=[[22.4697],[-4.2666,.0054,2e-5],[-1.8537,-.0137],[.3598,8e-4,-1e-5],[-.068,.0026],[-.0524,-3e-4],[.0052,-6e-4],[.0107,1e-4],[-.0013,1e-4],[-.0021],[3e-4]],m3=[[21.6249,-2e-4],[.1306,.0065],[-2.7661,-.0011,1e-5],[.2438,-.0024,-1e-5],[.5767,.0023],[.1041],[-.0184,7e-4],[-.0051,-1e-4],[.0048,1e-4],[.0026],[.0037]],p3=[[22.4143,-1e-4],[4.3651,-.0048,-2e-5],[2.3787,.0121,-1e-5],[.2674,.0022],[-.3873,8e-4,1e-5],[-.0369,-1e-4],[.0017,-1e-4],[.0059],[.0061,1e-4],[7e-4],[-.0011]],g3=[[36.7191,.0016,3e-5],[-12.6163,.0417,-1e-5],[20.1218,.0379,-6e-5],[-1.636,-.019],[-3.9657,.0045,7e-5],[1.1546,.0029,-3e-5],[.2888,-.0073,-2e-5],[-.3128,.0017,2e-5],[.2513,.0026,-2e-5],[-.0021,-.0016],[-.1497,-6e-4]],D3={mean:Ot,sum:Pt,ms:Yt,mercuryInfConj:_a,mercurySupConj:Na,venusInfConj:Ra,marsOpp:ka,sumA:T1,msa:bt,jupiterOpp:Ba,saturnOpp:Ha,saturnConj:za,uranusOpp:Fa,neptuneOpp:Oa,el:Ps,mercuryEastElongation:Ya,mercuryWestElongation:ja,marsStation2:Ua};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module pluto
 */function C1(s){let t=0,n=0,o=0;const c=a.J2000Century(s),e=34.35+3034.9057*c,i=50.08+1222.1138*c,h=238.96+144.96*c;for(const r in Fs){const u=Fs[r],[l,M]=a.sincos((u.i*e+u.j*i+u.k*h)*Math.PI/180);t+=u.lA*l+u.lB*M,n+=u.bA*l+u.bB*M,o+=u.rA*l+u.rB*M}return t=(t+238.958116+144.96*c)*Math.PI/180,n=(n-3.908239)*Math.PI/180,o+=40.7241346,{lon:t,lat:n,range:o}}function w3(s,t){const n=a.SOblJ2000,o=a.COblJ2000,c=function(i){const{lon:h,lat:r,range:u}=C1(i),[l,M]=a.sincos(h),[f,g]=a.sincos(r),D=u*M*g,p=u*(l*g*o-f*n),m=u*(l*g*n+f*o);return{x:D,y:p,z:m}},e=mt.astrometricJ2000(c,s,t);return new a.Coord(e.ra,e.dec)}function V(s,t,n,o,c,e,i,h,r){this.i=s,this.j=t,this.k=n,this.lA=o,this.lB=c,this.bA=e,this.bB=i,this.rA=h,this.rB=r}const Fs=[new V(0,0,1,-19.799805,19.850055,-5.452852,-14.974862,6.6865439,6.8951812),new V(0,0,2,.897144,-4.954829,3.527812,1.67279,-1.1827535,-.0332538),new V(0,0,3,.611149,1.211027,-1.050748,.327647,.1593179,-.143889),new V(0,0,4,-.341243,-.189585,.17869,-.292153,-.0018444,.048322),new V(0,0,5,.129287,-.034992,.01865,.10034,-.0065977,-.0085431),new V(0,0,6,-.038164,.030893,-.030697,-.025823,.0031174,-6032e-7),new V(0,1,-1,.020442,-.009987,.004878,.011248,-5794e-7,.0022161),new V(0,1,0,-.004063,-.005071,226e-6,-64e-6,4601e-7,4032e-7),new V(0,1,1,-.006016,-.003336,.00203,-836e-6,-1729e-7,234e-7),new V(0,1,2,-.003956,.003039,69e-6,-604e-6,-415e-7,702e-7),new V(0,1,3,-667e-6,.003572,-247e-6,-567e-6,239e-7,723e-7),new V(0,2,-2,.001276,501e-6,-57e-6,1e-6,67e-7,-67e-7),new V(0,2,-1,.001152,-917e-6,-122e-6,175e-6,1034e-7,-451e-7),new V(0,2,0,63e-5,-.001277,-49e-6,-164e-6,-129e-7,504e-7),new V(1,-1,0,.002571,-459e-6,-197e-6,199e-6,48e-6,-231e-7),new V(1,-1,1,899e-6,-.001449,-25e-6,217e-6,2e-7,-441e-7),new V(1,0,-3,-.001016,.001043,589e-6,-248e-6,-3359e-7,265e-7),new V(1,0,-2,-.002343,-.001012,-269e-6,711e-6,7856e-7,-7832e-7),new V(1,0,-1,.007042,788e-6,185e-6,193e-6,36e-7,.0045763),new V(1,0,0,.001199,-338e-6,315e-6,807e-6,8663e-7,8547e-7),new V(1,0,1,418e-6,-67e-6,-13e-5,-43e-6,-809e-7,-769e-7),new V(1,0,2,12e-5,-274e-6,5e-6,3e-6,263e-7,-144e-7),new V(1,0,3,-6e-5,-159e-6,2e-6,17e-6,-126e-7,32e-7),new V(1,0,4,-82e-6,-29e-6,2e-6,5e-6,-35e-7,-16e-7),new V(1,1,-3,-36e-6,-29e-6,2e-6,3e-6,-19e-7,-4e-7),new V(1,1,-2,-4e-5,7e-6,3e-6,1e-6,-15e-7,8e-7),new V(1,1,-1,-14e-6,22e-6,2e-6,-1e-6,-4e-7,12e-7),new V(1,1,0,4e-6,13e-6,1e-6,-1e-6,5e-7,6e-7),new V(1,1,1,5e-6,2e-6,0,-1e-6,3e-7,1e-7),new V(1,1,3,-1e-6,0,0,0,6e-7,-2e-7),new V(2,0,-6,2e-6,0,0,-2e-6,2e-7,2e-7),new V(2,0,-5,-4e-6,5e-6,2e-6,2e-6,-2e-7,-2e-7),new V(2,0,-4,4e-6,-7e-6,-7e-6,0,14e-7,13e-7),new V(2,0,-3,14e-6,24e-6,1e-5,-8e-6,-63e-7,13e-7),new V(2,0,-2,-49e-6,-34e-6,-3e-6,2e-5,136e-7,-236e-7),new V(2,0,-1,163e-6,-48e-6,6e-6,5e-6,273e-7,1065e-7),new V(2,0,0,9e-6,-24e-6,14e-6,17e-6,251e-7,149e-7),new V(2,0,1,-4e-6,1e-6,-2e-6,0,-25e-7,-9e-7),new V(2,0,2,-3e-6,1e-6,0,0,9e-7,-2e-7),new V(2,0,3,1e-6,3e-6,0,0,-8e-7,7e-7),new V(3,0,-2,-3e-6,-1e-6,0,1e-6,2e-7,-1e-6),new V(3,0,-1,5e-6,-3e-6,0,0,19e-7,35e-7),new V(3,0,0,0,0,1e-6,0,1e-6,3e-7)],y3={heliocentric:C1,astrometric:w3};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module refraction
 */const{sin:P3,tan:wn}=Math,v0=Math.PI/180,b3=new c0.Angle(!1,0,0,58.294).rad(),A3=new c0.Angle(!1,0,0,.0668).rad(),I3=new c0.Angle(!1,0,0,58.276).rad(),E3=new c0.Angle(!1,0,0,.0824).rad();function T3(s){const t=wn(Math.PI/2-s);return b3*t-A3*t*t*t}function L3(s){const t=wn(Math.PI/2-s);return I3*t-E3*t*t*t}function x1(s){const t=v0/60,n=7.31*v0*v0,o=4.4*v0;return t/wn(s+n/(s+o))}function J3(s){const t=60/v0,n=.06/t,o=14.7*t*v0,c=13*v0,e=x1(s);return e-n*P3(o*e+c)}function C3(s){const t=1.02*v0/60,n=10.3*v0*v0,o=5.11*v0;return t/wn(s+n/(s+o))}const x3={gt15True:T3,gt15Apparent:L3,bennett:x1,bennett2:J3,saemundsson:C3};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module rise
 */const{acos:$3,asin:S3,cos:qt,sin:vt}=Math,bs=240,B0=86400,zn=Math.PI/180,$1=a.errorCode("always above horizon",-1),S1=a.errorCode("always below horizon",1),yn=new c0.Angle(!1,0,34,0).rad(),jt={stellar:-yn,solar:new c0.Angle(!0,0,50,0).rad(),lunar:c0.angleFromDeg(.7275),lunarMean:c0.angleFromDeg(.125)};function Pn(s,t){return t?s-yn-t:s}const As=s=>Pn(jt.stellar,s),q3=As(),q1=s=>Pn(jt.solar,s),v3=q1(),v1=s=>jt.lunarMean-Pn(s),W3=v1(),W1=(s,t)=>jt.lunar*s-(t||yn),_3=W1;function _1(s,t,n){const o=(vt(t)-vt(s)*vt(n))/(qt(s)*qt(n));if(o<-1)throw $1;if(o>1)throw S1;return $3(o)}function Fn(s,t,n){return(s+t)*bs*180/Math.PI-n}function Os(s,t){return a.pmod(s+t*360.985647/360,B0)}function N1(s){const t=[s.rise,s.transit,s.set];return t.rise=s.rise,t.transit=s.transit,t.set=s.set,t}function Is(s,t,n,o,c){const e=_1(s.lat,t,c)*bs*180/Math.PI,i=Fn(s.lon,o,n),h={};return h.transit=a.pmod(i,B0),h.rise=a.pmod(i-e,B0),h.set=a.pmod(i+e,B0),N1(h)}function R1(s,t,n,o,c,e){const i=Is(s,n,o,c[1],e[1]),h=new x0.Len3(-B0,B0,c),r=new x0.Len3(-B0,B0,e),u=i.transit+t,l=h.interpolateX(u),M=Os(o,i.transit),f=-1*Fn(s.lon,l,M);i.transit-=f;const[g,D]=a.sincos(s.lat),p=function(m){const I=m+t,y=h.interpolateX(I),w=r.interpolateX(I),P=Os(o,m),x=-1*Fn(s.lon,y,P)/bs*zn,A=S3(g*vt(w)+D*qt(w)*qt(x)),b=B0*(A-n)/(qt(w)*D*vt(x)*2*Math.PI);return m+b};return i.rise=p(i.rise),i.set=p(i.set),N1(i)}class N3{constructor(t,n,o,c,e,i){this.opts=i||{},this.refraction=this.opts.refraction||As(),t instanceof Date&&(t=new F0.Calendar().fromDate(t).toJD()),this.jd=Math.floor(t-.5)+.5,this.lat=n*zn,this.lon=o*zn;const h=new F0.Calendar().fromJD(this.jd);this.jde=h.toJDE(),this.ΔT=St.deltaT(h.toYear()),this.earth=c,this.planet=e}approxTimes(){const t=mt.position(this.planet,this.earth,this.jde),n=yt.apparent0UT(this.jd),o=Is({lat:this.lat,lon:this.lon},this.refraction,n,t.ra,t.dec);return this._rsToJD(o)}times(){const t=[mt.position(this.planet,this.earth,this.jde-1),mt.position(this.planet,this.earth,this.jde),mt.position(this.planet,this.earth,this.jde+1)],n=yt.apparent0UT(this.jd),o=R1({lat:this.lat,lon:this.lon},this.ΔT,this.refraction,n,this._toArr(t,"ra"),this._toArr(t,"dec"));return this._rsToJD(o)}_toArr(t,n){return t.map(o=>o[n])}_rsToJD(t){return{rise:this._toJD(t.rise),transit:this._toJD(t.transit),set:this._toJD(t.set)}}_toJD(t){const n=this.jd+t/86400;return this.opts.date?new F0.Calendar().fromJD(n).toDate():n}}const nt={errorAboveHorizon:$1,errorBelowHorizon:S1,meanRefraction:yn,stdh0:jt,refraction:Pn,stdh0Stellar:As,Stdh0Stellar:q3,stdh0Solar:q1,Stdh0Solar:v3,stdh0LunarMean:v1,Stdh0LunarMean:W3,stdh0Lunar:W1,Stdh0Lunar:_3,hourAngle:_1,approxTimes:Is,times:R1,PlanetRise:N3};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module saturnmoons
 */const R3=0,k3=1,B3=2,H3=3,z3=4,F3=5,O3=6,Y3=7;function j3(s,t){this.x=s,this.y=t}const d=Math.PI/180;function U3(s,t,n){const o=C0.trueVSOP87(t,s),[c,e,i]=[o.lon,o.lat,o.range],[h,r]=a.sincos(c),u=Math.sin(e);let l=9,M,f,g=0,D;const p=function(){const W=a.lightTime(l);D=s-W;const{lon:e0,lat:L,range:$}=n.position(D),q=O0.toFK5(e0,L,D),[F,R]=[q.lon,q.lat],[K,U]=a.sincos(F),[X,s0]=a.sincos(R);M=$*s0*U+i*r,f=$*s0*K+i*h,g=$*X+i*u,l=Math.sqrt(M*M+f*f+g*g)};p(),p();let m=Math.atan2(f,M),I=Math.atan(g/Math.hypot(M,f)),y=new $0.Ecliptic(m,I);y=Dt.eclipticPosition(y,a.JDEToJulianYear(s),a.JDEToJulianYear(a.B1950)),m=y.lon,I=y.lat;const w=new _0(D),P=[new At,w.mimas(),w.enceladus(),w.tethys(),w.dione(),w.rhea(),w.titan(),w.hyperion(),w.iapetus()],E=new Array(9).fill(0),x=new Array(9).fill(0),A=new Array(9).fill(0);for(let W=1;W<=8;W++){const e0=P[W].λ-P[W].Ω,L=P[W].Ω-168.8112*d,[$,q]=a.sincos(e0),[F,R]=a.sincos(L),[K,U]=a.sincos(P[W].γ),X=P[W].r;E[W]=X*(q*R-$*U*F),x[W]=X*($*R*U+q*F),A[W]=X*$*K}A[0]=1;const[b,_]=a.sincos(m),[T,z]=a.sincos(I),N=new Array(9).fill(0),O=new Array(9).fill(0),Q=new Array(9).fill(0);for(const W in E){let e0=E[W],L=w.c1*x[W]-w.s1*A[W];const $=w.s1*x[W]+w.c1*A[W],q=w.c2*e0-w.s2*L;L=w.s2*e0+w.c2*L,e0=q,N[W]=e0*b-L*_,L=e0*_+L*b,O[W]=L*z+$*T,Q[W]=$*z-L*T}const Y=new Array(9),t0=Math.atan2(N[0],Q[0]),[Z,o0]=a.sincos(t0);for(let W=1;W<=8;W++){E[W]=N[W]*o0-Q[W]*Z,x[W]=N[W]*Z+Q[W]*o0,A[W]=O[W];const e0=E[W]/P[W].r;E[W]+=Math.abs(A[W])/G3[W]*Math.sqrt(1-e0*e0);const L=l/(l+A[W]/2475);Y[W-1]=new j3(E[W]*L,x[W]*L)}return Y}const G3=[0,20947,23715,26382,29876,35313,53800,59222,91820];function At(s,t,n,o){this.λ=s||0,this.r=t||0,this.γ=n||0,this.Ω=o||0}function _0(s){return this.t1=s-2411093,this.t2=this.t1/365.25,this.t3=(s-2433282423e-3)/365.25+1950,this.t4=s-2411368,this.t5=this.t4/365.25,this.t6=s-2415020,this.t7=this.t6/36525,this.t8=this.t6/365.25,this.t9=(s-24420005e-1)/365.25,this.t10=s-2409786,this.t11=this.t10/36525,this.W0=5.095*d*(this.t3-1866.39),this.W1=74.4*d+32.39*d*this.t2,this.W2=134.3*d+92.62*d*this.t2,this.W3=42*d-.5118*d*this.t5,this.W4=276.59*d+.5118*d*this.t5,this.W5=267.2635*d+1222.1136*d*this.t7,this.W6=175.4762*d+1221.5515*d*this.t7,this.W7=2.4891*d+.002435*d*this.t7,this.W8=113.35*d-.2597*d*this.t7,this.s1=Math.sin(28.0817*d),this.c1=Math.cos(28.0817*d),this.s2=Math.sin(168.8112*d),this.c2=Math.cos(168.8112*d),this.e1=.05589-346e-6*this.t7,this.sW0=Math.sin(this.W0),this.s3W0=Math.sin(3*this.W0),this.s5W0=Math.sin(5*this.W0),this.sW1=Math.sin(this.W1),this.sW2=Math.sin(this.W2),this.sW3=Math.sin(this.W3),this.cW3=Math.cos(this.W3),this.sW4=Math.sin(this.W4),this.cW4=Math.cos(this.W4),this.sW7=Math.sin(this.W7),this.cW7=Math.cos(this.W7),this}_0.prototype.mimas=function(){const s=new At,t=127.64*d+381.994497*d*this.t1-43.57*d*this.sW0-.72*d*this.s3W0-.02144*d*this.s5W0,n=106.1*d+365.549*d*this.t2,o=t-n,c=2.18287*d*Math.sin(o)+.025988*d*Math.sin(2*o)+43e-5*d*Math.sin(3*o);return s.λ=t+c,s.r=3.06879/(1+.01905*Math.cos(o+c)),s.γ=1.563*d,s.Ω=54.5*d-365.072*d*this.t2,s};_0.prototype.enceladus=function(){const s=new At,t=200.317*d+262.7319002*d*this.t1+.25667*d*this.sW1+.20883*d*this.sW2,n=309.107*d+123.44121*d*this.t2,o=t-n,c=.55577*d*Math.sin(o)+.00168*d*Math.sin(2*o);return s.λ=t+c,s.r=3.94118/(1+.00485*Math.cos(o+c)),s.γ=.0262*d,s.Ω=348*d-151.95*d*this.t2,s};_0.prototype.tethys=function(){const s=new At;return s.λ=285.306*d+190.69791226*d*this.t1+2.063*d*this.sW0+.03409*d*this.s3W0+.001015*d*this.s5W0,s.r=4.880998,s.γ=1.0976*d,s.Ω=111.33*d-72.2441*d*this.t2,s};_0.prototype.dione=function(){const s=new At,t=254.712*d+131.53493193*d*this.t1-.0215*d*this.sW1-.01733*d*this.sW2,n=174.8*d+30.82*d*this.t2,o=t-n,c=.24717*d*Math.sin(o)+33e-5*d*Math.sin(2*o);return s.λ=t+c,s.r=6.24871/(1+.002157*Math.cos(o+c)),s.γ=.0139*d,s.Ω=232*d-30.27*d*this.t2,s};_0.prototype.rhea=function(){const s=342.7*d+10.057*d*this.t2,[t,n]=a.sincos(s),o=265e-6*t+.001*this.sW4,c=265e-6*n+.001*this.cW4,e=Math.hypot(o,c),i=Math.atan2(o,c),h=345*d-10.057*d*this.t2,[r,u]=a.sincos(h),l=359.244*d+79.6900472*d*this.t1+.086754*d*r,M=28.0362*d+.346898*d*u+.0193*d*this.cW3,f=168.8034*d+.736936*d*r+.041*d*this.sW3;return this.subr(l,i,e,8.725924,f,M)};_0.prototype.subr=function(s,t,n,o,c,e){const i=new At,h=s-t,r=n*n,u=r*n,l=r*r,M=u*r,f=(2*n-.25*u+.0520833333*M)*Math.sin(h)+(1.25*r-.458333333*l)*Math.sin(2*h)+(1.083333333*u-.671875*M)*Math.sin(3*h)+1.072917*l*Math.sin(4*h)+1.142708*M*Math.sin(5*h);i.r=o*(1-r)/(1+n*Math.cos(h+f));const g=c-168.8112*d,[D,p]=a.sincos(e),[m,I]=a.sincos(g),y=D*m,w=this.c1*D*I-this.s1*p;i.γ=Math.asin(Math.hypot(y,w));const P=Math.atan2(y,w);i.Ω=168.8112*d+P;const E=this.c1*D-this.s1*p*I,x=Math.atan2(this.s1*m,E);return i.λ=s+f+P-g-x,i};_0.prototype.titan=function(){const s=261.1582*d+22.57697855*d*this.t4+.074025*d*this.sW3,t=27.45141*d+.295999*d*this.cW3,n=168.66925*d+.628808*d*this.sW3,[o,c]=a.sincos(t),[e,i]=a.sincos(n-this.W8),h=this.sW7*e,r=this.cW7*o-this.sW7*c*i,u=102.8623*d,l=Math.atan2(h,r),M=Math.hypot(h,r);let f=this.W4-n-l,g=0;const[D,p]=a.sincos(2*u),m=()=>{g=this.W4+.37515*d*(Math.sin(2*f)-D),f=g-n-l};m(),m(),m();const I=.029092+19048e-8*(Math.cos(2*f)-p),y=2*(this.W5-g),w=o*e,P=this.cW7*o*i-this.sW7*c,E=Math.atan2(w,P)+this.W8,[x,A]=a.sincos(y),b=I+.002778797*I*A,_=g+.159215*d*x,T=2*this.W5-2*E+l,[z,N]=a.sincos(T),O=.9375*I*I*x+.1875*M*M*Math.sin(2*(this.W5-E)),Q=s-.254744*d*(this.e1*Math.sin(this.W6)+.75*this.e1*this.e1*Math.sin(2*this.W6)+O),Y=t+.031843*d*M*N,t0=n+.031843*d*M*z/o;return this.subr(Q,_,b,20.216193,t0,Y)};_0.prototype.hyperion=function(){const s=92.39*d+.5621071*d*this.t6,t=148.19*d-19.18*d*this.t8,n=184.8*d-35.41*d*this.t9,o=n-7.5*d,c=176*d+12.22*d*this.t8,e=8*d+24.44*d*this.t8,i=e+5*d,h=69.898*d-18.67088*d*this.t8,r=2*(h-this.W5),u=94.9*d-2.292*d*this.t8,[l,M]=a.sincos(s),[f,g]=a.sincos(t),[D,p]=a.sincos(2*t),[m,I]=a.sincos(3*t),[y,w]=a.sincos(t+s),[P,E]=a.sincos(t-s),[x,A]=a.sincos(r),[b,_]=a.sincos(u),[T,z]=a.sincos(i),N=24.50601-.08686*M-.00166*w+.00175*E,O=.103458-.004099*M-167e-6*w+235e-6*E+.02303*g-.00212*p+151e-6*I+13e-5*A,Q=h+.15648*d*b-.4457*d*l-.2657*d*y-.3573*d*P-12.872*d*f+1.668*d*D-.2419*d*m-.07*d*x,Y=177.047*d+16.91993829*d*this.t6+.15648*d*b+9.142*d*l+.007*d*Math.sin(2*s)-.014*d*Math.sin(3*s)+.2275*d*y+.2112*d*P-.26*d*f-.0098*d*D-.013*d*Math.sin(c)+.017*d*Math.sin(e)-.0303*d*x,t0=27.3347*d+.6434886*d*_+.315*d*this.cW3+.018*d*Math.cos(n)-.018*d*z,Z=168.6812*d+1.40136*d*_+.68599*d*this.sW3-.0392*d*T+.0366*d*Math.sin(o);return this.subr(Y,Q,O,N,Z,t0)};_0.prototype.iapetus=function(){const s=261.1582*d+22.57697855*d*this.t4,t=91.796*d+.562*d*this.t7,n=4.367*d-.195*d*this.t7,o=146.819*d-3.198*d*this.t7,c=60.47*d+1.521*d*this.t7,e=205.055*d-2.091*d*this.t7,i=.028298+.001156*this.t11,h=352.91*d+11.71*d*this.t11,r=76.3852*d+4.53795125*d*this.t10,u=a.horner(this.t11,18.4602*d,-.9518*d,-.072*d,.0054*d),l=a.horner(this.t11,143.198*d,-3.919*d,.116*d,.008*d),M=r-h,f=h-l-n,g=h-l-c,D=this.W5-t,p=t-o,m=s-this.W4,I=this.W4-e,y=2*(M+f-D-p),w=M+g-m-I,P=M+2*(f-D-p),E=m+I-g,x=2*(D+p),[A,b]=a.sincos(M),[_,T]=a.sincos(y),[z,N]=a.sincos(w),[O,Q]=a.sincos(P),[Y,t0]=a.sincos(E),[Z,o0]=a.sincos(M+w),[W,e0]=a.sincos(g-I),[L,$]=a.sincos(x-2*f),[q,F]=a.sincos(x+n),[R,K]=a.sincos(w+c),[U,X]=a.sincos(M+g+m+I+c),s0=58.935028+.004638*T+.058222*N,a0=i-.0014097*e0+3733e-7*$+118e-6*Q+2408e-7*b+2849e-7*o0+619e-6*t0,f0=.08077*d*W+.02139*d*L-.00676*d*O+.0138*d*A+.01632*d*Z+.03547*d*Y,d0=h+f0/i,w0=r-.04299*d*z-.00789*d*_-.06312*d*Math.sin(D)-.00295*d*Math.sin(2*D)-.02231*d*Math.sin(x)+.0065*d*q,u0=u+.04204*d*F+.00235*d*X+.0036*d*K,l0=.04204*d*q+.00235*d*U+.00358*d*R,p0=l+l0/Math.sin(u);return this.subr(w0,d0,a0,s0,p0,u0)};const K3={mimas:R3,enceladus:k3,tethys:B3,dione:H3,rhea:z3,titan:F3,hyperion:O3,iapetus:Y3,positions:U3,Qs:_0};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module saturnring
 */function X3(s,t,n){const[o,c]=k1(s,t,n),[e,i]=o(),[h,r,u,l]=c();return[i,h,e,r,u,l]}function V3(s,t,n){const[o,c]=k1(s,t,n);return o()}function k1(s,t,n){const o=Math.PI/180;let c,e,i,h,r,u=9,l,M,f,g,D,p,m,I,y,w,P;return[function(){const A=a.J2000Century(s);c=a.horner(A,28.075216*o,-.012998*o,4e-6*o),e=a.horner(A,169.50847*o,1.394681*o,412e-6*o);const b=t.position(s);r=b.range;const _=O0.toFK5(b.lon,b.lat,s);i=_.lon,h=_.lat;const[T,z]=a.sincos(i),N=Math.sin(h);let O=0,Q=0,Y=0,t0=0,Z=0,o0=0;const W=function(){const s0=a.lightTime(u),a0=n.position(s-s0);Y=a0.range;const f0=O0.toFK5(a0.lon,a0.lat,s);O=f0.lon,Q=f0.lat;const[d0,w0]=a.sincos(O),[u0,l0]=a.sincos(Q);t0=Y*l0*w0-r*z,Z=Y*l0*d0-r*T,o0=Y*u0-r*N,u=Math.sqrt(t0*t0+Z*Z+o0*o0)};W(),W(),l=Math.atan2(Z,t0),M=Math.atan(o0/Math.hypot(t0,Z)),f=Math.sin(c),g=Math.cos(c),D=Math.sin(M),p=Math.cos(M),m=f*p*Math.sin(l-e)-g*D;const e0=Math.asin(m),L=113.6655*o+.8771*o*A,$=O-.01759*o/Y,q=Q-764e-6*o*Math.cos(O-L)/Y;I=Math.sin(q),y=Math.cos(q),w=Math.sin($-e),P=Math.cos($-e);const[F,R]=a.sincos(l-e),K=Math.atan2(f*I+g*y*w,y*P),U=Math.atan2(f*D+g*p*F,p*R);return[Math.abs(K-U),e0]},function(){const A=.10426388888888889*o/u,b=A*Math.abs(m),_=f*y*w-g*I,T=Math.asin(_),[z,N]=r0.nutation(s),O=r0.meanObliquity(s)+N;let Q=e-Math.PI/2;const Y=Math.PI/2-c,[t0,Z]=a.sincos(i-l);l+=.005693*o*Z/p,M+=.005693*o*t0*D,Q+=z,l+=z;let o0=new $0.Ecliptic(Q,Y).toEquatorial(O);const[W,e0]=[o0.ra,o0.dec];o0=new $0.Ecliptic(l,M).toEquatorial(O);const[L,$]=[o0.ra,o0.dec],[q,F]=a.sincos(e0),[R,K]=a.sincos($),[U,X]=a.sincos(W-L),s0=Math.atan2(F*U,q*K-F*R*X);return[T,s0,A,b]}]}const Q3={ring:X3,ub:V3};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module solardisk
 */function Z3(s,t){const n=(s-2398220)*2*Math.PI/25.38,o=7.25*Math.PI/180,c=73.6667*Math.PI/180+1.3958333*Math.PI/180*(s-2396758)/a.JulianCentury,e=C0.trueVSOP87(t,s),i=e.lon,h=e.range,[r,u]=r0.nutation(s),M=r0.meanObliquity(s)+u,f=i-20.4898/3600*Math.PI/180/h,g=f+r,[D,p]=a.sincos(f-c),[m,I]=a.sincos(o),y=-Math.cos(g)*Math.tan(M),w=-p*Math.tan(o),P=Math.atan(y)+Math.atan(w),E=Math.asin(D*m),x=Math.atan2(-D*I,-p),A=a.pmod(x-n,2*Math.PI);return[P,E,A]}function t5(s){const t=2398140227e-3+27.2752316*s,n=281.96*Math.PI/180+26.882476*Math.PI/180*s,[o,c]=a.sincos(2*n);return t+.1454*Math.sin(n)-.0085*o-.0141*c}const n5={ephemeris:Z3,cycle:t5};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module solstice
 */const{abs:s5,cos:qn,sin:o5}=Math,vn=Math.PI/180,B1=[172113929189e-5,365242.1374,.06134,.00111,-71e-5],H1=[172123325401e-5,365241.72562,-.05323,.00907,25e-5],z1=[172132570455e-5,365242.49558,-.11677,-.00297,74e-5],F1=[172141439987e-5,365242.88257,-.00769,-.00933,-6e-5],O1=[245162380984e-5,365242.37404,.05169,-.00411,-57e-5],Y1=[245171656767e-5,365241.62603,.00325,.00888,-3e-4],j1=[245181021715e-5,365242.01767,-.11575,.00337,78e-5],U1=[245190005952e-5,365242.74049,-.06223,-.00823,32e-5],Ys=function(){return[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]].map(t=>({a:t[0],b:t[1],c:t[2]}))}();function c5(s){return s<1e3?Q0(s,B1):Q0(s-2e3,O1)}function e5(s){return s<1e3?Q0(s,H1):Q0(s-2e3,Y1)}function i5(s){return s<1e3?Q0(s,z1):Q0(s-2e3,j1)}function r5(s){return s<1e3?Q0(s,F1):Q0(s-2e3,U1)}function Q0(s,t){const n=a.horner(s*.001,t),o=a.J2000Century(n),c=35999.373*vn*o-2.47*vn,e=1+.0334*qn(c)+7e-4*qn(2*c);let i=0;for(let h=Ys.length-1;h>=0;h--){const r=Ys[h];i+=r.a*qn((r.b+r.c*o)*vn)}return n+1e-5*i/e}function a5(s,t){return Ut(s,t,0)}function h5(s,t){return Ut(s,t,Math.PI/2)}function u5(s,t){return Ut(s,t,Math.PI)}function l5(s,t){return Ut(s,t,Math.PI*3/2)}function Ut(s,t,n){let o,c;return s<1e3?c=[B1,H1,z1,F1]:(c=[O1,Y1,j1,U1],s-=2e3),n=n%(Math.PI*2),n<Math.PI/2?o=c[0]:n<Math.PI?o=c[1]:n<Math.PI*3/2?o=c[2]:o=c[3],M5(s,t,n,o)}function M5(s,t,n,o){let c=a.horner(s*.001,o);for(;;){const e=C0.apparentVSOP87(t,c),i=58*o5(n-e.lon);if(c+=i,s5(i)<5e-6)break}return c}const f5={march:c5,june:e5,september:i5,december:r5,march2:a5,june2:h5,september2:u5,december2:l5,longitude:Ut};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module stellar
 */function d5(s,t){const n=.4*(t-s);return t-2.5*Math.log10(Math.pow(10,n)+1)}function m5(s){let t=0;for(const n of s)t+=Math.pow(10,-.4*n);return-2.5*Math.log10(t)}function p5(s,t){const n=.4*(t-s);return Math.pow(10,n)}function g5(s){return 2.5*Math.log10(s)}function D5(s,t){return s+5+5*Math.log10(t)}function w5(s,t){return s+5-5*Math.log10(t)}const y5={sum:d5,sumN:m5,ratio:p5,difference:g5,absoluteByParallax:D5,absoluteByDistance:w5};/**
 * @copyright 2013 Sonia Keys
 * @copyright 2016 commenthol
 * @license MIT
 * @module sundial
 */function Z0(s,t){this.x=s||0,this.y=t||0}function Rt(s,t){this.hour=s,this.points=t||[]}const bn=[-23.44,-20.15,-11.47,0,11.47,20.15,23.44];function P5(s,t,n,o){const[c,e]=a.sincos(s),i=c/e,[h,r]=a.sincos(t),[u,l]=a.sincos(o),M=c*l-e*u*r,f=[];for(let I=0;I<24;I++){const y=new Rt(I),w=(I-12)*15*Math.PI/180,P=Math.abs(w),[E,x]=a.sincos(w);for(const A of bn){const b=Math.tan(A*Math.PI/180),_=Math.acos(-i*b);if(P>_)continue;const T=h*u*E+(e*l+c*u*r)*x+M*b;if(T<0)continue;const z=r*E-h*(c*x-e*b),N=l*h*E-(e*u-c*l*r)*x-(c*u+e*l*r)*b;y.points.push(new Z0(n*z/T,n*N/T))}y.points.length>0&&f.push(y)}const g=new Z0;g.x=n/M*e*h,g.y=-n/M*(c*u+e*l*r);const D=Math.abs(M),p=n/D,m=Math.asin(D);return{lines:f,center:g,length:p,angle:m}}function b5(s,t){const n=Math.tan(s),o=[],c=[];for(let e=0;e<24;e++){const i=new Rt(e),h=new Rt(e),r=(e-12)*15*Math.PI/180,u=Math.abs(r),[l,M]=a.sincos(r);for(const f of bn){const g=Math.tan(f*Math.PI/180),D=Math.acos(-n*g);if(u>D)continue;const p=-t*l/g,m=t*M/g;g<0?h.points.push(new Z0(p,m)):i.points.push(new Z0(p,-m))}i.points.length>0&&o.push(i),h.points.length>0&&c.push(h)}return{north:o,south:c}}function A5(s,t){const[n,o]=a.sincos(s),c=n/o,e=[];for(let r=0;r<24;r++){const u=new Rt(r),l=(r-12)*15*Math.PI/180,M=Math.abs(l),[f,g]=a.sincos(l);for(const D of bn){const p=Math.tan(D*Math.PI/180),m=Math.acos(-c*p);if(M>m)continue;const I=o*g+n*p,y=t*f/I,w=t*(n*g-o*p)/I;u.points.push(new Z0(y,w))}u.points.length>0&&e.push(u)}const i=new Z0(0,-t/c),h=t/Math.abs(n);return{lines:e,center:i,length:h}}function I5(s,t,n){const[o,c]=a.sincos(s),e=o/c,[i,h]=a.sincos(t),r=[];for(let M=0;M<24;M++){const f=new Rt(M),g=(M-12)*15*Math.PI/180,D=Math.abs(g),[p,m]=a.sincos(g);for(const I of bn){const y=Math.tan(I*Math.PI/180),w=Math.acos(-e*y);if(D>w)continue;const P=i*p+o*h*m-c*h*y;if(P<0)continue;const E=n*(h*p-o*i*m+c*i*y)/P,x=-n*(c*m+o*y)/P;f.points.push(new Z0(E,x))}f.points.length>0&&r.push(f)}const u=new Z0;u.x=-n*i/h,u.y=n*e/h;const l=n/Math.abs(c*h);return{lines:r,center:u,length:l}}const E5={general:P5,equatorial:b5,horizontal:A5,vertical:I5};/**
 * @copyright 2016 commenthol
 * @license MIT
 * @module sunrise
 */const It={sunrise:new c0.Angle(!0,0,50,0).rad(),sunriseEnd:new c0.Angle(!0,0,18,0).rad(),twilight:new c0.Angle(!0,6,0,0).rad(),nauticalTwilight:new c0.Angle(!0,12,0,0).rad(),night:new c0.Angle(!0,18,0,0).rad(),goldenHour:new c0.Angle(!1,6,0,0).rad()},js=s=>nt.refraction(It.sunrise,s),Us=s=>nt.refraction(It.sunriseEnd,s),Gs=s=>nt.refraction(It.twilight,s),Ks=s=>nt.refraction(It.nauticalTwilight,s),Xs=s=>nt.refraction(It.night,s),Vs=s=>nt.refraction(It.goldenHour,s);class T5{constructor(t,n,o,c){this.date=t,this.jde=t.midnight().toJDE(),this.lat=c0.angleFromDeg(n),this.lon=c0.angleFromDeg(o),this.refraction=c}_calcNoon(t){const n=c0.secFromHourAngle(kn.eSmart(t)),c=43200+c0.secFromHourAngle(this.lon)-n;return a.pmod(c/86400,86400)}_calcRiseOrSet(t,n,o){const c=c0.secFromHourAngle(kn.eSmart(t)),e=C0.apparentEquatorial(t).dec;let i=nt.hourAngle(this.lat,n,e);return o&&(i=-i),(43200-c0.secFromHourAngle(i-this.lon)-c)/86400}_calcPolarDayNight(t,n,o){let c=this.jde,e,i=0;for(;i<190;){c+=o;try{e=this._calcRiseOrSet(c,t,n),e=this._calcRiseOrSet(c+e,t,n);break}catch{e=void 0,i++}}if(e!==void 0)return new F0.Calendar().fromJDE(c+e)}_calc(t,n){let o;const c=this.jde;try{return o=this._calcRiseOrSet(c,t,n),o=this._calcRiseOrSet(c+o,t,n),new F0.Calendar().fromJDE(c+o)}catch{let i=n?-1:1;const h=this.date.dayOfYear();return(this.lat>0&&h>76&&h<267||this.lat<0&&(h<83||h>262))&&(i=-i),this._calcPolarDayNight(t,n,i)}}noon(){const t=this.jde;let n=this._calcNoon(t+this.lon/(2*Math.PI));return n=this._calcNoon(t+n),new F0.Calendar().fromJDE(t+n)}rise(){return this._calc(js(this.refraction),!1)}set(){return this._calc(js(this.refraction),!0)}riseEnd(){return this._calc(Us(this.refraction),!1)}setStart(){return this._calc(Us(this.refraction),!0)}dawn(){return this._calc(Gs(this.refraction),!1)}dusk(){return this._calc(Gs(this.refraction),!0)}nauticalDawn(){return this._calc(Ks(this.refraction),!1)}nauticalDusk(){return this._calc(Ks(this.refraction),!0)}nightStart(){return this._calc(Xs(this.refraction),!0)}nightEnd(){return this._calc(Xs(this.refraction),!1)}goldenHourStart(){return this._calc(Vs(this.refraction),!0)}goldenHourEnd(){return this._calc(Vs(this.refraction),!1)}}const L5={Sunrise:T5},J5=Object.freeze(Object.defineProperty({__proto__:null,angle:jc,apparent:Ro,apsis:n2,base:a,binary:a2,circle:f2,conjunction:l2,coord:$0,deltat:St,eclipse:ni,elementequinox:ge,elliptic:mt,elp:oi,eqtime:kn,fit:fi,globe:wo,illum:Go,interpolation:x0,iterate:Bt,jm:Gi,julian:F0,jupiter:Vi,jupitermoons:pr,kepler:xt,line:Pr,mars:xr,moon:Fr,moonillum:Kr,moonmaxdec:ta,moonnode:oa,moonphase:hs,moonposition:a1,nearparabolic:Ar,node:Jr,nutation:r0,parabolic:ea,parallactic:Pa,parallax:ma,perihelion:Wa,planetary:D3,planetelements:$t,planetposition:O0,pluto:y3,precess:Dt,refraction:x3,rise:nt,saturnmoons:K3,saturnring:Q3,sexagesimal:c0,sidereal:yt,solar:C0,solardisk:n5,solarxyz:zo,solstice:f5,stellar:y5,sundial:E5,sunrise:L5},Symbol.toStringTag,{value:"Module"})),{Moon:Qs,Observer:G1,Search:C5}=J5;function x5(s,t){const o=(void 0)(new Date),c=new G1(s,t),e=Qs.apparentGeocentric(o),i=c.horizontal(e,o),h=Qs.phase(o);return{azimuth:i.azimuth,altitude:i.altitude,phase:h.k}}function $5(s,t){const n=new Date,o=new G1(s,t),c=C5.moonRiseSet(o,n);return{rise:c.rise?(void 0)(c.rise):null,set:c.set?(void 0)(c.set):null}}function S5(s,t,n="suncalc"){if(n==="astronomia")return x5(s,t);{const o=new Date,c=Wn.getMoonPosition(o,s,t),e=Wn.getMoonIllumination(o),i=(c.azimuth*180/Math.PI+180)%360,h=c.altitude*180/Math.PI;return{azimuth:i,distance:c.distance,phase:e.phase,altitude:h}}}function q5(s,t,n="suncalc"){if(n==="astronomia")return $5(s,t);{const o=new Date,c=Wn.getMoonTimes(o,s,t);return{rise:c.rise??null,set:c.set??null}}}const v5=[{name:"N",min:348.75,max:11.25},{name:"NNE",min:11.25,max:33.75},{name:"NE",min:33.75,max:56.25},{name:"ENE",min:56.25,max:78.75},{name:"E",min:78.75,max:101.25},{name:"ESE",min:101.25,max:123.75},{name:"SE",min:123.75,max:146.25},{name:"SSE",min:146.25,max:168.75},{name:"S",min:168.75,max:191.25},{name:"SSW",min:191.25,max:213.75},{name:"SW",min:213.75,max:236.25},{name:"WSW",min:236.25,max:258.75},{name:"W",min:258.75,max:281.25},{name:"WNW",min:281.25,max:303.75},{name:"NW",min:303.75,max:326.25},{name:"NNW",min:326.25,max:348.75}];function W5(s){for(const t of v5)if(s>=t.min&&s<t.max)return t.name;return s>=348.75||s<11.25?"N":""}const en=document.getElementById("moon-direction"),Zs=document.getElementById("distance"),to=document.getElementById("current-time"),no=document.getElementById("moon-phase"),so=document.getElementById("altitude"),oo=document.getElementById("moon-rise"),co=document.getElementById("moon-set"),eo=document.getElementById("map-link"),K1=document.getElementById("suncalc"),X1=document.getElementById("astronomia");let On=null;function Es(){if(!On)return;const{latitude:s,longitude:t}=On.coords,n=K1.checked?"suncalc":X1.checked?"astronomia":"suncalc",o=S5(s,t,n),c=q5(s,t,n),e=W5(o.azimuth);en&&(en.textContent=`方角: ${o.azimuth.toFixed(2)}° ${e}`),Zs&&(Zs.textContent=`距離: ${o.distance.toFixed(0)} km`),to&&(to.textContent=`現在時刻: ${new Date().toLocaleTimeString()}`),no&&(no.textContent=`月齢: ${_5(o.phase)} (${(o.phase*29.53).toFixed(1)})`),so&&(so.textContent=`高度: ${o.altitude.toFixed(2)}°`),oo&&(oo.textContent=`月の出: ${c.rise?.toLocaleTimeString()??"N/A"}`),co&&(co.textContent=`月の入り: ${c.set?.toLocaleTimeString()??"N/A"}`),eo&&(eo.href=`https://www.google.com/maps?q=${s},${t}`)}function _5(s){return s<.03||s>.97?"新月":s<.22?"三日月":s<.28?"上弦の月":s<.47?"十三夜月":s<.53?"満月":s<.72?"十六夜月":s<.78?"下弦の月":s<.97?"有明月":""}function N5(s){On=s,Es()}if("geolocation"in navigator){const s=()=>navigator.geolocation.getCurrentPosition(N5);setInterval(s,1e3),s()}else en&&(en.textContent="Geolocation is not supported by your browser.");K1.addEventListener("change",Es);X1.addEventListener("change",Es);
